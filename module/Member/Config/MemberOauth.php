<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Member\Config; use ModStart\Core\Exception\BizException; use Module\Member\Oauth\AbstractOauth; class MemberOauth { private static $list = array(); public static function register($AVLNU) { self::$list[] = $AVLNU; } public static function hasEnableItems() { $xXwen = self::get(); return !empty($xXwen); } public static function hasItems() { goto UNGiG; fWe1v: $xXwen = array_filter($xXwen, function ($AVLNU) { return $AVLNU->hasRender(); }); goto t3U5s; t3U5s: return !empty($xXwen); goto HmPyL; UNGiG: $xXwen = self::get(); goto fWe1v; HmPyL: } public static function get($rfBQu = null) { goto tPKCz; tPKCz: static $ZqYpj = null; goto VvT_k; VvT_k: if (null === $ZqYpj) { $ZqYpj = array(); foreach (self::$list as $AVLNU) { if (is_string($AVLNU)) { $AVLNU = array(app($AVLNU)); } else { if ($AVLNU instanceof \Closure) { $AVLNU = call_user_func($AVLNU); } } $ZqYpj = array_merge($ZqYpj, $AVLNU); } } goto f7B59; f7B59: if (null === $rfBQu) { return $ZqYpj; } goto MMgbC; JGUcw: return null; goto DXaIJ; MMgbC: foreach ($ZqYpj as $AVLNU) { if ($AVLNU->name() == $rfBQu) { return $AVLNU; } } goto JGUcw; DXaIJ: } public static function getByOauthKey($rfBQu) { foreach (self::get() as $TZ7L5) { if ($TZ7L5->oauthKey() == $rfBQu) { return $TZ7L5; } } return null; } public static function getOrFail($rfBQu) { goto cOXAb; WJg43: return $TZ7L5; goto qcllC; JuQmd: BizException::throwsIfEmpty('授权登录信息(' . $rfBQu . ')未找到', $TZ7L5); goto WJg43; cOXAb: $TZ7L5 = self::get($rfBQu); goto JuQmd; qcllC: } private static function sort() { static $p3Gtl = 1000; return $p3Gtl++; } }