<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Vendor\Admin\Widget; use Module\Vendor\Type\AdminWidgetLinkType; class AdminWidgetLink { private static $list = array(); public static function register($xus0C) { self::$list[] = $xus0C; } public static function get() { goto byLr4; byLr4: $PBpnF = array(); goto Uzut2; Uzut2: foreach (self::$list as $AVLNU) { if ($AVLNU instanceof \Closure) { $FEjaa = call_user_func($AVLNU); if (!empty($FEjaa)) { if (isset($FEjaa['title']) && isset($FEjaa['list'])) { $PBpnF[] = $FEjaa; } else { $PBpnF = array_merge($PBpnF, $FEjaa); } } } else { $PBpnF[] = $AVLNU; } } goto ze81W; ze81W: foreach ($PBpnF as $k8Rwr => $gghxW) { if (!isset($gghxW['type'])) { $PBpnF[$k8Rwr]['type'] = AdminWidgetLinkType::WEB; } } goto EpMql; dKgNo: return array_values($TTbtW); goto DI4CH; EpMql: $TTbtW = array(); goto BF0za; BF0za: foreach ($PBpnF as $U8G_W => $gghxW) { $Cc2wA = $gghxW['type'] . '-' . $gghxW['title']; if (isset($TTbtW[$Cc2wA])) { $TTbtW[$Cc2wA]['list'] = array_merge($TTbtW[$Cc2wA]['list'], $gghxW['list']); } else { $TTbtW[$Cc2wA] = $gghxW; } } goto dKgNo; DI4CH: } public static function build($TFhKm, $cssJC, $mhShF = null) { goto jv2Hx; UYFk3: return array('title' => $TFhKm, 'type' => $mhShF, 'list' => array_filter(array_map(function ($AVLNU) { return $AVLNU ? array('title' => $AVLNU[0], 'link' => $AVLNU[1]) : null; }, $cssJC))); goto Fsaxf; YtMT2: if (empty($cssJC)) { return null; } goto UYFk3; jv2Hx: if (is_null($mhShF)) { $mhShF = AdminWidgetLinkType::WEB; } goto YtMT2; Fsaxf: } public static function buildMobileWithPrefix($uyoqy, $TFhKm, $cssJC) { $cssJC = array_map(function ($AVLNU) use($uyoqy) { return array($AVLNU[0], $uyoqy . $AVLNU[1]); }, $cssJC); return self::build($TFhKm, $cssJC, AdminWidgetLinkType::MOBILE); } }