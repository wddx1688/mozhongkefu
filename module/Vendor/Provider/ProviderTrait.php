<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Vendor\Provider; use Module\Vendor\Provider\Recommend\RecommendBiz; trait ProviderTrait { private static $list = array(); public static function register($yHanX) { self::$list[] = $yHanX; } public static function listAll() { goto IZ3Lh; nwX6g: if ($dGy_x) { return self::$list; } goto uFskE; ZVuVj: $dGy_x = true; goto puyxP; IZ3Lh: static $dGy_x = false; goto nwX6g; puyxP: return self::$list; goto z6t7i; sc44m: foreach (self::$list as $U8G_W => $gghxW) { if ($gghxW instanceof \Closure) { self::$list[$U8G_W] = call_user_func($gghxW); } else { if (is_string($gghxW)) { self::$list[$U8G_W] = app($gghxW); } } if (!$cBgNO && method_exists(self::$list[$U8G_W], 'order')) { $cBgNO = true; } } goto UVqOU; uFskE: $cBgNO = false; goto sc44m; UVqOU: if ($cBgNO) { @usort(self::$list, function ($S03jg, $mWTFP) { if ($S03jg->order() == $mWTFP->order()) { return 0; } return $S03jg->order() > $mWTFP->order() ? 1 : -1; }); } goto ZVuVj; z6t7i: } public static function allMap() { return array_build(self::listAll(), function ($U8G_W, $gghxW) { return array($gghxW->name(), $gghxW->title()); }); } public static function allDefaultMap() { return array_merge(array('' => L('None')), array_build(self::listAll(), function ($U8G_W, $gghxW) { return array($gghxW->name(), $gghxW->title()); })); } public static function isEmpty() { return empty(self::$list); } public static function getByName($rfBQu) { foreach (self::listAll() as $AVLNU) { if ($AVLNU->name() == $rfBQu) { return $AVLNU; } } return null; } public static function first() { foreach (self::listAll() as $AVLNU) { return $AVLNU; } return null; } }