<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Vendor\Provider\Notifier; use Module\Vendor\Util\CacheUtil; use Module\Vendor\Util\NoneLoginOperateUtil; class NotifierProvider { public static function all() { goto nmewb; HCS9n: if (null === $GKbTK) { goto H8QMT; XEdSn: if (empty($TdeZw)) { $TdeZw = array(DefaultNotifierProvider::class); } goto D5Kww; D5Kww: $GKbTK = array_map(function ($HcvYd) { return app($HcvYd); }, array_unique($TdeZw)); goto fOHIU; H8QMT: $TdeZw = config('NotifierProviders'); goto XEdSn; fOHIU: } goto DcR0m; nmewb: static $GKbTK = null; goto HCS9n; DcR0m: return $GKbTK; goto XteFe; XteFe: } public static function notify($UegGl, $xy3eh, $n3GvS, $uZEpM = array()) { foreach (self::all() as $X0c2E) { $X0c2E->notify($UegGl, $xy3eh, $n3GvS, $uZEpM); } } public static function notifyPeriod($KJiEr, $UegGl, $xy3eh, $n3GvS, $uZEpM = array()) { CacheUtil::remember("Notifier:NotifyPeriod:{$UegGl}:{$KJiEr}", $KJiEr, function () use($UegGl, $xy3eh, $n3GvS, $uZEpM) { self::notify($UegGl, $xy3eh, $n3GvS, $uZEpM); return time(); }); } public static function notifyNoneLoginOperateProcessUrl($UegGl, $xy3eh, $n3GvS, $eGyft, $uZEpM = array()) { goto nQS8S; aMtjZ: foreach ($kqjs_ as $U8G_W => $gghxW) { if (isset($uZEpM[$U8G_W])) { $kqjs_[$U8G_W] = $uZEpM[$U8G_W]; unset($uZEpM[$U8G_W]); } } goto sErnb; sErnb: if ($eGyft) { $thRM1 = NoneLoginOperateUtil::generateUrl($eGyft, $uZEpM, $kqjs_['domainUrl']); $kqjs_['processUrl'] = $thRM1; } goto wQDE0; nQS8S: $kqjs_ = array('domainUrl' => null, 'viewUrl' => null); goto aMtjZ; wQDE0: self::notify($UegGl, $xy3eh, $n3GvS, array_merge($uZEpM, $kqjs_)); goto vOzlT; vOzlT: } }