<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Vendor\Provider\HomePage; use ModStart\Core\Exception\BizException; use ModStart\Core\Util\AgentUtil; class HomePageProvider { private static $instances = array(DefaultHomePageProvider::class, DefaultMobileHomePageProvider::class); public static function register($yHanX) { self::$instances[] = $yHanX; } public static function registerQuick($xy3eh, $yA25I, $mhShF = array(AbstractHomePageProvider::TYPE_PC, AbstractHomePageProvider::TYPE_MOBILE)) { self::register(QuickHomePageProvider::make($xy3eh, $yA25I, $mhShF)); } public static function all() { foreach (self::$instances as $U8G_W => $gghxW) { if ($gghxW instanceof \Closure) { self::$instances[$U8G_W] = call_user_func($gghxW); } else { if (is_string($gghxW)) { self::$instances[$U8G_W] = app($gghxW); } } } return self::$instances; } public static function call($xkIGj, $HzMYu) { goto tRvyp; VzjR1: if (modstart_config('HomePage_Enable', false)) { if (AgentUtil::isMobile()) { $HB1O4 = modstart_config('HomePage_HomeMobile'); } if (empty($HB1O4)) { $HB1O4 = modstart_config('HomePage_Home'); } } goto hwNo0; gPlpB: if (!starts_with($ts9Wf, '\\')) { $ts9Wf = '\\' . $ts9Wf; } goto AkJCH; zCtLY: list($BOQ7Q, $EnX8D) = explode('@', $HB1O4); goto mNP35; AkJCH: if ($ts9Wf == $BOQ7Q && $ZMghn == $EnX8D) { list($BOQ7Q, $EnX8D) = explode('@', $HzMYu); } goto zAlUj; zAlUj: $BOQ7Q = app($BOQ7Q); goto HuLj3; mNP35: list($ts9Wf, $ZMghn) = explode('::', $xkIGj); goto gPlpB; qsWkm: BizException::throwsIfEmpty('首页不存在', $HB1O4); goto zCtLY; tRvyp: $HB1O4 = null; goto VzjR1; hwNo0: if (empty($HB1O4)) { $HB1O4 = $HzMYu; } goto qsWkm; HuLj3: return app()->call(array($BOQ7Q, $EnX8D)); goto RrGUl; RrGUl: } }