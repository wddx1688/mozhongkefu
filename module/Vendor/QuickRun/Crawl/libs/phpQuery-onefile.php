<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ goto SPfOe; kmhXO: if (!function_exists('mb_substr_count')) { function mb_substr_count($YNrl_, $feSGz) { return substr_count($YNrl_, $feSGz); } } goto Ou40U; dRhAO: abstract class phpQueryEvents { public static function trigger($zm8Ri, $mhShF, $XWlC_ = array(), $Z18mB = null) { goto PkC1f; PkC1f: $kTY4F = phpQuery::getDocumentID($zm8Ri); goto fWrsx; fWrsx: $dWBd0 = null; goto FhlaJ; FhlaJ: if (strpos($mhShF, '.') !== false) { list($rfBQu, $dWBd0) = explode('.', $mhShF); } else { $rfBQu = $mhShF; } goto SJYvh; SJYvh: if (!$Z18mB) { if (self::issetGlobal($kTY4F, $mhShF)) { $a1Nc6 = phpQuery::getDocument($kTY4F); $a1Nc6->find('*')->add($a1Nc6->document)->trigger($mhShF, $XWlC_); } } else { goto dAZ7F; kOxXF: while ($Z18mB) { phpQuery::debug('Triggering ' . ($k8Rwr ? 'bubbled ' : '') . "event '{$mhShF}' on " . 'node 
'); $MU9DT->currentTarget = $Z18mB; $QhW5F = self::getNode($kTY4F, $Z18mB); if (isset($QhW5F->eventHandlers)) { foreach ($QhW5F->eventHandlers as $kmQA1 => $Ze9sB) { goto UARHi; MYugY: if ($dWBd0 && $ZdcuG && $dWBd0 != $ZdcuG) { continue; } goto NoHg3; NoHg3: foreach ($Ze9sB as $I6NQU) { goto J58sF; qn7lj: if ($F8OxY === false) { $MU9DT->bubbles = false; } goto zz6mS; J58sF: phpQuery::debug('Calling event handler
'); goto Wq4e5; Tz1un: $F8OxY = phpQuery::callbackRun($I6NQU['callback'], $dAwYz); goto qn7lj; HufDr: $dAwYz = array_merge(array($MU9DT), $XWlC_); goto Tz1un; Wq4e5: $MU9DT->data = $I6NQU['data'] ? $I6NQU['data'] : null; goto HufDr; zz6mS: } goto zqVr6; rEXVS: if (strpos($mhShF, '.') !== false) { list($Eby0E, $ZdcuG) = explode('.', $kmQA1); } else { $Eby0E = $kmQA1; } goto gyBbl; UARHi: $ZdcuG = null; goto rEXVS; gyBbl: if ($rfBQu != $Eby0E) { continue; } goto MYugY; zqVr6: } } if (!$MU9DT->bubbles) { break; } $Z18mB = $Z18mB->parentNode; $k8Rwr++; } goto PxjOK; KWXof: $k8Rwr = 0; goto kOxXF; dAZ7F: if (isset($XWlC_[0]) && $XWlC_[0] instanceof DOMEvent) { goto q8dxp; q8dxp: $MU9DT = $XWlC_[0]; goto leSIH; CS8ss: $MU9DT->target = $Z18mB; goto A0syn; A0syn: $XWlC_ = array_slice($XWlC_, 1); goto ebDwp; leSIH: $MU9DT->relatedTarget = $MU9DT->target; goto CS8ss; ebDwp: } else { $MU9DT = new DOMEvent(array('type' => $mhShF, 'target' => $Z18mB, 'timeStamp' => time())); } goto KWXof; PxjOK: } goto z0tZs; z0tZs: } public static function add($zm8Ri, $Z18mB, $mhShF, $XWlC_, $oZLCv = null) { goto yPm9p; mnnW9: if (!$QhW5F) { $QhW5F = self::setNode($kTY4F, $Z18mB); } goto zfUiK; GhIW4: $QhW5F->eventHandlers[$mhShF][] = array('callback' => $oZLCv, 'data' => $XWlC_); goto Qa7L0; PGJ7P: $QhW5F = self::getNode($kTY4F, $Z18mB); goto mnnW9; zfUiK: if (!isset($QhW5F->eventHandlers[$mhShF])) { $QhW5F->eventHandlers[$mhShF] = array(); } goto GhIW4; y_qtW: $kTY4F = phpQuery::getDocumentID($zm8Ri); goto PGJ7P; yPm9p: phpQuery::debug("Binding '{$mhShF}' event"); goto y_qtW; Qa7L0: } public static function remove($zm8Ri, $Z18mB, $mhShF = null, $oZLCv = null) { goto f5ibB; rLtTZ: if (is_object($QhW5F) && isset($QhW5F->eventHandlers[$mhShF])) { if ($oZLCv) { foreach ($QhW5F->eventHandlers[$mhShF] as $U8G_W => $I6NQU) { if ($I6NQU['callback'] == $oZLCv) { unset($QhW5F->eventHandlers[$mhShF][$U8G_W]); } } } else { unset($QhW5F->eventHandlers[$mhShF]); } } goto TYFnX; f5ibB: $kTY4F = phpQuery::getDocumentID($zm8Ri); goto rDLnM; rDLnM: $QhW5F = self::getNode($kTY4F, $Z18mB); goto rLtTZ; TYFnX: } protected static function getNode($kTY4F, $Z18mB) { foreach (phpQuery::$documents[$kTY4F]->eventsNodes as $QhW5F) { if ($Z18mB->isSameNode($QhW5F)) { return $QhW5F; } } } protected static function setNode($kTY4F, $Z18mB) { phpQuery::$documents[$kTY4F]->eventsNodes[] = $Z18mB; return phpQuery::$documents[$kTY4F]->eventsNodes[count(phpQuery::$documents[$kTY4F]->eventsNodes) - 1]; } protected static function issetGlobal($kTY4F, $mhShF) { return isset(phpQuery::$documents[$kTY4F]) ? in_array($mhShF, phpQuery::$documents[$kTY4F]->eventsGlobal) : false; } } goto XOZWr; DLWxg: class CallbackReturnReference extends Callback implements ICallbackNamed { protected $reference; public function __construct(&$ca6T9, $rfBQu = null) { $this->reference =& $ca6T9; $this->callback = array($this, 'callback'); } public function callback() { return $this->reference; } public function getName() { return 'Callback: ' . $this->name; } public function hasName() { return isset($this->name) && $this->name; } } goto qHEHm; g0J1A: define('DOMNODE', 'DOMNode'); goto DN_3C; XCXMw: set_include_path(get_include_path() . PATH_SEPARATOR . dirname(__FILE__) . '/phpQuery/' . PATH_SEPARATOR . dirname(__FILE__) . '/phpQuery/plugins/'); goto tU5JK; KSi50: if (!function_exists('mb_strlen')) { function mb_strlen($fvKJb) { return strlen($fvKJb); } } goto U6iDq; XOZWr: interface ICallbackNamed { function hasName(); function getName(); } goto uNQP5; W51mX: function pq($f0bpX, $rYP3a = null) { $wovD1 = func_get_args(); return call_user_func_array(array('phpQuery', 'pq'), $wovD1); } goto XCXMw; uNQP5: class Callback implements ICallbackNamed { public $callback = null; public $params = null; protected $name; public function __construct($oZLCv, $GZ0ou = null, $KqVai = null, $uQl4E = null) { goto SSubt; fVASA: if ($oZLCv instanceof Callback) { } else { $this->callback = $oZLCv; $this->params = $dAwYz; } goto uG113; lTqCQ: $dAwYz = array_slice($dAwYz, 1); goto fVASA; SSubt: $dAwYz = func_get_args(); goto lTqCQ; uG113: } public function getName() { return 'Callback: ' . $this->name; } public function hasName() { return isset($this->name) && $this->name; } public function setName($rfBQu) { $this->name = $rfBQu; return $this; } } goto A9YQk; zk2Dj: if (!function_exists('mb_stripos')) { function mb_stripos($YNrl_, $feSGz, $kxIuL = 0) { return stripos($YNrl_, $feSGz, $kxIuL); } } goto SgL80; r2Qyd: if (!function_exists('mb_internal_encoding')) { function mb_internal_encoding($IdGNN) { return true; } } goto fY8VT; gKxRr: class DOMDocumentWrapper { public $document; public $id; public $contentType = ''; public $xpath; public $uuid = 0; public $data = array(); public $dataNodes = array(); public $events = array(); public $eventsNodes = array(); public $eventsGlobal = array(); public $frames = array(); public $root; public $isDocumentFragment; public $isXML = false; public $isXHTML = false; public $isHTML = false; public $charset; public function __construct($nFewh = null, $yjlXg = null, $GdE9C = null) { if (isset($nFewh)) { $this->load($nFewh, $yjlXg, $GdE9C); } $this->id = $GdE9C ? $GdE9C : md5(microtime()); } public function load($nFewh, $yjlXg = null, $GdE9C = null) { goto s1mph; xL2K5: return false; goto Kn5kC; mR7vx: if ($dZyzF) { goto qKjv2; WBxMY: return true; goto FeRDa; qKjv2: $this->document->preserveWhiteSpace = true; goto yzGQ6; yzGQ6: $this->xpath = new DOMXPath($this->document); goto CbHQk; CbHQk: $this->afterMarkupLoad(); goto WBxMY; FeRDa: } goto xL2K5; ACT2B: if ($nFewh instanceof DOMDOCUMENT) { goto FZ0iS; FZ0iS: $this->document = $nFewh; goto jSfwC; E7pqz: $this->charset = $this->document->encoding; goto KNJD_; jSfwC: $this->root = $this->document; goto E7pqz; KNJD_: } else { $dZyzF = $this->loadMarkup($nFewh); } goto mR7vx; s1mph: $this->contentType = strtolower($yjlXg); goto ACT2B; Kn5kC: } protected function afterMarkupLoad() { if ($this->isXHTML) { $this->xpath->registerNamespace('html', 'http://www.w3.org/1999/xhtml'); } } protected function loadMarkup($nFewh) { goto R2hoH; mgwy3: return $dZyzF; goto ViT2Q; R2hoH: $dZyzF = false; goto AqCSV; AqCSV: if ($this->contentType) { goto sXzq5; sXzq5: self::debug("Load markup for content type {$this->contentType}"); goto WQC2T; WQC2T: list($yjlXg, $ZHFlV) = $this->contentTypeToArray($this->contentType); goto Qmytr; Qmytr: switch ($yjlXg) { case 'text/html': goto fD3Ja; jGZrY: break; goto h601F; ISb4x: $dZyzF = $this->loadMarkupHTML($nFewh, $ZHFlV); goto jGZrY; fD3Ja: phpQuery::debug("Loading HTML, content type '{$this->contentType}'"); goto ISb4x; h601F: case 'text/xml': case 'application/xhtml+xml': goto rOaeu; rOaeu: phpQuery::debug("Loading XML, content type '{$this->contentType}'"); goto jx5Ew; FSVRh: break; goto gVIc2; jx5Ew: $dZyzF = $this->loadMarkupXML($nFewh, $ZHFlV); goto FSVRh; gVIc2: default: if (strpos('xml', $this->contentType) !== false) { phpQuery::debug("Loading XML, content type '{$this->contentType}'"); $dZyzF = $this->loadMarkupXML($nFewh, $ZHFlV); } else { phpQuery::debug("Could not determine document type from content type '{$this->contentType}'"); } } goto WWRCh; WWRCh: } else { if ($this->isXML($nFewh)) { goto Mfozy; s87nX: if (!$dZyzF && $this->isXHTML) { phpQuery::debug('Loading as XML failed, trying to load as HTML, isXHTML == true'); $dZyzF = $this->loadMarkupHTML($nFewh); } goto OEUnf; Mfozy: phpQuery::debug('Loading XML, isXML() == true'); goto mgQ8r; mgQ8r: $dZyzF = $this->loadMarkupXML($nFewh); goto s87nX; OEUnf: } else { phpQuery::debug('Loading HTML, isXML() == false'); $dZyzF = $this->loadMarkupHTML($nFewh); } } goto mgwy3; ViT2Q: } protected function loadMarkupReset() { $this->isXML = $this->isXHTML = $this->isHTML = false; } protected function documentCreate($ZHFlV, $hi1qn = '1.0') { goto LDhPB; lTeWz: $this->document->formatOutput = true; goto qBvni; qp1fK: $this->document = new DOMDocument($hi1qn, $ZHFlV); goto xzd9z; xzd9z: $this->charset = $this->document->encoding; goto lTeWz; LDhPB: if (!$hi1qn) { $hi1qn = '1.0'; } goto qp1fK; qBvni: $this->document->preserveWhiteSpace = true; goto fKIlZ; fKIlZ: } protected function loadMarkupHTML($nFewh, $pDwSZ = null) { goto PAqsK; UlF_F: $CO0A3 = strtoupper($CO0A3); goto Hd_kO; Uj8LA: if ($this->isDocumentFragment) { phpQuery::debug("Full markup load (HTML), DocumentFragment detected, using charset '{$ZHFlV}'"); $F8OxY = $this->documentFragmentLoadMarkup($this, $ZHFlV, $nFewh); } else { goto TzTRy; TzTRy: if ($EMOvw) { phpQuery::debug("Full markup load (HTML), appending charset: '{$ZHFlV}'"); $nFewh = $this->charsetAppendToHTML($nFewh, $ZHFlV); } goto LIWUC; U9zzA: $F8OxY = phpQuery::$debug === 2 ? $this->document->loadHTML($nFewh) : @$this->document->loadHTML($nFewh); goto vzjCr; zhpc8: $this->documentCreate($ZHFlV); goto U9zzA; vzjCr: if ($F8OxY) { $this->root = $this->document; } goto T4HWT; LIWUC: phpQuery::debug("Full markup load (HTML), documentCreate('{$ZHFlV}')"); goto zhpc8; T4HWT: } goto jOfSh; dy0WU: $pDwSZ = strtoupper($pDwSZ); goto UlF_F; zFMfA: if ($CO0A3) { $ZHFlV = $CO0A3; $nFewh = $this->charsetFixHTML($nFewh); } else { if ($pDwSZ) { $ZHFlV = $pDwSZ; } } goto YbmGp; K7llT: if ($pDwSZ && $CO0A3 && $pDwSZ !== $CO0A3) { phpQuery::debug('CHARSET CONVERT'); if (function_exists('mb_detect_encoding')) { goto zSHjR; ndULg: phpQuery::debug("DETECTED '{$Ztfjp}'"); goto jZ7jA; WiE0S: if ($Ztfjp !== $pDwSZ) { goto hQ2sa; hQ2sa: phpQuery::debug("CONVERT {$Ztfjp} => {$pDwSZ}"); goto RtyQl; bPT0P: $nFewh = $this->charsetAppendToHTML($nFewh, $pDwSZ); goto zWfhr; zWfhr: $ZHFlV = $pDwSZ; goto lDai3; RtyQl: $nFewh = mb_convert_encoding($nFewh, $pDwSZ, $Ztfjp); goto bPT0P; lDai3: } goto rxW8p; zSHjR: $sIi7A = array($CO0A3, $pDwSZ, 'AUTO'); goto pzY9n; jZ7jA: if ($Ztfjp !== $CO0A3) { } goto WiE0S; pzY9n: $Ztfjp = mb_detect_encoding($nFewh, implode(', ', $sIi7A)); goto IexhO; IexhO: if (!$Ztfjp) { $Ztfjp = $CO0A3; } goto ndULg; rxW8p: } else { phpQuery::debug('TODO: charset conversion without mbstring...'); } } goto s4qat; YbmGp: if (!$ZHFlV) { $ZHFlV = phpQuery::$defaultCharset; } goto N6CKC; JTJNL: return $F8OxY; goto PiC_9; jOfSh: if ($F8OxY && !$this->contentType) { $this->contentType = 'text/html'; } goto JTJNL; Hd_kO: phpQuery::debug("DOC: {$CO0A3} REQ: {$pDwSZ}"); goto K7llT; N6CKC: if (!$CO0A3) { $CO0A3 = 'ISO-8859-1'; $EMOvw = true; } goto dy0WU; tLXJX: $this->isHTML = true; goto qR9Y0; s4qat: $F8OxY = false; goto Uj8LA; qR9Y0: if (!isset($this->isDocumentFragment)) { $this->isDocumentFragment = self::isDocumentFragmentHTML($nFewh); } goto Ch5Rl; PAqsK: if (phpQuery::$debug) { phpQuery::debug('Full markup load (HTML): ' . substr($nFewh, 0, 250)); } goto t7w71; Ch5Rl: $ZHFlV = null; goto s6JfG; s6JfG: $CO0A3 = $this->charsetFromHTML($nFewh); goto bgsVy; bgsVy: $EMOvw = false; goto zFMfA; t7w71: $this->loadMarkupReset(); goto tLXJX; PiC_9: } protected function loadMarkupXML($nFewh, $pDwSZ = null) { goto lKTU7; nEVji: if ($zoH7P || $so5Xh) { self::debug('Full markup load (XML), XHTML detected'); $this->isXHTML = true; } goto YrJ6z; LrbwC: if (!$CO0A3) { if ($this->isXHTML) { $CO0A3 = $this->charsetFromHTML($nFewh); if ($CO0A3) { goto uw8Z9; uw8Z9: phpQuery::debug("Full markup load (XML), appending XHTML charset '{$CO0A3}'"); goto BV8fO; WMqG1: $ZHFlV = $CO0A3; goto fxC1X; BV8fO: $this->charsetAppendToXML($nFewh, $CO0A3); goto WMqG1; fxC1X: } } if (!$CO0A3) { $ZHFlV = $pDwSZ; } } else { if ($pDwSZ) { $ZHFlV = $pDwSZ; } } goto znLn2; hcz0J: if ($this->isDocumentFragment) { phpQuery::debug("Full markup load (XML), DocumentFragment detected, using charset '{$ZHFlV}'"); $F8OxY = $this->documentFragmentLoadMarkup($this, $ZHFlV, $nFewh); } else { goto gnV2A; GPBFi: if (phpversion() < 5.1) { $this->document->resolveExternals = true; $F8OxY = phpQuery::$debug === 2 ? $this->document->loadXML($nFewh) : @$this->document->loadXML($nFewh); } else { $pd8wP = phpQuery::$debug === 2 ? LIBXML_DTDLOAD | LIBXML_DTDATTR | LIBXML_NONET : LIBXML_DTDLOAD | LIBXML_DTDATTR | LIBXML_NONET | LIBXML_NOWARNING | LIBXML_NOERROR; $F8OxY = $this->document->loadXML($nFewh, $pd8wP); } goto tYca7; tYca7: if ($F8OxY) { $this->root = $this->document; } goto ctVp0; gnV2A: if ($zoH7P && !$so5Xh) { if (!$CO0A3) { phpQuery::debug("Full markup load (XML), appending charset '{$ZHFlV}'"); $nFewh = $this->charsetAppendToXML($nFewh, $ZHFlV); } } goto pQOhP; pQOhP: $this->documentCreate($ZHFlV); goto GPBFi; ctVp0: } goto RdcGX; PwZM4: $this->loadMarkupReset(); goto jyft7; lKTU7: if (phpQuery::$debug) { phpQuery::debug('Full markup load (XML): ' . substr($nFewh, 0, 250)); } goto PwZM4; SZZnt: $F8OxY = false; goto hcz0J; frBcE: $so5Xh = $this->isXHTML($nFewh); goto nEVji; YrJ6z: if (!isset($this->isDocumentFragment)) { $this->isDocumentFragment = $this->isXHTML ? self::isDocumentFragmentXHTML($nFewh) : self::isDocumentFragmentXML($nFewh); } goto OW3rr; Huaze: if ($pDwSZ && $CO0A3 && $pDwSZ != $CO0A3) { } goto SZZnt; OW3rr: $ZHFlV = null; goto P_njL; RdcGX: if ($F8OxY) { if (!$this->contentType) { if ($this->isXHTML) { $this->contentType = 'application/xhtml+xml'; } else { $this->contentType = 'text/xml'; } } return $F8OxY; } else { throw new Exception('Error loading XML markup'); } goto CI6Ci; znLn2: if (!$ZHFlV) { $ZHFlV = phpQuery::$defaultCharset; } goto Huaze; jyft7: $this->isXML = true; goto a9v3_; a9v3_: $zoH7P = $this->isXHTML(); goto frBcE; P_njL: $CO0A3 = $this->charsetFromXML($nFewh); goto LrbwC; CI6Ci: } protected function isXHTML($nFewh = null) { if (!isset($nFewh)) { return strpos($this->contentType, 'xhtml') !== false; } return strpos($nFewh, '<!DOCTYPE html') !== false; } protected function isXML($nFewh) { return strpos(substr($nFewh, 0, 100), '<' . '?xml') !== false; } protected function contentTypeToArray($yjlXg) { goto yDyxc; gM8PG: if (isset($EaY24[1])) { $EaY24[1] = explode('=', $EaY24[1]); $EaY24[1] = isset($EaY24[1][1]) && trim($EaY24[1][1]) ? $EaY24[1][1] : $EaY24[1][0]; } else { $EaY24[1] = null; } goto ijy3N; ijy3N: return $EaY24; goto DmyCL; yDyxc: $EaY24 = explode(';', trim(strtolower($yjlXg))); goto gM8PG; DmyCL: } protected function contentTypeFromHTML($nFewh) { goto nj2ic; fCxii: preg_match('@content\\s*=\\s*(["|\'])(.+?)\\1@', $EaY24[0], $EaY24); goto b_PqD; b_PqD: if (!isset($EaY24[0])) { return array(null, null); } goto b2yti; sCDUK: preg_match('@<meta[^>]+http-equiv\\s*=\\s*(["|\'])Content-Type\\1([^>]+?)>@i', $nFewh, $EaY24); goto P3AvF; nj2ic: $EaY24 = array(); goto sCDUK; P3AvF: if (!isset($EaY24[0])) { return array(null, null); } goto fCxii; b2yti: return $this->contentTypeToArray($EaY24[2]); goto yvKT5; yvKT5: } protected function charsetFromHTML($nFewh) { $yjlXg = $this->contentTypeFromHTML($nFewh); return $yjlXg[1]; } protected function charsetFromXML($nFewh) { goto octDQ; octDQ: $EaY24; goto AfE9Q; AfE9Q: preg_match('@<' . '?xml[^>]+encoding\\s*=\\s*(["|\'])(.*?)\\1@i', $nFewh, $EaY24); goto PpFnG; PpFnG: return isset($EaY24[2]) ? strtolower($EaY24[2]) : null; goto y1gkn; y1gkn: } protected function charsetFixHTML($nFewh) { goto NSxle; CR1Il: $nFewh = substr($nFewh, 0, $Kx5d1 + 6) . $LExhm . substr($nFewh, $Kx5d1 + 6); goto GpLck; upjp1: $LExhm = $EaY24[0][0]; goto sPkpK; CF3p0: if (!isset($EaY24[0])) { return; } goto upjp1; GpLck: return $nFewh; goto T5V4I; NSxle: $EaY24 = array(); goto a0opd; wUNCr: $Kx5d1 = stripos($nFewh, '<head>'); goto CR1Il; sPkpK: $nFewh = substr($nFewh, 0, $EaY24[0][1]) . substr($nFewh, $EaY24[0][1] + strlen($LExhm)); goto wUNCr; a0opd: preg_match('@\\s*<meta[^>]+http-equiv\\s*=\\s*(["|\'])Content-Type\\1([^>]+?)>@i', $nFewh, $EaY24, PREG_OFFSET_CAPTURE); goto CF3p0; T5V4I: } protected function charsetAppendToHTML($ZpNyF, $ZHFlV, $ssH0H = false) { goto PWcTa; ldVmQ: if (strpos($ZpNyF, '<head') === false) { if (strpos($UduN4, '<html') === false) { return $iDGyz . $ZpNyF; } else { return preg_replace('@<html(.*?)(?(?<!\\?)>)@s', "<html\\1><head>{$iDGyz}</head>", $ZpNyF); } } else { return preg_replace('@<head(.*?)(?(?<!\\?)>)@s', '<head\\1>' . $iDGyz, $ZpNyF); } goto chJmv; PWcTa: $ZpNyF = preg_replace('@\\s*<meta[^>]+http-equiv\\s*=\\s*(["|\'])Content-Type\\1([^>]+?)>@i', '', $ZpNyF); goto LADeK; LADeK: $iDGyz = '<meta http-equiv="Content-Type" content="text/html;charset=' . $ZHFlV . '" ' . ($ssH0H ? '/' : '') . '>'; goto ldVmQ; chJmv: } protected function charsetAppendToXML($nFewh, $ZHFlV) { $zDNsK = '<' . '?xml version="1.0" encoding="' . $ZHFlV . '"?' . '>'; return $zDNsK . $nFewh; } public static function isDocumentFragmentHTML($nFewh) { return stripos($nFewh, '<html') === false && stripos($nFewh, '<!doctype') === false; } public static function isDocumentFragmentXML($nFewh) { return stripos($nFewh, '<' . '?xml') === false; } public static function isDocumentFragmentXHTML($nFewh) { return self::isDocumentFragmentHTML($nFewh); } public function importAttr($qTz8C) { } public function import($uhvj5, $fjrTH = null) { goto D7u3P; oLIKp: if ($uhvj5 instanceof DOMNODE && !$uhvj5 instanceof DOMNODELIST) { $uhvj5 = array($uhvj5); } goto MHMmF; D7u3P: $F8OxY = array(); goto oLIKp; ME9sL: return $F8OxY; goto qUq08; MHMmF: if (is_array($uhvj5) || $uhvj5 instanceof DOMNODELIST) { self::debug('Importing nodes to document'); foreach ($uhvj5 as $Z18mB) { $F8OxY[] = $this->document->importNode($Z18mB, true); } } else { $nIzTu = $this->documentFragmentCreate($uhvj5, $fjrTH); if ($nIzTu === false) { throw new Exception('Error loading documentFragment markup'); } else { return $this->import($nIzTu->root->childNodes); } } goto ME9sL; qUq08: } protected function documentFragmentCreate($uhvj5, $ZHFlV = null) { goto eTSWn; isUZa: if ($uhvj5 instanceof DOMNODE && !$uhvj5 instanceof DOMNODELIST) { $uhvj5 = array($uhvj5); } goto Nrsdr; pz0Iv: return $nIzTu; goto aHpgL; Nrsdr: if (is_array($uhvj5) || $uhvj5 instanceof DOMNODELIST) { goto mWg6B; iI4If: $IveoN = $nIzTu->import($uhvj5); goto iZnZN; iZnZN: foreach ($IveoN as $Z18mB) { $nIzTu->root->appendChild($Z18mB); } goto KC08C; mWg6B: if (!$this->documentFragmentLoadMarkup($nIzTu, $ZHFlV)) { return false; } goto iI4If; KC08C: } else { $this->documentFragmentLoadMarkup($nIzTu, $ZHFlV, $uhvj5); } goto pz0Iv; TAuXi: $nIzTu->root = $nIzTu->document; goto JrVqQ; siVpR: $nIzTu->isXHTML = $this->isXHTML; goto TAuXi; jOdwh: $nIzTu->isXML = $this->isXML; goto sO0P4; eTSWn: $nIzTu = new DOMDocumentWrapper(); goto Na5x5; JrVqQ: if (!$ZHFlV) { $ZHFlV = $this->charset; } goto isUZa; sO0P4: $nIzTu->isHTML = $this->isHTML; goto siVpR; Na5x5: $nIzTu->contentType = $this->contentType; goto jOdwh; aHpgL: } private function documentFragmentLoadMarkup($loLTn, $ZHFlV, $nFewh = null) { goto siucs; sXoW8: if (!$loLTn->root) { return false; } goto kIGgk; kIGgk: $loLTn->isDocumentFragment = true; goto cmOZv; siucs: $loLTn->isDocumentFragment = false; goto YVw0i; YVw0i: if ($loLTn->isXML) { if ($loLTn->isXHTML) { $loLTn->loadMarkupXML('<?xml version="1.0" encoding="' . $ZHFlV . '"?>' . '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ' . '"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">' . '<fake xmlns="http://www.w3.org/1999/xhtml">' . $nFewh . '</fake>'); $loLTn->root = $loLTn->document->firstChild->nextSibling; } else { $loLTn->loadMarkupXML('<?xml version="1.0" encoding="' . $ZHFlV . '"?><fake>' . $nFewh . '</fake>'); $loLTn->root = $loLTn->document->firstChild; } } else { goto qefrb; qefrb: $muQo2 = phpQuery::$defaultDoctype . '<html><head><meta http-equiv="Content-Type" content="text/html;charset=' . $ZHFlV . '"></head>'; goto vlkhs; RyhpY: if ($t7Q7r) { $muQo2 .= '<body>'; } goto ov__J; W5ddx: if ($t7Q7r) { $muQo2 .= '</body>'; } goto caPBg; sc8a1: $loLTn->loadMarkupHTML($muQo2); goto mjLEl; mjLEl: $loLTn->root = $t7Q7r ? $loLTn->document->firstChild->nextSibling->firstChild->nextSibling : $loLTn->document->firstChild->nextSibling->firstChild->nextSibling; goto VOwpK; ov__J: $muQo2 .= $nFewh; goto W5ddx; caPBg: $muQo2 .= '</html>'; goto sc8a1; vlkhs: $t7Q7r = strpos($nFewh, '<body') === false; goto RyhpY; VOwpK: } goto sXoW8; cmOZv: return true; goto yUfiN; yUfiN: } protected function documentFragmentToMarkup($loLTn) { goto EpKvB; d6CEu: if ($loLTn->isXML) { $nFewh = substr($nFewh, 0, strrpos($nFewh, '</fake>')); if ($loLTn->isXHTML) { $nFewh = substr($nFewh, strpos($nFewh, '<fake') + 43); } else { $nFewh = substr($nFewh, strpos($nFewh, '<fake>') + 6); } } else { $nFewh = substr($nFewh, strpos($nFewh, '<body>') + 6); $nFewh = substr($nFewh, 0, strrpos($nFewh, '</body>')); } goto JuPzX; lySW_: $hy4JB = $loLTn->isDocumentFragment; goto BhXnt; T7ITN: if (phpQuery::$debug) { phpQuery::debug('documentFragmentToMarkup: ' . substr($nFewh, 0, 150)); } goto MhhBO; EpKvB: phpQuery::debug('documentFragmentToMarkup'); goto lySW_; JuPzX: $loLTn->isDocumentFragment = $hy4JB; goto T7ITN; jK_LH: $nFewh = $loLTn->markup(); goto d6CEu; BhXnt: $loLTn->isDocumentFragment = false; goto jK_LH; MhhBO: return $nFewh; goto nKyjh; nKyjh: } public function markup($IveoN = null, $Y_Txt = false) { if (isset($IveoN) && count($IveoN) == 1 && $IveoN[0] instanceof DOMDOCUMENT) { $IveoN = null; } if (isset($IveoN)) { goto q24U5; IW7iK: self::debug('Markup: ' . substr($nFewh, 0, 250)); goto qChZj; qChZj: return $nFewh; goto ii3xv; FG4vg: if ($this->isXML && !$Y_Txt) { self::debug("Getting outerXML with charset '{$this->charset}'"); foreach ($IveoN as $Z18mB) { $nFewh .= $this->document->saveXML($Z18mB); } } else { goto mZ9S7; RWSqG: $nIzTu = $this->documentFragmentCreate($hK5j3); goto J7CmB; J7CmB: $nFewh = $this->documentFragmentToMarkup($nIzTu); goto Wy3HI; mZ9S7: $hK5j3 = array(); goto G3T63; G3T63: if ($Y_Txt) { foreach ($IveoN as $Z18mB) { if ($Z18mB->childNodes) { foreach ($Z18mB->childNodes as $u4Pc1) { $hK5j3[] = $u4Pc1; } } else { $hK5j3[] = $Z18mB; } } } else { $hK5j3 = $IveoN; } goto GIZmx; GIZmx: self::debug('Getting markup, moving selected nodes (' . count($hK5j3) . ') to new DocumentFragment'); goto RWSqG; Wy3HI: } goto R1rcU; R1rcU: if ($this->isXHTML) { self::debug('Fixing XHTML'); $nFewh = self::markupFixXHTML($nFewh); } goto IW7iK; G4KN_: if (!is_array($IveoN) && !$IveoN instanceof DOMNODELIST) { $IveoN = array($IveoN); } goto n2KN_; n2KN_: if ($this->isDocumentFragment && !$Y_Txt) { foreach ($IveoN as $k8Rwr => $Z18mB) { if ($Z18mB->isSameNode($this->root)) { $IveoN = array_slice($IveoN, 0, $k8Rwr) + phpQuery::DOMNodeListToArray($Z18mB->childNodes) + array_slice($IveoN, $k8Rwr + 1); } } } goto FG4vg; q24U5: $nFewh = ''; goto G4KN_; ii3xv: } else { if ($this->isDocumentFragment) { goto Ep3KX; EIsYz: $nFewh = $this->documentFragmentToMarkup($this); goto qtd17; qtd17: return $nFewh; goto fmDFd; Ep3KX: self::debug('Getting markup, DocumentFragment detected'); goto EIsYz; fmDFd: } else { goto HpkGE; FYCev: return $nFewh; goto lXH5S; W7dXW: if ($this->isXHTML) { self::debug('Fixing XHTML'); $nFewh = self::markupFixXHTML($nFewh); } goto bX0Z_; HpkGE: self::debug('Getting markup (' . ($this->isXML ? 'XML' : 'HTML') . "), final with charset '{$this->charset}'"); goto TkRIt; bX0Z_: self::debug('Markup: ' . substr($nFewh, 0, 250)); goto FYCev; TkRIt: $nFewh = $this->isXML ? $this->document->saveXML() : $this->document->saveHTML(); goto W7dXW; lXH5S: } } } protected static function markupFixXHTML($nFewh) { goto BKO4k; NJpP9: return $nFewh; goto AYGCg; BKO4k: $nFewh = self::expandEmptyTag('script', $nFewh); goto GYW_N; rI27D: $nFewh = self::expandEmptyTag('textarea', $nFewh); goto NJpP9; GYW_N: $nFewh = self::expandEmptyTag('select', $nFewh); goto rI27D; AYGCg: } public static function debug($me7IX) { phpQuery::debug($me7IX); } public static function expandEmptyTag($YH4uq, $zAWDU) { goto vQ_bp; oXaRL: return $zAWDU; goto FZaTn; vQ_bp: $iZ5GA = 0; goto QOAr8; QOAr8: while ($iZ5GA < strlen($zAWDU)) { $evg7e = strpos($zAWDU, "<{$YH4uq} ", $iZ5GA); if ($evg7e) { goto R94k9; EDDS_: if ($zAWDU[$u4gTz - 1] == '/') { $zAWDU = substr_replace($zAWDU, "></{$YH4uq}>", $u4gTz - 1, 2); } goto Pjhsc; Pjhsc: $iZ5GA = $u4gTz; goto fpKg6; R94k9: $u4gTz = strpos($zAWDU, '>', $evg7e); goto EDDS_; fpKg6: } else { break; } } goto oXaRL; FZaTn: } } goto dRhAO; Ls9Ap: class phpQueryPlugins { public function __call($UR3Zf, $wovD1) { if (isset(phpQuery::$extendStaticMethods[$UR3Zf])) { $F8OxY = call_user_func_array(phpQuery::$extendStaticMethods[$UR3Zf], $wovD1); } else { if (isset(phpQuery::$pluginsStaticMethods[$UR3Zf])) { goto Vq9sk; n1wjd: $Zzx2M = "phpQueryPlugin_{$xG9xx}"; goto afa1b; Vq9sk: $xG9xx = phpQuery::$pluginsStaticMethods[$UR3Zf]; goto n1wjd; d4AuG: return isset($F8OxY) ? $F8OxY : $this; goto AzO2u; afa1b: $F8OxY = call_user_func_array(array($Zzx2M, $UR3Zf), $wovD1); goto d4AuG; AzO2u: } else { throw new Exception("Method '{$UR3Zf}' doesnt exist"); } } } } goto W51mX; Aelbw: class CallbackParam { } goto xuVGS; SPfOe: define('DOMDOCUMENT', 'DOMDocument'); goto LJS9y; SgL80: if (!function_exists('mb_substr')) { function mb_substr($fvKJb, $x5GcS, $hXTXX = 0) { return substr($fvKJb, $x5GcS, $hXTXX); } } goto kmhXO; Ou40U: abstract class phpQuery { public static $mbstringSupport = true; public static $debug = false; public static $documents = array(); public static $defaultDocumentID = null; public static $defaultDoctype = '<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">'; public static $defaultCharset = 'UTF-8'; public static $plugins = array(); public static $pluginsLoaded = array(); public static $pluginsMethods = array(); public static $pluginsStaticMethods = array(); public static $extendMethods = array(); public static $extendStaticMethods = array(); public static $ajaxAllowedHosts = array('.'); public static $ajaxSettings = array('url' => '', 'global' => true, 'type' => 'GET', 'timeout' => null, 'contentType' => 'application/x-www-form-urlencoded', 'processData' => true, 'data' => null, 'username' => null, 'password' => null, 'accepts' => array('xml' => 'application/xml, text/xml', 'html' => 'text/html', 'script' => 'text/javascript, application/javascript', 'json' => 'application/json, text/javascript', 'text' => 'text/plain', '_default' => '*/*')); public static $lastModified = null; public static $active = 0; public static $dumpCount = 0; public static function pq($f0bpX, $rYP3a = null) { goto ruaIE; ruaIE: if ($f0bpX instanceof DOMNODE && !isset($rYP3a)) { foreach (phpQuery::$documents as $SPYEM) { $gCgXO = $f0bpX instanceof DOMDocument ? $f0bpX : $f0bpX->ownerDocument; if ($SPYEM->document->isSameNode($gCgXO)) { $rYP3a = $SPYEM->id; } } } goto sG3t5; sG3t5: if (!$rYP3a) { $WZhZ3 = self::$defaultDocumentID; if (!$WZhZ3) { throw new Exception('Can\'t use last created DOM, because there isn\'t any. Use phpQuery::newDocument() first.'); } } else { if (is_object($rYP3a) && $rYP3a instanceof phpQueryObject) { $WZhZ3 = $rYP3a->getDocumentID(); } else { if ($rYP3a instanceof DOMDOCUMENT) { $WZhZ3 = self::getDocumentID($rYP3a); if (!$WZhZ3) { $WZhZ3 = self::newDocument($rYP3a)->getDocumentID(); } } else { if ($rYP3a instanceof DOMNODE) { $WZhZ3 = self::getDocumentID($rYP3a); if (!$WZhZ3) { throw new Exception('Orphaned DOMNode'); } } else { $WZhZ3 = $rYP3a; } } } } goto vFmxQ; vFmxQ: if ($f0bpX instanceof phpQueryObject) { goto JPNir; JPNir: if ($f0bpX->getDocumentID() == $WZhZ3) { return $f0bpX; } goto EQEIy; rNeFq: $VwYR5->elements = array(); goto D3CqN; lhvB1: $VwYR5 = $xG9xx != 'phpQuery' ? new $xG9xx($f0bpX, $WZhZ3) : new phpQueryObject($WZhZ3); goto rNeFq; ZIwfY: return $VwYR5; goto W96CU; D3CqN: foreach ($f0bpX->elements as $Z18mB) { $VwYR5->elements[] = $VwYR5->document->importNode($Z18mB, true); } goto ZIwfY; EQEIy: $xG9xx = get_class($f0bpX); goto lhvB1; W96CU: } else { if ($f0bpX instanceof DOMNODE || is_array($f0bpX) && isset($f0bpX[0]) && $f0bpX[0] instanceof DOMNODE) { goto u8E35; F7yTV: foreach ($f0bpX as $Z18mB) { $K8w0g = $Z18mB->ownerDocument instanceof DOMDOCUMENT && !$Z18mB->ownerDocument->isSameNode($VwYR5->document); $VwYR5->elements[] = $K8w0g ? $VwYR5->document->importNode($Z18mB, true) : $Z18mB; } goto WLHyd; WLHyd: return $VwYR5; goto L7vuv; zj3n8: if (!$f0bpX instanceof DOMNODELIST && !is_array($f0bpX)) { $f0bpX = array($f0bpX); } goto QqQGw; u8E35: $VwYR5 = new phpQueryObject($WZhZ3); goto zj3n8; QqQGw: $VwYR5->elements = array(); goto F7yTV; L7vuv: } else { if (self::isMarkup($f0bpX)) { $VwYR5 = new phpQueryObject($WZhZ3); return $VwYR5->newInstance($VwYR5->documentWrapper->import($f0bpX)); } else { goto i63XL; i63XL: $VwYR5 = new phpQueryObject($WZhZ3); goto Zw_6T; Zw_6T: if ($rYP3a && $rYP3a instanceof phpQueryObject) { $VwYR5->elements = $rYP3a->elements; } else { if ($rYP3a && $rYP3a instanceof DOMNODELIST) { $VwYR5->elements = array(); foreach ($rYP3a as $Z18mB) { $VwYR5->elements[] = $Z18mB; } } else { if ($rYP3a && $rYP3a instanceof DOMNODE) { $VwYR5->elements = array($rYP3a); } } } goto DmtE0; DmtE0: return $VwYR5->find($f0bpX); goto ux_Se; ux_Se: } } } goto yZGVS; yZGVS: } public static function selectDocument($vWdBd) { goto LKsS2; RDeWS: self::$defaultDocumentID = self::getDocumentID($vWdBd); goto lminX; etBTG: self::debug("Selecting document '{$vWdBd}' as default one"); goto RDeWS; LKsS2: $vWdBd = self::getDocumentID($vWdBd); goto etBTG; lminX: } public static function getDocument($vWdBd = null) { if ($vWdBd) { phpQuery::selectDocument($vWdBd); } else { $vWdBd = phpQuery::$defaultDocumentID; } return new phpQueryObject($vWdBd); } public static function newDocument($nFewh = null, $yjlXg = null) { goto C1xgO; C1xgO: if (!$nFewh) { $nFewh = ''; } goto vkTxf; vkTxf: $kTY4F = phpQuery::createDocumentWrapper($nFewh, $yjlXg); goto d66rS; d66rS: return new phpQueryObject($kTY4F); goto YD1Cl; YD1Cl: } public static function newDocumentHTML($nFewh = null, $ZHFlV = null) { $yjlXg = $ZHFlV ? ";charset={$ZHFlV}" : ''; return self::newDocument($nFewh, "text/html{$yjlXg}"); } public static function newDocumentXML($nFewh = null, $ZHFlV = null) { $yjlXg = $ZHFlV ? ";charset={$ZHFlV}" : ''; return self::newDocument($nFewh, "text/xml{$yjlXg}"); } public static function newDocumentXHTML($nFewh = null, $ZHFlV = null) { $yjlXg = $ZHFlV ? ";charset={$ZHFlV}" : ''; return self::newDocument($nFewh, "application/xhtml+xml{$yjlXg}"); } public static function newDocumentPHP($nFewh = null, $yjlXg = 'text/html') { $nFewh = phpQuery::phpToMarkup($nFewh, self::$defaultCharset); return self::newDocument($nFewh, $yjlXg); } public static function phpToMarkup($FumLZ, $ZHFlV = 'utf-8') { goto ZY50f; bBOUQ: foreach ($fBP1T as $vAH09) { while (preg_match($vAH09, $FumLZ, $EaY24)) { $FumLZ = preg_replace_callback($vAH09, array('phpQuery', '_phpToMarkupCallback'), $FumLZ); } } goto DbZ_G; n2M1T: $FumLZ = preg_replace($vAH09, '\\1<php><!-- \\3 --></php>', $FumLZ); goto Jsrkw; Jsrkw: return $FumLZ; goto DTLRR; ZY50f: $fBP1T = array('@(<(?!\\?)(?:[^>]|\\?>)+\\w+\\s*=\\s*)(\')([^\']*)<' . '?php?(.*?)(?:\\?>)([^\']*)\'@s', '@(<(?!\\?)(?:[^>]|\\?>)+\\w+\\s*=\\s*)(")([^"]*)<' . '?php?(.*?)(?:\\?>)([^"]*)"@s'); goto bBOUQ; DbZ_G: $vAH09 = '@(^|>[^<]*)+?(<\\?php(.*?)(\\?>))@s'; goto n2M1T; DTLRR: } public static function _phpToMarkupCallback($FumLZ, $ZHFlV = 'utf-8') { return $E1j2M[1] . $E1j2M[2] . htmlspecialchars('<' . '?php' . $E1j2M[4] . '?' . '>', ENT_QUOTES | ENT_NOQUOTES, $ZHFlV) . $E1j2M[5] . $E1j2M[2]; } public static function _markupToPHPCallback($E1j2M) { return '<' . '?php ' . htmlspecialchars_decode($E1j2M[1]) . ' ?' . '>'; } public static function markupToPHP($n3GvS) { goto d0QUn; YEPk7: return $n3GvS; goto ryQfJ; xza_0: foreach ($fBP1T as $vAH09) { while (preg_match($vAH09, $n3GvS)) { $n3GvS = preg_replace_callback($vAH09, create_function('$m', 'return $m[1].$m[2].$m[3]."<?php "
							.str_replace(
								array("%20", "%3E", "%09", "&#10;", "&#9;", "%7B", "%24", "%7D", "%22", "%5B", "%5D"),
								array(" ", ">", "	", "\\n", "	", "{", "$", "}", \'"\', "[", "]"),
								htmlspecialchars_decode($m[4])
							)
							." ?>".$m[5].$m[2];'), $n3GvS); } } goto YEPk7; d0QUn: if ($n3GvS instanceof phpQueryObject) { $n3GvS = $n3GvS->markupOuter(); } goto bCmZz; bCmZz: $n3GvS = preg_replace_callback('@<php>\\s*<!--(.*?)-->\\s*</php>@s', array('phpQuery', '_markupToPHPCallback'), $n3GvS); goto geC7u; geC7u: $fBP1T = array('@(<(?!\\?)(?:[^>]|\\?>)+\\w+\\s*=\\s*)(\')([^\']*)(?:&lt;|%3C)\\?(?:php)?(.*?)(?:\\?(?:&gt;|%3E))([^\']*)\'@s', '@(<(?!\\?)(?:[^>]|\\?>)+\\w+\\s*=\\s*)(")([^"]*)(?:&lt;|%3C)\\?(?:php)?(.*?)(?:\\?(?:&gt;|%3E))([^"]*)"@s'); goto xza_0; ryQfJ: } public static function newDocumentFile($n8fWJ, $yjlXg = null) { $kTY4F = self::createDocumentWrapper(file_get_contents($n8fWJ), $yjlXg); return new phpQueryObject($kTY4F); } public static function newDocumentFileHTML($n8fWJ, $ZHFlV = null) { $yjlXg = $ZHFlV ? ";charset={$ZHFlV}" : ''; return self::newDocumentFile($n8fWJ, "text/html{$yjlXg}"); } public static function newDocumentFileXML($n8fWJ, $ZHFlV = null) { $yjlXg = $ZHFlV ? ";charset={$ZHFlV}" : ''; return self::newDocumentFile($n8fWJ, "text/xml{$yjlXg}"); } public static function newDocumentFileXHTML($n8fWJ, $ZHFlV = null) { $yjlXg = $ZHFlV ? ";charset={$ZHFlV}" : ''; return self::newDocumentFile($n8fWJ, "application/xhtml+xml{$yjlXg}"); } public static function newDocumentFilePHP($n8fWJ, $yjlXg = null) { return self::newDocumentPHP(file_get_contents($n8fWJ), $yjlXg); } public static function loadDocument($zm8Ri) { die('TODO loadDocument'); } protected static function createDocumentWrapper($ZpNyF, $yjlXg = null, $kTY4F = null) { goto MfO0h; TIusE: phpQuery::$documents[$AnuOn->id] = $AnuOn; goto gXteM; AeX5s: if ($ZpNyF instanceof DOMDOCUMENT) { if (self::getDocumentID($ZpNyF)) { $zm8Ri = clone $ZpNyF; } else { $AnuOn = new DOMDocumentWrapper($ZpNyF, $yjlXg, $kTY4F); } } else { $AnuOn = new DOMDocumentWrapper($ZpNyF, $yjlXg, $kTY4F); } goto TIusE; MfO0h: if (function_exists('domxml_open_mem')) { throw new Exception('Old PHP4 DOM XML extension detected. phpQuery won\'t work until this extension is enabled.'); } goto QXS8K; gXteM: phpQuery::selectDocument($AnuOn->id); goto gH64P; QXS8K: $zm8Ri = null; goto AeX5s; gH64P: return $AnuOn->id; goto sclfX; sclfX: } public static function extend($j9JOt, $uhvj5) { goto udIcX; nPCyf: foreach ($uhvj5 as $UR3Zf => $oZLCv) { goto jyARN; jyARN: if (isset($lwvxB[$UR3Zf])) { self::debug("Duplicate method '{$UR3Zf}', can\\'t extend '{$j9JOt}'"); continue; } goto VMb79; WXlSI: $lwvxB[$UR3Zf] = $oZLCv; goto NZRdR; VMb79: if (isset($qyag7[$UR3Zf])) { self::debug("Duplicate method '{$UR3Zf}' from plugin '{$qyag7[$UR3Zf]}'," . " can\\'t extend '{$j9JOt}'"); continue; } goto WXlSI; NZRdR: } goto Ey5C0; VFUr2: if (is_string($uhvj5)) { $uhvj5 = array($uhvj5 => $uhvj5); } goto nPCyf; Ey5C0: return true; goto Jzy9M; udIcX: switch ($j9JOt) { case 'phpQueryObject': goto PfjqY; eyDMI: break; goto MD9GY; tssIC: $qyag7 =& self::$pluginsMethods; goto eyDMI; PfjqY: $lwvxB =& self::$extendMethods; goto tssIC; MD9GY: case 'phpQuery': goto fsCaC; fsCaC: $lwvxB =& self::$extendStaticMethods; goto GLG2i; qp2Ef: break; goto RpcnI; GLG2i: $qyag7 =& self::$pluginsStaticMethods; goto qp2Ef; RpcnI: default: throw new Exception('Unsupported $target type'); } goto VFUr2; Jzy9M: } public static function plugin($xG9xx, $n8fWJ = null) { goto nR7l5; rf78h: if (class_exists('phpQueryPlugin_' . $xG9xx)) { goto VOY6T; klxEa: if (method_exists($Zzx2M, '__initialize')) { call_user_func_array(array($Zzx2M, '__initialize'), array()); } goto AKuB5; If1hs: $jSFla = get_class_vars($Zzx2M); goto dxKls; YXSSx: foreach ($hK5j3 as $UR3Zf) { goto j_ji6; J00gT: self::$pluginsStaticMethods[$UR3Zf] = $xG9xx; goto lus06; EQwR1: if (isset(self::$pluginsStaticMethods[$UR3Zf])) { throw new Exception("Duplicate method '{$UR3Zf}' from plugin '{$BOQ7Q}' conflicts with same method from plugin '" . self::$pluginsStaticMethods[$UR3Zf] . '\''); return; } goto J00gT; F9wpT: if (!is_callable(array($Zzx2M, $UR3Zf))) { continue; } goto EQwR1; j_ji6: if ($UR3Zf == '__initialize') { continue; } goto F9wpT; lus06: } goto klxEa; VOY6T: $Zzx2M = 'phpQueryPlugin_' . $xG9xx; goto If1hs; dxKls: $hK5j3 = isset($jSFla['phpQueryMethods']) && !is_null($jSFla['phpQueryMethods']) ? $jSFla['phpQueryMethods'] : get_class_methods($Zzx2M); goto YXSSx; AKuB5: } goto oaXTa; GmbcL: if (!$z1tq_ && !$Bcca9) { require_once $n8fWJ; } goto YMeL6; knENh: return true; goto O8WIW; nYuej: $z1tq_ = class_exists('phpQueryObjectPlugin_' . $xG9xx); goto QtonI; nR7l5: if (in_array($xG9xx, self::$pluginsLoaded)) { return true; } goto Y10pu; oaXTa: if (class_exists('phpQueryObjectPlugin_' . $xG9xx)) { goto lF5Jc; duFR2: $jSFla = get_class_vars($Zzx2M); goto K0Yyc; OdX3S: foreach ($hK5j3 as $UR3Zf) { goto lF2CO; z13OJ: self::$pluginsMethods[$UR3Zf] = $xG9xx; goto S4qDm; lF2CO: if (!is_callable(array($Zzx2M, $UR3Zf))) { continue; } goto t1vmf; t1vmf: if (isset(self::$pluginsMethods[$UR3Zf])) { throw new Exception("Duplicate method '{$UR3Zf}' from plugin '{$BOQ7Q}' conflicts with same method from plugin '" . self::$pluginsMethods[$UR3Zf] . '\''); continue; } goto z13OJ; S4qDm: } goto o8XA4; lF5Jc: $Zzx2M = 'phpQueryObjectPlugin_' . $xG9xx; goto duFR2; K0Yyc: $hK5j3 = isset($jSFla['phpQueryMethods']) && !is_null($jSFla['phpQueryMethods']) ? $jSFla['phpQueryMethods'] : get_class_methods($Zzx2M); goto OdX3S; o8XA4: } goto knENh; YMeL6: self::$pluginsLoaded[] = $xG9xx; goto rf78h; Y10pu: if (!$n8fWJ) { $n8fWJ = $xG9xx . '.php'; } goto nYuej; QtonI: $Bcca9 = class_exists('phpQueryPlugin_' . $xG9xx); goto GmbcL; O8WIW: } public static function unloadDocuments($vWdBd = null) { if (isset($vWdBd)) { if ($vWdBd = self::getDocumentID($vWdBd)) { unset(phpQuery::$documents[$vWdBd]); } } else { foreach (phpQuery::$documents as $U8G_W => $gghxW) { unset(phpQuery::$documents[$U8G_W]); } } } public static function unsafePHPTags($n3GvS) { return self::markupToPHP($n3GvS); } public static function DOMNodeListToArray($pmU3W) { goto rokxF; rokxF: $i0Glk = array(); goto jxVZJ; jxVZJ: if (!$pmU3W) { return $i0Glk; } goto DxG34; qJoYU: return $i0Glk; goto JNVvR; DxG34: foreach ($pmU3W as $Z18mB) { $i0Glk[] = $Z18mB; } goto qJoYU; JNVvR: } public static function isMarkup($ErQts) { return !is_array($ErQts) && substr(trim($ErQts), 0, 1) == '<'; } public static function debug($me7IX) { if (self::$debug) { print var_dump($me7IX); } } public static function ajax($r4yVi = array(), $vg3o4 = null) { goto gTiO8; yAcJG: return $StcZM; goto fH1Xv; gXTSA: if (isset($r4yVi['referer']) && $r4yVi['referer']) { $StcZM->setHeaders('Referer', $r4yVi['referer']); } goto QvHkU; miebL: if (!in_array($Ijj5T, self::$ajaxAllowedHosts)) { throw new Exception("Request not permitted, host '{$Ijj5T}' not present in " . 'phpQuery::$ajaxAllowedHosts'); } goto rrTRN; iBoZm: foreach (self::$ajaxAllowedHosts as $U8G_W => $Ijj5T) { if ($Ijj5T == '.' && isset($_SERVER['HTTP_HOST'])) { self::$ajaxAllowedHosts[$U8G_W] = $_SERVER['HTTP_HOST']; } } goto GdLbI; Ofphn: if (isset($r4yVi['complete']) && $r4yVi['complete']) { phpQuery::callbackRun($r4yVi['complete'], array($StcZM, $ZEKiN->getStatus())); } goto EocWb; rrTRN: $nl_7M = '/=\\?(&|$)/'; goto nPYwg; pZAKr: $ZEKiN = $StcZM->request(); goto OoSpr; Cz_as: $StcZM->setUri($r4yVi['url']); goto y8OtR; znbQ3: if ($ZEKiN->isSuccessful()) { goto Hz4dh; zRCZx: if ($r4yVi['global']) { phpQueryEvents::trigger($kTY4F, 'ajaxSuccess', array($StcZM, $r4yVi)); } goto Y5wXu; CrrvG: $XWlC_ = self::httpData($ZEKiN->getBody(), $r4yVi['dataType'], $r4yVi); goto QbgkL; Hz4dh: self::$lastModified = $ZEKiN->getHeader('Last-Modified'); goto CrrvG; QbgkL: if (isset($r4yVi['success']) && $r4yVi['success']) { phpQuery::callbackRun($r4yVi['success'], array($XWlC_, $ZEKiN->getStatus(), $r4yVi)); } goto zRCZx; Y5wXu: } else { if (isset($r4yVi['error']) && $r4yVi['error']) { phpQuery::callbackRun($r4yVi['error'], array($StcZM, $ZEKiN->getStatus(), $ZEKiN->getMessage())); } if ($r4yVi['global']) { phpQueryEvents::trigger($kTY4F, 'ajaxError', array($StcZM, $ZEKiN->getMessage(), $r4yVi)); } } goto Ofphn; y8OtR: $StcZM->setMethod(strtoupper($r4yVi['type'])); goto gXTSA; YKcGv: if (phpQuery::$debug) { self::debug("{$r4yVi['type']}: {$r4yVi['url']}\n"); self::debug('Options: <pre>' . var_export($r4yVi, true) . '</pre>
'); } goto pZAKr; Hb5QF: if (strtolower($r4yVi['type']) == 'get') { $StcZM->setParameterGet($r4yVi['data']); } else { if (strtolower($r4yVi['type']) == 'post') { $StcZM->setEncType($r4yVi['contentType']); $StcZM->setParameterPost($r4yVi['data']); } } goto KKJy7; OY63z: if (isset($r4yVi['ifModified']) && $r4yVi['ifModified']) { $StcZM->setHeaders('If-Modified-Since', self::$lastModified ? self::$lastModified : 'Thu, 01 Jan 1970 00:00:00 GMT'); } goto A5yw8; RHK_5: if ($r4yVi['global']) { phpQueryEvents::trigger($kTY4F, 'ajaxSend', array($StcZM, $r4yVi)); } goto YKcGv; EocWb: if ($r4yVi['global']) { phpQueryEvents::trigger($kTY4F, 'ajaxComplete', array($StcZM, $r4yVi)); } goto CrZDj; JHpyt: self::$active++; goto TlE1X; CrZDj: if ($r4yVi['global'] && !--self::$active) { phpQueryEvents::trigger($kTY4F, 'ajaxStop'); } goto yAcJG; gTiO8: $r4yVi = array_merge(self::$ajaxSettings, $r4yVi); goto EHSYA; QvHkU: $StcZM->setHeaders(array('User-Agent' => 'Mozilla/5.0 (X11; U; Linux x86; en-US; rv:1.9.0.5) Gecko' . '/2008122010 Firefox/3.0.5', 'Accept-Charset' => 'ISO-8859-1,utf-8;q=0.7,*;q=0.7', 'Accept-Language' => 'en-us,en;q=0.5')); goto NQhVI; FJ7Ck: if (isset($r4yVi['dataType']) && $r4yVi['dataType'] == 'json') { goto LvGWM; KoK5e: $l4HOl = $LLL3e = false; goto eM0gE; xR8Su: if (preg_match($nl_7M, $r4yVi['url'])) { $LLL3e = true; } goto CDfWy; LvGWM: $tyE9f = 'json_' . md5(microtime()); goto KoK5e; CDfWy: if ($l4HOl !== false || $LLL3e) { goto FqKMn; Y2AS9: if ($l4HOl !== false) { $r4yVi['data'][$l4HOl] = $tyE9f; } goto qu0Ne; FqKMn: $r4yVi['_jsonp'] = $tyE9f; goto Y2AS9; qu0Ne: if ($LLL3e) { $r4yVi['url'] = preg_replace($nl_7M, "={$tyE9f}\\1", $r4yVi['url']); } goto N9eId; N9eId: } goto p15_e; eM0gE: if ($r4yVi['data']) { foreach ($r4yVi['data'] as $JJpPS => $gghxW) { if ($gghxW == '?') { $l4HOl = $JJpPS; } } } goto xR8Su; p15_e: } goto Cz_as; OoSpr: if (phpQuery::$debug) { goto hq2Hx; hq2Hx: self::debug('Status: ' . $ZEKiN->getStatus() . ' / ' . $ZEKiN->getMessage()); goto WgW70; XQRlJ: self::debug($ZEKiN->getHeaders()); goto y6lqp; WgW70: self::debug($StcZM->getLastRequest()); goto XQRlJ; y6lqp: } goto znbQ3; A5yw8: $StcZM->setHeaders('Accept', isset($r4yVi['dataType']) && isset(self::$ajaxSettings['accepts'][$r4yVi['dataType']]) ? self::$ajaxSettings['accepts'][$r4yVi['dataType']] . ', */*' : self::$ajaxSettings['accepts']['_default']); goto NrO2l; NrO2l: if ($r4yVi['data'] instanceof phpQueryObject) { goto XGiar; XGiar: $xT72m = $r4yVi['data']->serializeArray($r4yVi['data']); goto yvB3m; rsWBZ: foreach ($xT72m as $Gvkn_) { $r4yVi['data'][$Gvkn_['name']] = $Gvkn_['value']; } goto mtn6N; yvB3m: $r4yVi['data'] = array(); goto rsWBZ; mtn6N: } goto Hb5QF; nPYwg: if (isset($r4yVi['dataType']) && $r4yVi['dataType'] == 'jsonp') { goto hVKD_; jb5gK: $r4yVi['dataType'] = 'json'; goto HKkG5; VkMgs: if (strtolower($r4yVi['type']) == 'get') { if (!preg_match($nl_7M, $r4yVi['url'])) { $S3Pw1 = strpos($r4yVi['url'], '?') ? '&' : '?'; $r4yVi['url'] .= "{$S3Pw1}{$Fq42M}=?"; } } else { if ($r4yVi['data']) { goto UoCJS; UoCJS: $B9cEA = false; goto WCAG2; MzRKl: if (!$B9cEA) { $r4yVi['data'][$Fq42M] = '?'; } goto CSUqi; WCAG2: foreach ($r4yVi['data'] as $JJpPS => $gghxW) { if ($gghxW == '?') { $B9cEA = true; } } goto MzRKl; CSUqi: } } goto jb5gK; hVKD_: $Fq42M = $r4yVi['jsonp'] ? $r4yVi['jsonp'] : 'callback'; goto VkMgs; HKkG5: } goto FJ7Ck; KKJy7: if (self::$active == 0 && $r4yVi['global']) { phpQueryEvents::trigger($kTY4F, 'ajaxStart'); } goto JHpyt; EHSYA: $kTY4F = isset($r4yVi['document']) ? self::getDocumentID($r4yVi['document']) : null; goto tBUGM; GdLbI: $Ijj5T = parse_url($r4yVi['url'], PHP_URL_HOST); goto miebL; TlE1X: if (isset($r4yVi['beforeSend']) && $r4yVi['beforeSend']) { phpQuery::callbackRun($r4yVi['beforeSend'], array($StcZM)); } goto RHK_5; tBUGM: if ($vg3o4) { goto XdzdY; XdzdY: $StcZM = $vg3o4; goto gQcMS; NWO1C: $StcZM->setHeaders('If-Modified-Since', null); goto MJ7kc; S40Ue: $StcZM->resetParameters(); goto ZscF1; MJ7kc: $StcZM->setHeaders('Referer', null); goto S40Ue; gQcMS: $StcZM->setAuth(false); goto NWO1C; ZscF1: } else { goto oZXGM; f5moU: $StcZM = new Zend_Http_Client(); goto xC72t; oZXGM: require_once 'Zend/Http/Client.php'; goto f5moU; xC72t: $StcZM->setCookieJar(); goto Y8PYf; Y8PYf: } goto qESr8; NQhVI: if ($r4yVi['username']) { $StcZM->setAuth($r4yVi['username'], $r4yVi['password']); } goto OY63z; qESr8: if (isset($r4yVi['timeout'])) { $StcZM->setConfig(array('timeout' => $r4yVi['timeout'])); } goto iBoZm; fH1Xv: } protected static function httpData($XWlC_, $mhShF, $r4yVi) { goto GdkLG; EhnFv: return $XWlC_; goto KdcSh; T04VM: if (is_string($XWlC_)) { if ($mhShF == 'json') { if (isset($r4yVi['_jsonp']) && $r4yVi['_jsonp']) { $XWlC_ = preg_replace('/^\\s*\\w+\\((.*)\\)\\s*$/s', '$1', $XWlC_); } $XWlC_ = self::parseJSON($XWlC_); } } goto EhnFv; GdkLG: if (isset($r4yVi['dataFilter']) && $r4yVi['dataFilter']) { $XWlC_ = self::callbackRun($r4yVi['dataFilter'], array($XWlC_, $mhShF)); } goto T04VM; KdcSh: } public static function param($XWlC_) { return http_build_query($XWlC_, null, '&'); } public static function get($VwfRl, $XWlC_ = null, $oZLCv = null, $mhShF = null) { if (!is_array($XWlC_)) { $oZLCv = $XWlC_; $XWlC_ = null; } return phpQuery::ajax(array('type' => 'GET', 'url' => $VwfRl, 'data' => $XWlC_, 'success' => $oZLCv, 'dataType' => $mhShF)); } public static function post($VwfRl, $XWlC_ = null, $oZLCv = null, $mhShF = null) { if (!is_array($XWlC_)) { $oZLCv = $XWlC_; $XWlC_ = null; } return phpQuery::ajax(array('type' => 'POST', 'url' => $VwfRl, 'data' => $XWlC_, 'success' => $oZLCv, 'dataType' => $mhShF)); } public static function getJSON($VwfRl, $XWlC_ = null, $oZLCv = null) { if (!is_array($XWlC_)) { $oZLCv = $XWlC_; $XWlC_ = null; } return phpQuery::ajax(array('type' => 'GET', 'url' => $VwfRl, 'data' => $XWlC_, 'success' => $oZLCv, 'dataType' => 'json')); } public static function ajaxSetup($r4yVi) { self::$ajaxSettings = array_merge(self::$ajaxSettings, $r4yVi); } public static function ajaxAllowHost($VPNtX, $zIKLr = null, $GDjZ2 = null) { $hK5j3 = is_array($VPNtX) ? $VPNtX : func_get_args(); foreach ($hK5j3 as $Ijj5T) { if ($Ijj5T && !in_array($Ijj5T, phpQuery::$ajaxAllowedHosts)) { phpQuery::$ajaxAllowedHosts[] = $Ijj5T; } } } public static function ajaxAllowURL($SSBaF, $i8gQh = null, $fZNmD = null) { $hK5j3 = is_array($SSBaF) ? $SSBaF : func_get_args(); foreach ($hK5j3 as $VwfRl) { phpQuery::ajaxAllowHost(parse_url($VwfRl, PHP_URL_HOST)); } } public static function toJSON($XWlC_) { goto ZwsZw; YyT5L: return Zend_Json_Encoder::encode($XWlC_); goto j2ZLC; ZwsZw: if (function_exists('json_encode')) { return json_encode($XWlC_); } goto y0u4k; y0u4k: require_once 'Zend/Json/Encoder.php'; goto YyT5L; j2ZLC: } public static function parseJSON($jGMz8) { goto rxvXK; kqzE1: require_once 'Zend/Json/Decoder.php'; goto EKv8I; EKv8I: return Zend_Json_Decoder::decode($jGMz8); goto LXT_t; rxvXK: if (function_exists('json_decode')) { $F8OxY = json_decode(trim($jGMz8), true); if (isset($F8OxY)) { return $F8OxY; } } goto kqzE1; LXT_t: } public static function getDocumentID($uhvj5) { if ($uhvj5 instanceof DOMDOCUMENT) { foreach (phpQuery::$documents as $vWdBd => $zm8Ri) { if ($uhvj5->isSameNode($zm8Ri->document)) { return $vWdBd; } } } else { if ($uhvj5 instanceof DOMNODE) { foreach (phpQuery::$documents as $vWdBd => $zm8Ri) { if ($uhvj5->ownerDocument->isSameNode($zm8Ri->document)) { return $vWdBd; } } } else { if ($uhvj5 instanceof phpQueryObject) { return $uhvj5->getDocumentID(); } else { if (is_string($uhvj5) && isset(phpQuery::$documents[$uhvj5])) { return $uhvj5; } } } } } public static function getDOMDocument($uhvj5) { goto Y312m; wSjiK: $uhvj5 = self::getDocumentID($uhvj5); goto LKK59; Y312m: if ($uhvj5 instanceof DOMDOCUMENT) { return $uhvj5; } goto wSjiK; LKK59: return $uhvj5 ? self::$documents[$vWdBd]['document'] : null; goto kZExU; kZExU: } public static function makeArray($bQ7sl) { goto z7uQA; z7uQA: $i0Glk = array(); goto JHiun; fKmcJ: return $i0Glk; goto Olytq; JHiun: if (is_object($ywsWL) && $ywsWL instanceof DOMNODELIST) { foreach ($ywsWL as $qTz8C) { $i0Glk[] = $qTz8C; } } else { if (is_object($ywsWL) && !$ywsWL instanceof Iterator) { foreach (get_object_vars($ywsWL) as $rfBQu => $qTz8C) { $i0Glk[0][$rfBQu] = $qTz8C; } } else { foreach ($ywsWL as $rfBQu => $qTz8C) { $i0Glk[0][$rfBQu] = $qTz8C; } } } goto fKmcJ; Olytq: } public static function inArray($qTz8C, $i0Glk) { return in_array($qTz8C, $i0Glk); } public static function each($ywsWL, $oZLCv, $GZ0ou = null, $KqVai = null, $uQl4E = null) { goto YavUc; m9MQ2: if (is_object($ywsWL) && !$ywsWL instanceof Iterator) { foreach (get_object_vars($ywsWL) as $rfBQu => $qTz8C) { phpQuery::callbackRun($oZLCv, array($rfBQu, $qTz8C), $iW9y9); } } else { foreach ($ywsWL as $rfBQu => $qTz8C) { phpQuery::callbackRun($oZLCv, array($rfBQu, $qTz8C), $iW9y9); } } goto EO1mu; YavUc: $iW9y9 = null; goto KOblj; KOblj: if (func_num_args() > 2) { $iW9y9 = func_get_args(); $iW9y9 = array_slice($iW9y9, 2); } goto m9MQ2; EO1mu: } public static function map($i0Glk, $oZLCv, $GZ0ou = null, $KqVai = null, $uQl4E = null) { goto mW1YH; mW1YH: $FEjaa = array(); goto uy29b; dDBan: foreach ($i0Glk as $gghxW) { $rPCA8 = phpQuery::callbackRun($oZLCv, array($gghxW), $iW9y9); if (is_array($rPCA8)) { foreach ($rPCA8 as $zL0Ah) { $FEjaa[] = $zL0Ah; } } else { if ($rPCA8 !== null) { $FEjaa[] = $rPCA8; } } } goto PPZhS; uy29b: $iW9y9 = null; goto AWk2Q; PPZhS: return $FEjaa; goto leJ_6; AWk2Q: if (func_num_args() > 2) { $iW9y9 = func_get_args(); $iW9y9 = array_slice($iW9y9, 2); } goto dDBan; leJ_6: } public static function callbackRun($oZLCv, $dAwYz = array(), $iW9y9 = null) { goto Gtnal; hCBTd: if (!$iW9y9) { return call_user_func_array($oZLCv, $dAwYz); } goto aIcPO; Gtnal: if (!$oZLCv) { return; } goto poX_U; LVuMM: if ($oZLCv instanceof Callback) { $iW9y9 = $oZLCv->params; $oZLCv = $oZLCv->callback; } goto hCBTd; sPH5O: return call_user_func_array($oZLCv, $iW9y9); goto yn9Z9; poX_U: if ($oZLCv instanceof CallbackParameterToReference) { if (isset($dAwYz[0])) { $oZLCv->callback = $dAwYz[0]; } return true; } goto LVuMM; aIcPO: $njUmW = 0; goto rkkQj; rkkQj: foreach ($iW9y9 as $k8Rwr => $gghxW) { $iW9y9[$k8Rwr] = $gghxW instanceof CallbackParam ? $dAwYz[$njUmW++] : $gghxW; } goto sPH5O; yn9Z9: } public static function merge($Fay2L, $Uf_Qu) { goto AXT0R; QcgzX: foreach ($Uf_Qu->elements as $Z18mB) { goto RUiCh; W1z2p: if (!$VR35a) { $VuI6f[] = $Z18mB; } goto BMvs0; SVRY1: foreach ($VuI6f as $eErtG) { if ($eErtG->isSameNode($Z18mB)) { $VR35a = true; } } goto W1z2p; RUiCh: $VR35a = false; goto SVRY1; BMvs0: } goto N6nSd; N6nSd: return $VuI6f; goto AhceD; AXT0R: $VuI6f = $Fay2L->elements; goto QcgzX; AhceD: } public static function grep($i0Glk, $oZLCv, $XlL6R = false) { goto XROSI; g6QLx: foreach ($i0Glk as $U8G_W => $gghxW) { $Gvkn_ = call_user_func_array($oZLCv, array($gghxW, $U8G_W)); if ($Gvkn_ === !(bool) $XlL6R) { $FEjaa[] = $gghxW; } } goto NCHae; NCHae: return $FEjaa; goto xF_EJ; XROSI: $FEjaa = array(); goto g6QLx; xF_EJ: } public static function unique($i0Glk) { return array_unique($i0Glk); } public static function isFunction($Dd_Vg) { return is_callable($Dd_Vg); } public static function trim($fvKJb) { return trim($fvKJb); } public static function browserGet($VwfRl, $oZLCv, $GZ0ou = null, $KqVai = null, $uQl4E = null) { if (self::plugin('WebBrowser')) { $dAwYz = func_get_args(); return self::callbackRun(array(self::$plugins, 'browserGet'), $dAwYz); } else { self::debug('WebBrowser plugin not available...'); } } public static function browserPost($VwfRl, $XWlC_, $oZLCv, $GZ0ou = null, $KqVai = null, $uQl4E = null) { if (self::plugin('WebBrowser')) { $dAwYz = func_get_args(); return self::callbackRun(array(self::$plugins, 'browserPost'), $dAwYz); } else { self::debug('WebBrowser plugin not available...'); } } public static function browser($ffpFw, $oZLCv, $GZ0ou = null, $KqVai = null, $uQl4E = null) { if (self::plugin('WebBrowser')) { $dAwYz = func_get_args(); return self::callbackRun(array(self::$plugins, 'browser'), $dAwYz); } else { self::debug('WebBrowser plugin not available...'); } } public static function php($fKl3n) { return self::code('php', $fKl3n); } public static function code($mhShF, $fKl3n) { return "<{$mhShF}><!-- " . trim($fKl3n) . " --></{$mhShF}>"; } public static function __callStatic($UR3Zf, $dAwYz) { return call_user_func_array(array(phpQuery::$plugins, $UR3Zf), $dAwYz); } protected static function dataSetupNode($Z18mB, $kTY4F) { goto NZqn0; NZqn0: foreach (phpQuery::$documents[$kTY4F]->dataNodes as $Lwf_g) { if ($Z18mB->isSameNode($Lwf_g)) { return $Lwf_g; } } goto ywJUs; n16je: return $Z18mB; goto XgYJ5; ywJUs: phpQuery::$documents[$kTY4F]->dataNodes[] = $Z18mB; goto n16je; XgYJ5: } protected static function dataRemoveNode($Z18mB, $kTY4F) { foreach (phpQuery::$documents[$kTY4F]->dataNodes as $U8G_W => $Lwf_g) { if ($Z18mB->isSameNode($Lwf_g)) { unset(self::$documents[$kTY4F]->dataNodes[$U8G_W]); unset(self::$documents[$kTY4F]->data[$Lwf_g->dataID]); } } } public static function data($Z18mB, $rfBQu, $XWlC_, $kTY4F = null) { goto NuA9_; hYzE8: $vWdBd = $Z18mB->dataID; goto ezy8n; fzxYm: if (!isset($Z18mB->dataID)) { $Z18mB->dataID = ++phpQuery::$documents[$kTY4F]->uuid; } goto hYzE8; NuA9_: if (!$kTY4F) { $kTY4F = self::getDocumentID($Z18mB); } goto p_LG1; p_LG1: $zm8Ri = phpQuery::$documents[$kTY4F]; goto qVbl8; ezy8n: if (!isset($zm8Ri->data[$vWdBd])) { $zm8Ri->data[$vWdBd] = array(); } goto azZSa; qVbl8: $Z18mB = self::dataSetupNode($Z18mB, $kTY4F); goto fzxYm; GUrNg: if ($rfBQu) { if (isset($zm8Ri->data[$vWdBd][$rfBQu])) { return $zm8Ri->data[$vWdBd][$rfBQu]; } } else { return $vWdBd; } goto tJU8S; azZSa: if (!is_null($XWlC_)) { $zm8Ri->data[$vWdBd][$rfBQu] = $XWlC_; } goto GUrNg; tJU8S: } public static function removeData($Z18mB, $rfBQu, $kTY4F) { goto kADg1; ekLBP: $zm8Ri = phpQuery::$documents[$kTY4F]; goto fUTWU; fUTWU: $Z18mB = self::dataSetupNode($Z18mB, $kTY4F); goto rk0tJ; M2MdK: if ($rfBQu) { goto fWk9H; fWk9H: if (isset($zm8Ri->data[$vWdBd][$rfBQu])) { unset($zm8Ri->data[$vWdBd][$rfBQu]); } goto QHz1k; qsJe0: foreach ($zm8Ri->data[$vWdBd] as $rfBQu) { break; } goto G_xo_; G_xo_: if (!$rfBQu) { self::removeData($Z18mB, $rfBQu, $kTY4F); } goto Ub54g; QHz1k: $rfBQu = null; goto qsJe0; Ub54g: } else { self::dataRemoveNode($Z18mB, $kTY4F); } goto wULfV; kADg1: if (!$kTY4F) { $kTY4F = self::getDocumentID($Z18mB); } goto ekLBP; rk0tJ: $vWdBd = $Z18mB->dataID; goto M2MdK; wULfV: } } goto Ls9Ap; xuVGS: class phpQueryObject implements Iterator, Countable, ArrayAccess { public $documentID = null; public $document = null; public $charset = null; public $documentWrapper = null; public $xpath = null; public $elements = array(); protected $elementsBackup = array(); protected $previous = null; protected $root = array(); public $documentFragment = true; protected $elementsInterator = array(); protected $valid = false; protected $current = null; public function __construct($kTY4F) { goto saH2h; bqNCF: $this->document =& $this->documentWrapper->document; goto a3M10; CYoCi: $this->charset =& $this->documentWrapper->charset; goto jEZs5; k5Nhu: if (!isset(phpQuery::$documents[$vWdBd])) { throw new Exception("Document with ID '{$vWdBd}' isn't loaded. Use phpQuery::newDocument(\$html) or phpQuery::newDocumentFile(\$file) first."); } goto s6pDL; N0LXx: $this->root =& $this->documentWrapper->root; goto ZM092; a3M10: $this->xpath =& $this->documentWrapper->xpath; goto CYoCi; ZM092: $this->elements = array($this->root); goto PqVw0; s6pDL: $this->documentID = $vWdBd; goto niTcT; saH2h: $vWdBd = $kTY4F instanceof self ? $kTY4F->getDocumentID() : $kTY4F; goto k5Nhu; jEZs5: $this->documentFragment =& $this->documentWrapper->isDocumentFragment; goto N0LXx; niTcT: $this->documentWrapper =& phpQuery::$documents[$vWdBd]; goto bqNCF; PqVw0: } public function __get($CroV9) { switch ($CroV9) { case 'length': return $this->size(); break; default: return $this->{$CroV9}; } } public function toReference(&$XEJZ0) { return $XEJZ0 = $this; } public function documentFragment($zzp0G = null) { if ($zzp0G) { phpQuery::$documents[$this->getDocumentID()]['documentFragment'] = $zzp0G; return $this; } return $this->documentFragment; } protected function isRoot($Z18mB) { return $Z18mB instanceof DOMDOCUMENT || $Z18mB instanceof DOMELEMENT && $Z18mB->tagName == 'html' || $this->root->isSameNode($Z18mB); } protected function stackIsRoot() { return $this->size() == 1 && $this->isRoot($this->elements[0]); } public function toRoot() { $this->elements = array($this->root); return $this; } public function getDocumentIDRef(&$kTY4F) { $kTY4F = $this->getDocumentID(); return $this; } public function getDocument() { return phpQuery::getDocument($this->getDocumentID()); } public function getDOMDocument() { return $this->document; } public function getDocumentID() { return $this->documentID; } public function unloadDocument() { phpQuery::unloadDocuments($this->getDocumentID()); } public function isHTML() { return $this->documentWrapper->isHTML; } public function isXHTML() { return $this->documentWrapper->isXHTML; } public function isXML() { return $this->documentWrapper->isXML; } public function serialize() { return phpQuery::param($this->serializeArray()); } public function serializeArray($TLV13 = null) { goto tVHmv; ag92l: return $F8OxY; goto cjlq3; MEj6S: $F8OxY = array(); goto Ys23L; Ys23L: foreach ($uhvj5 as $ErQts) { goto bpe7n; u8jXS: if ($ErQts->is('[disabled]')) { continue; } goto SW3Vw; jz3SM: if ($TLV13 && $ErQts->is('[type=submit]')) { if ($TLV13 instanceof DOMELEMENT && !$ErQts->elements[0]->isSameNode($TLV13)) { continue; } else { if (is_string($TLV13) && $ErQts->attr('name') != $TLV13) { continue; } } } goto feFDY; bpe7n: $ErQts = phpQuery::pq($ErQts); goto u8jXS; s0iS2: if ($ErQts->is('[type=checkbox]') && !$ErQts->is('[checked]')) { continue; } goto jz3SM; feFDY: $F8OxY[] = array('name' => $ErQts->attr('name'), 'value' => $ErQts->val()); goto vXnPU; SW3Vw: if (!$ErQts->is('[name]')) { continue; } goto s0iS2; vXnPU: } goto ag92l; tVHmv: $uhvj5 = $this->filter('form, input, select, textarea')->find('input, select, textarea')->andSelf()->not('form'); goto MEj6S; cjlq3: } protected function debug($nSOR9) { goto febgO; gE4gN: print '<pre>'; goto jBZLP; k39eK: print '</pre>
'; goto NzAGm; jBZLP: print_r($nSOR9); goto k39eK; febgO: if (!phpQuery::$debug) { return; } goto gE4gN; NzAGm: } protected function isRegexp($CzXk4) { return in_array($CzXk4[mb_strlen($CzXk4) - 1], array('^', '*', '$')); } protected function isChar($Aivj8) { return extension_loaded('mbstring') && phpQuery::$mbstringSupport ? mb_eregi('\\w', $Aivj8) : preg_match('@\\w@', $Aivj8); } protected function parseSelector($MpFg6) { goto vjDKZ; vjDKZ: $MpFg6 = trim(preg_replace('@\\s+@', ' ', preg_replace('@\\s*(>|\\+|~)\\s*@', '\\1', $MpFg6))); goto Z_rPr; HZX5P: foreach ($c5Vx3 as $U8G_W => $awvbI) { if (isset($awvbI[0])) { if (isset($awvbI[0][0]) && $awvbI[0][0] == ':') { array_unshift($c5Vx3[$U8G_W], '*'); } if ($awvbI[0] != '>') { array_unshift($c5Vx3[$U8G_W], ' '); } } } goto YJ9Em; y1boA: $lRUkQ = array('*', '|', '-'); goto v8p1V; Z_rPr: $c5Vx3 = array(array()); goto tNccH; bZArX: $gel1J = mb_strlen($MpFg6); goto MrpNG; qe2UE: $MpFg6 = $TsQ6T; goto Bbhxw; tNccH: if (!$MpFg6) { return $c5Vx3; } goto wlrFZ; h_34B: while ($k8Rwr < $gel1J) { $BOQ7Q = $MpFg6[$k8Rwr]; $hy4JB = ''; if ($this->isChar($BOQ7Q) || in_array($BOQ7Q, $lRUkQ)) { while (isset($MpFg6[$k8Rwr]) && ($this->isChar($MpFg6[$k8Rwr]) || in_array($MpFg6[$k8Rwr], $lRUkQ))) { $hy4JB .= $MpFg6[$k8Rwr]; $k8Rwr++; } $F8OxY[] = $hy4JB; } else { if ($BOQ7Q == '#') { goto kODif; kODif: $k8Rwr++; goto XVrs6; UYcf_: $F8OxY[] = '#' . $hy4JB; goto dRkn2; XVrs6: while (isset($MpFg6[$k8Rwr]) && ($this->isChar($MpFg6[$k8Rwr]) || $MpFg6[$k8Rwr] == '-')) { $hy4JB .= $MpFg6[$k8Rwr]; $k8Rwr++; } goto UYcf_; dRkn2: } else { if (in_array($BOQ7Q, $dsUja)) { $F8OxY[] = $BOQ7Q; $k8Rwr++; } else { if (isset($TXcDj[$BOQ7Q])) { $F8OxY[] = $TXcDj[$BOQ7Q]; $k8Rwr++; } else { if ($BOQ7Q == ',') { goto u71QF; AmD1v: $k8Rwr++; goto kjF3_; kjF3_: while (isset($MpFg6[$k8Rwr]) && $MpFg6[$k8Rwr] == ' ') { $k8Rwr++; } goto Ec7Li; u71QF: $c5Vx3[] = array(); goto Gv2zl; Gv2zl: $F8OxY =& $c5Vx3[count($c5Vx3) - 1]; goto AmD1v; Ec7Li: } else { if ($BOQ7Q == '.') { while (isset($MpFg6[$k8Rwr]) && ($this->isChar($MpFg6[$k8Rwr]) || in_array($MpFg6[$k8Rwr], $l4g3V))) { $hy4JB .= $MpFg6[$k8Rwr]; $k8Rwr++; } $F8OxY[] = $hy4JB; } else { if ($BOQ7Q == '~') { goto EWLbE; EWLbE: $h3UCH = true; goto YqZbf; Ki9Dn: while (isset($MpFg6[$k8Rwr]) && ($this->isChar($MpFg6[$k8Rwr]) || in_array($MpFg6[$k8Rwr], $l4g3V) || $MpFg6[$k8Rwr] == '*' || $MpFg6[$k8Rwr] == ' ' && $h3UCH)) { if ($MpFg6[$k8Rwr] != ' ') { $h3UCH = false; } $hy4JB .= $MpFg6[$k8Rwr]; $k8Rwr++; } goto GgRWF; GgRWF: $F8OxY[] = $hy4JB; goto LKTCR; YqZbf: $hy4JB .= $MpFg6[$k8Rwr++]; goto Ki9Dn; LKTCR: } else { if ($BOQ7Q == '+') { goto dexkA; S25i2: while (isset($MpFg6[$k8Rwr]) && ($this->isChar($MpFg6[$k8Rwr]) || in_array($MpFg6[$k8Rwr], $l4g3V) || $MpFg6[$k8Rwr] == '*' || $h3UCH && $MpFg6[$k8Rwr] == ' ')) { if ($MpFg6[$k8Rwr] != ' ') { $h3UCH = false; } $hy4JB .= $MpFg6[$k8Rwr]; $k8Rwr++; } goto qeqKA; dexkA: $h3UCH = true; goto Cn2nQ; Cn2nQ: $hy4JB .= $MpFg6[$k8Rwr++]; goto S25i2; qeqKA: $F8OxY[] = $hy4JB; goto MEjHU; MEjHU: } else { if ($BOQ7Q == '[') { goto fZVQ4; fZVQ4: $BCxIH = 1; goto wUQ3l; Tr4Ot: $F8OxY[] = $hy4JB; goto BzWJ_; pnGKA: while (isset($MpFg6[++$k8Rwr])) { $hy4JB .= $MpFg6[$k8Rwr]; if ($MpFg6[$k8Rwr] == '[') { $BCxIH++; } else { if ($MpFg6[$k8Rwr] == ']') { $BCxIH--; if (!$BCxIH) { break; } } } } goto Tr4Ot; wUQ3l: $hy4JB .= $BOQ7Q; goto pnGKA; BzWJ_: $k8Rwr++; goto SBbi2; SBbi2: } else { if ($BOQ7Q == ':') { goto D8Fk7; D8Fk7: $BCxIH = 1; goto SOkgP; FvOpt: while (isset($MpFg6[$k8Rwr]) && ($this->isChar($MpFg6[$k8Rwr]) || in_array($MpFg6[$k8Rwr], $R7X9k))) { $hy4JB .= $MpFg6[$k8Rwr]; $k8Rwr++; } goto lp3R9; lp3R9: if (isset($MpFg6[$k8Rwr]) && $MpFg6[$k8Rwr] == '(') { goto dCeB3; TtmtF: while (isset($MpFg6[++$k8Rwr])) { $hy4JB .= $MpFg6[$k8Rwr]; if ($MpFg6[$k8Rwr] == '(') { $BCxIH++; } else { if ($MpFg6[$k8Rwr] == ')') { $BCxIH--; if (!$BCxIH) { break; } } } } goto a_4Fy; dCeB3: $hy4JB .= $MpFg6[$k8Rwr]; goto Uk4I2; Uk4I2: $BCxIH = 1; goto TtmtF; rHKvX: $k8Rwr++; goto GTESv; a_4Fy: $F8OxY[] = $hy4JB; goto rHKvX; GTESv: } else { $F8OxY[] = $hy4JB; } goto SmSDN; SOkgP: $hy4JB .= $MpFg6[$k8Rwr++]; goto FvOpt; SmSDN: } else { $k8Rwr++; } } } } } } } } } } } goto HZX5P; YJ9Em: return $c5Vx3; goto jtBQt; MrpNG: $l4g3V = array('.', '-'); goto KqTeC; w4a4A: $TXcDj = array(); goto bZArX; Bbhxw: $k8Rwr = 0; goto h_34B; v8p1V: $TsQ6T = array(); goto gPnAJ; jkCVG: $dsUja = array('>', ' '); goto w4a4A; wlrFZ: $F8OxY =& $c5Vx3[0]; goto jkCVG; KqTeC: $R7X9k = array('-'); goto y1boA; gPnAJ: for ($k8Rwr = 0; $k8Rwr < $gel1J; $k8Rwr++) { $TsQ6T[] = mb_substr($MpFg6, $k8Rwr, 1); } goto qe2UE; jtBQt: } public function get($oPu4k = null, $pqqqk = null, $s8vZz = null, $At4Ac = null) { goto IbcBc; Yxzlk: $wovD1 = array_slice($wovD1, 1); goto w32cw; w32cw: foreach ($wovD1 as $oZLCv) { if (is_array($F8OxY)) { foreach ($F8OxY as $U8G_W => $gghxW) { $F8OxY[$U8G_W] = phpQuery::callbackRun($oZLCv, array($gghxW)); } } else { $F8OxY = phpQuery::callbackRun($oZLCv, array($F8OxY)); } } goto w2Vyy; w2Vyy: return $F8OxY; goto lynws; vv66B: $wovD1 = func_get_args(); goto Yxzlk; IbcBc: $F8OxY = isset($oPu4k) ? isset($this->elements[$oPu4k]) ? $this->elements[$oPu4k] : null : $this->elements; goto vv66B; lynws: } public function getString($oPu4k = null, $pqqqk = null, $s8vZz = null, $At4Ac = null) { goto Lq1pI; s69yQ: $wovD1 = array_slice($wovD1, 1); goto K3LBe; Lq1pI: if ($oPu4k) { $F8OxY = $this->eq($oPu4k)->text(); } else { $F8OxY = array(); for ($k8Rwr = 0; $k8Rwr < $this->size(); $k8Rwr++) { $F8OxY[] = $this->eq($k8Rwr)->text(); } } goto YOYeK; AWCd5: return $F8OxY; goto cYhZ2; K3LBe: foreach ($wovD1 as $oZLCv) { $F8OxY = phpQuery::callbackRun($oZLCv, array($F8OxY)); } goto AWCd5; YOYeK: $wovD1 = func_get_args(); goto s69yQ; cYhZ2: } public function getStrings($oPu4k = null, $pqqqk = null, $s8vZz = null, $At4Ac = null) { goto KPS6P; QeYeG: return $F8OxY; goto xJShU; Txiw6: foreach ($wovD1 as $oZLCv) { if (is_array($F8OxY)) { foreach ($F8OxY as $U8G_W => $gghxW) { $F8OxY[$U8G_W] = phpQuery::callbackRun($oZLCv, array($gghxW)); } } else { $F8OxY = phpQuery::callbackRun($oZLCv, array($F8OxY)); } } goto QeYeG; KPS6P: if ($oPu4k) { $F8OxY = $this->eq($oPu4k)->text(); } else { goto sVNev; qXFUZ: $wovD1 = func_get_args(); goto QLgDU; xqAc9: for ($k8Rwr = 0; $k8Rwr < $this->size(); $k8Rwr++) { $F8OxY[] = $this->eq($k8Rwr)->text(); } goto qXFUZ; sVNev: $F8OxY = array(); goto xqAc9; QLgDU: $wovD1 = array_slice($wovD1, 1); goto PYm8v; PYm8v: } goto Txiw6; xJShU: } public function newInstance($cYbAJ = null) { goto RHUQI; GvQ4m: if (is_null($cYbAJ)) { $vskPg->elements = $this->elements; if ($this->elementsBackup) { $this->elements = $this->elementsBackup; } } else { if (is_string($cYbAJ)) { $vskPg->elements = phpQuery::pq($cYbAJ, $this->getDocumentID())->stack(); } else { $vskPg->elements = $cYbAJ; } } goto a7ZcY; RHUQI: $xG9xx = get_class($this); goto YbljG; YbljG: $vskPg = $xG9xx != 'phpQuery' ? new $xG9xx($this, $this->getDocumentID()) : new phpQueryObject($this->getDocumentID()); goto F3yon; a7ZcY: return $vskPg; goto oTIaB; F3yon: $vskPg->previous = $this; goto GvQ4m; oTIaB: } protected function matchClasses($xG9xx, $Z18mB) { if (mb_strpos($xG9xx, '.', 1)) { goto WcSDN; OW4Qx: $U4ItH = explode(' ', $Z18mB->getAttribute('class')); goto Hhp4v; MVFyn: $criTq = count($FqVlz); goto OW4Qx; WcSDN: $FqVlz = explode('.', substr($xG9xx, 1)); goto MVFyn; FoWsk: $iEYjL = count(array_diff($FqVlz, $U4ItH)); goto K4Hyb; JEy17: if ($criTq > $UcKqC) { return false; } goto FoWsk; Hhp4v: $UcKqC = count($U4ItH); goto JEy17; K4Hyb: if (!$iEYjL) { return true; } goto k0gmF; k0gmF: } else { return in_array(substr($xG9xx, 1), explode(' ', $Z18mB->getAttribute('class'))); } } protected function runQuery($jwGi1, $RD3uk = null, $gCgXO = null) { goto xqxxv; dZz8v: $BCxIH = array(); goto BdkVF; xqxxv: if ($gCgXO && !method_exists($this, $gCgXO)) { return false; } goto dZz8v; I_WSj: $this->elements = $BCxIH; goto oFQBd; BdkVF: if (!$this->elements) { $this->debug('Stack empty, skipping...'); } goto IvlOj; IvlOj: foreach ($this->stack(array(1, 9, 13)) as $U8G_W => $U6Nly) { goto a3ryq; AIXSc: if ($l37YE) { $this->root->removeChild($l37YE); } goto qmhhY; zAnxu: if (!$IveoN->length) { $this->debug('Nothing found'); } goto PPobd; H8cNJ: $OYY_X = $this->documentWrapper->isXHTML ? $this->getNodeXpath($U6Nly, 'html') : $this->getNodeXpath($U6Nly); goto E5Okf; kPiXI: if (phpQuery::$debug) { $this->debug('Matched ' . count($PgaoQ) . ': ' . implode(', ', $PgaoQ)); } goto AIXSc; l00vb: $IveoN = $this->xpath->query($MpFg6); goto tkYGH; lJV_w: $J1F8l = $U6Nly; goto nndIf; VvGos: $this->debug("XPATH: {$MpFg6}"); goto l00vb; PPobd: $PgaoQ = array(); goto nuwFh; tkYGH: $this->debug('QUERY FETCHED'); goto zAnxu; nuwFh: foreach ($IveoN as $Z18mB) { goto lddef; n1CIA: if ($gCgXO) { goto GNWE2; GehBu: phpQuery::$debug = $gMj1L; goto YlSpJ; Gs_n5: $gMj1L = phpQuery::$debug; goto WpkYj; OL18E: if (call_user_func_array(array($this, $gCgXO), array($RD3uk, $Z18mB))) { $VZtm4 = true; } goto GehBu; WpkYj: phpQuery::$debug = false; goto OL18E; GNWE2: phpQuery::$debug ? $this->debug('Found: ' . $this->whois($Z18mB) . ", comparing with {$gCgXO}()") : null; goto Gs_n5; YlSpJ: } else { $VZtm4 = true; } goto cbWWD; cbWWD: if ($VZtm4) { if (phpQuery::$debug) { $PgaoQ[] = $this->whois($Z18mB); } $BCxIH[] = $Z18mB; } goto Sk87p; lddef: $VZtm4 = false; goto n1CIA; Sk87p: } goto kPiXI; E5Okf: $MpFg6 = $jwGi1 == '//' && $OYY_X == '/html[1]' ? '//*' : $OYY_X . $jwGi1; goto VvGos; a3ryq: $l37YE = false; goto lJV_w; nndIf: while ($J1F8l) { if (!$J1F8l->parentNode && !$this->isRoot($J1F8l)) { goto FtCu9; e1E35: break; goto nzoca; FtCu9: $this->root->appendChild($J1F8l); goto KzzwD; KzzwD: $l37YE = $J1F8l; goto e1E35; nzoca: } $J1F8l = isset($J1F8l->parentNode) ? $J1F8l->parentNode : null; } goto H8cNJ; qmhhY: } goto I_WSj; oFQBd: } public function find($itPzJ, $rYP3a = null, $iLLzE = false) { goto B0VwJ; B0VwJ: if (!$iLLzE) { $this->elementsBackup = $this->elements; } goto F7fSW; v0nLs: $this->debug(array('FIND', $itPzJ, $c5Vx3)); goto AZM_v; pDrSp: foreach ($c5Vx3 as $RD3uk) { goto K3v53; af8wK: if ($jwGi1 && $jwGi1 != '//') { $this->runQuery($jwGi1); $jwGi1 = ''; } goto IZWH9; IZWH9: foreach ($this->elements as $Z18mB) { if (!$this->elementsContainsNode($Z18mB, $BCxIH)) { $BCxIH[] = $Z18mB; } } goto EYNxc; xDLSb: foreach ($RD3uk as $lZA3E) { goto hYP2L; yFX7O: if ($fn3L6) { if ($this->isXML()) { if (mb_strpos($lZA3E, '|') !== false) { goto EVOA0; hsQdO: $jwGi1 .= "{$H5LAe}:{$YH4uq}"; goto AM_2T; EVOA0: $H5LAe = $YH4uq = null; goto vBYTj; vBYTj: list($H5LAe, $YH4uq) = explode('|', $lZA3E); goto hsQdO; AM_2T: } else { if ($lZA3E == '*') { $jwGi1 .= '*'; } else { $jwGi1 .= "*[local-name()='{$lZA3E}']"; } } } else { $jwGi1 .= $lZA3E; } } else { if ($lZA3E[0] == '#') { if ($rUket) { $jwGi1 .= '*'; } $jwGi1 .= '[@id=\'' . substr($lZA3E, 1) . '\']'; } else { if ($lZA3E[0] == '[') { goto N_kcN; hJYuK: $lvzjQ = false; goto l1TN1; N_kcN: if ($rUket) { $jwGi1 .= '*'; } goto NQq6E; NQq6E: $CroV9 = trim($lZA3E, ']['); goto hJYuK; YOmwf: if ($lvzjQ) { goto D8Mw5; d2S6G: if (!$this->length()) { break; } goto Dyv4v; D8Mw5: $this->runQuery($jwGi1, $lZA3E, 'is'); goto bYwWz; bYwWz: $jwGi1 = ''; goto d2S6G; Dyv4v: } goto XJExi; l1TN1: if (mb_strpos($lZA3E, '=')) { goto I_5JW; I_5JW: $qTz8C = null; goto dm0HZ; dm0HZ: list($CroV9, $qTz8C) = explode('=', $CroV9); goto I9Vnu; nSY08: if ($this->isRegexp($CroV9)) { goto oQphp; WT9KY: $jwGi1 .= "[@{$CroV9}]"; goto K8Tco; gfXbQ: $lvzjQ = true; goto WT9KY; oQphp: $CroV9 = substr($CroV9, 0, -1); goto gfXbQ; K8Tco: } else { $jwGi1 .= "[@{$CroV9}='{$qTz8C}']"; } goto dREAy; I9Vnu: $qTz8C = trim($qTz8C, '\'"'); goto nSY08; dREAy: } else { $jwGi1 .= "[@{$CroV9}]"; } goto YOmwf; XJExi: } else { if ($lZA3E[0] == '.') { goto ydahV; efI45: if (!$this->length()) { break; } goto vaw2y; s5uIs: $jwGi1 .= '[@class]'; goto L8NlO; L8NlO: $this->runQuery($jwGi1, $lZA3E, 'matchClasses'); goto pZljz; ydahV: if ($rUket) { $jwGi1 .= '*'; } goto s5uIs; pZljz: $jwGi1 = ''; goto efI45; vaw2y: } else { if ($lZA3E[0] == '~') { goto nnWyj; V1Bqa: if (!$this->length()) { break; } goto V8mKQ; nnWyj: $this->runQuery($jwGi1); goto hnznH; v9Ydo: $this->elements = $this->siblings(substr($lZA3E, 1))->elements; goto V1Bqa; hnznH: $jwGi1 = ''; goto v9Ydo; V8mKQ: } else { if ($lZA3E[0] == '+') { goto FUTHa; ZjDvS: $jwGi1 = ''; goto aLu1u; FUTHa: $this->runQuery($jwGi1); goto ZjDvS; aLu1u: $XJXmE = substr($lZA3E, 1); goto tdv6M; ilgrW: foreach ($rv7kj as $Z18mB) { goto waUIr; Tv1yJ: while ($CDWs8 && !$CDWs8 instanceof DOMELEMENT) { $CDWs8 = $CDWs8->nextSibling; } goto AJVXd; AJVXd: if ($CDWs8 && $this->is($XJXmE, $CDWs8)) { $this->elements[] = $CDWs8; } goto QBMyU; waUIr: $CDWs8 = $Z18mB->nextSibling; goto Tv1yJ; QBMyU: } goto iDr9C; HHKSg: $this->elements = array(); goto ilgrW; tdv6M: $rv7kj = $this->elements; goto HHKSg; iDr9C: if (!$this->length()) { break; } goto NQGX6; NQGX6: } else { if ($lZA3E[0] == ':') { goto LRLH7; okQVD: if (!$this->length()) { break; } goto LaA5x; iHxbo: if (!$this->length()) { break; } goto ud0KL; LRLH7: if ($jwGi1) { $this->runQuery($jwGi1); $jwGi1 = ''; } goto iHxbo; ud0KL: $this->pseudoClasses($lZA3E); goto okQVD; LaA5x: } else { if ($lZA3E == '>') { $jwGi1 .= '/'; $rUket = 2; } else { if ($lZA3E == ' ') { $jwGi1 .= '//'; $rUket = 2; } else { phpQuery::debug("Unrecognized token '{$lZA3E}'"); } } } } } } } } } goto m2CjE; hYP2L: $fn3L6 = extension_loaded('mbstring') && phpQuery::$mbstringSupport ? mb_ereg_match('^[\\w|\\||-]+$', $lZA3E) || $lZA3E == '*' : preg_match('@^[\\w|\\||-]+$@', $lZA3E) || $lZA3E == '*'; goto yFX7O; m2CjE: $rUket = $rUket === 2; goto VJS6B; VJS6B: } goto af8wK; K3v53: $this->elements = $lcWw9; goto kiBeE; kiBeE: $rUket = false; goto xDLSb; EYNxc: } goto tvqY8; Tyxo3: $BCxIH = array(); goto pDrSp; AZM_v: $jwGi1 = ''; goto WIq76; zsEO4: $c5Vx3 = $this->parseSelector($itPzJ); goto v0nLs; uHPRN: return $this->newInstance(); goto v_fQM; tvqY8: $this->elements = $BCxIH; goto uHPRN; F7fSW: if ($rYP3a) { if (!is_array($rYP3a) && $rYP3a instanceof DOMELEMENT) { $this->elements = array($rYP3a); } else { if (is_array($rYP3a)) { $this->elements = array(); foreach ($rYP3a as $BOQ7Q) { if ($BOQ7Q instanceof DOMELEMENT) { $this->elements[] = $BOQ7Q; } } } else { if ($rYP3a instanceof self) { $this->elements = $rYP3a->elements; } } } } goto zsEO4; WIq76: $lcWw9 = $this->elements; goto Tyxo3; v_fQM: } protected function pseudoClasses($xG9xx) { goto CdOYr; CdOYr: $xG9xx = ltrim($xG9xx, ':'); goto Z0p7C; Z0p7C: $t5a2t = mb_strpos($xG9xx, '('); goto PK5Yc; PK5Yc: if ($t5a2t !== false) { $wovD1 = substr($xG9xx, $t5a2t + 1, -1); $xG9xx = substr($xG9xx, 0, $t5a2t); } goto M2gOQ; M2gOQ: switch ($xG9xx) { case 'even': case 'odd': goto gmhIU; QQAet: break; goto oL4Hp; gmhIU: $BCxIH = array(); goto hxRe2; uC5Lu: $this->elements = $BCxIH; goto QQAet; hxRe2: foreach ($this->elements as $k8Rwr => $Z18mB) { if ($xG9xx == 'even' && $k8Rwr % 2 == 0) { $BCxIH[] = $Z18mB; } else { if ($xG9xx == 'odd' && $k8Rwr % 2) { $BCxIH[] = $Z18mB; } } } goto uC5Lu; oL4Hp: case 'eq': goto a9LFI; gol1U: $this->elements = isset($this->elements[$U8G_W]) ? array($this->elements[$U8G_W]) : array(); goto uWkWn; a9LFI: $U8G_W = intval($wovD1); goto gol1U; uWkWn: break; goto GGBWS; GGBWS: case 'gt': $this->elements = array_slice($this->elements, $wovD1 + 1); break; case 'lt': $this->elements = array_slice($this->elements, 0, $wovD1 + 1); break; case 'first': if (isset($this->elements[0])) { $this->elements = array($this->elements[0]); } break; case 'last': if ($this->elements) { $this->elements = array($this->elements[count($this->elements) - 1]); } break; case 'contains': goto Od1Rm; bRRCU: break; goto Fpe6I; uwNUG: foreach ($this->elements as $Z18mB) { if (mb_stripos($Z18mB->textContent, $me7IX) === false) { continue; } $BCxIH[] = $Z18mB; } goto qnIla; nnWli: $BCxIH = array(); goto uwNUG; Od1Rm: $me7IX = trim($wovD1, '"\''); goto nnWli; qnIla: $this->elements = $BCxIH; goto bRRCU; Fpe6I: case 'not': goto fevQN; fevQN: $RD3uk = self::unQuote($wovD1); goto E_OyH; E_OyH: $this->elements = $this->not($RD3uk)->stack(); goto sP_ks; sP_ks: break; goto pWV9f; pWV9f: case 'slice': goto QsQY9; QiTqc: $jm3aC = isset($wovD1[1]) ? $wovD1[1] : null; goto dF4Cq; d8Su7: $this->elements = array_slice($this->elements, $x5GcS, $jm3aC); goto Giy9o; Giy9o: break; goto R_zhw; dF4Cq: if ($jm3aC > 0) { $jm3aC = $jm3aC - $x5GcS; } goto d8Su7; QsQY9: $wovD1 = explode(',', str_replace(', ', ',', trim($wovD1, '"\''))); goto DGc7q; DGc7q: $x5GcS = $wovD1[0]; goto QiTqc; R_zhw: case 'has': goto L7JPP; K7Ywt: $this->elements = $BCxIH; goto sb4JG; L7JPP: $RD3uk = trim($wovD1, '"\''); goto DQHnh; hygPi: foreach ($this->stack(1) as $zX_2E) { if ($this->find($RD3uk, $zX_2E, true)->length) { $BCxIH[] = $zX_2E; } } goto K7Ywt; sb4JG: break; goto l9YRr; DQHnh: $BCxIH = array(); goto hygPi; l9YRr: case 'submit': case 'reset': $this->elements = phpQuery::merge($this->map(array($this, 'is'), "input[type={$xG9xx}]", new CallbackParam()), $this->map(array($this, 'is'), "button[type={$xG9xx}]", new CallbackParam())); break; case 'input': $this->elements = $this->map(array($this, 'is'), 'input', new CallbackParam())->elements; break; case 'password': case 'checkbox': case 'radio': case 'hidden': case 'image': case 'file': $this->elements = $this->map(array($this, 'is'), "input[type={$xG9xx}]", new CallbackParam())->elements; break; case 'parent': $this->elements = $this->map(create_function('$node', '
						return $node instanceof DOMELEMENT && $node->childNodes->length
							? $node : null;'))->elements; break; case 'empty': $this->elements = $this->map(create_function('$node', '
						return $node instanceof DOMELEMENT && $node->childNodes->length
							? null : $node;'))->elements; break; case 'disabled': case 'selected': case 'checked': $this->elements = $this->map(array($this, 'is'), "[{$xG9xx}]", new CallbackParam())->elements; break; case 'enabled': $this->elements = $this->map(create_function('$node', '
						return pq($node)->not(":disabled") ? $node : null;'))->elements; break; case 'header': $this->elements = $this->map(create_function('$node', '$isHeader = isset($node->tagName) && in_array($node->tagName, array(
							"h1", "h2", "h3", "h4", "h5", "h6", "h7"
						));
						return $isHeader
							? $node
							: null;'))->elements; break; case 'only-child': $this->elements = $this->map(create_function('$node', 'return pq($node)->siblings()->size() == 0 ? $node : null;'))->elements; break; case 'first-child': $this->elements = $this->map(create_function('$node', 'return pq($node)->prevAll()->size() == 0 ? $node : null;'))->elements; break; case 'last-child': $this->elements = $this->map(create_function('$node', 'return pq($node)->nextAll()->size() == 0 ? $node : null;'))->elements; break; case 'nth-child': goto NbnjG; NbnjG: $uZEpM = trim($wovD1, '"\''); goto CHSMl; snleh: if ($uZEpM == 'even' || $uZEpM == 'odd') { $aeWQJ = $this->map(create_function('$node, $param', '$index = pq($node)->prevAll()->size()+1;
							if ($param == "even" && ($index%2) == 0)
								return $node;
							else if ($param == "odd" && $index%2 == 1)
								return $node;
							else
								return null;'), new CallbackParam(), $uZEpM); } else { if (mb_strlen($uZEpM) > 1 && $uZEpM[1] == 'n') { $aeWQJ = $this->map(create_function('$node, $param', '$prevs = pq($node)->prevAll()->size();
							$index = 1+$prevs;
							$b = mb_strlen($param) > 3
								? $param{3}
								: 0;
							$a = $param{0};
							if ($b && $param{2} == "-")
								$b = -$b;
							if ($a > 0) {
								return ($index-$b)%$a == 0
									? $node
									: null;
								phpQuery::debug($a."*".floor($index/$a)."+$b-1 == ".($a*floor($index/$a)+$b-1)." ?= $prevs");
								return $a*floor($index/$a)+$b-1 == $prevs
										? $node
										: null;
							} else if ($a == 0)
								return $index == $b
										? $node
										: null;
							else
								// negative value
								return $index <= $b
										? $node
										: null;
//							if (! $b)
//								return $index%$a == 0
//									? $node
//									: null;
//							else
//								return ($index-$b)%$a == 0
//									? $node
//									: null;
							'), new CallbackParam(), $uZEpM); } else { $aeWQJ = $this->map(create_function('$node, $index', '$prevs = pq($node)->prevAll()->size();
							if ($prevs && $prevs == $index-1)
								return $node;
							else if (! $prevs && $index == 1)
								return $node;
							else
								return null;'), new CallbackParam(), $uZEpM); } } goto keHDy; CHSMl: if (!$uZEpM) { break; } goto HTt83; HTt83: if ($uZEpM[0] == 'n') { $uZEpM = '1' . $uZEpM; } goto snleh; sMIPz: break; goto qM3QH; keHDy: $this->elements = $aeWQJ->elements; goto sMIPz; qM3QH: default: $this->debug("Unknown pseudoclass '{$xG9xx}', skipping..."); } goto BrDoo; BrDoo: } protected function __pseudoClassParam($gvld5) { } public function is($RD3uk, $IveoN = null) { goto qtjG9; qtjG9: phpQuery::debug(array('Is:', $RD3uk)); goto F1ztm; Hn2bG: $this->filter($RD3uk, true); goto og7G1; F1ztm: if (!$RD3uk) { return false; } goto uiHmx; uiHmx: $lcWw9 = $this->elements; goto gRBWd; KKjR_: return (bool) count($BCxIH); goto yyU3_; JIflr: if ($IveoN && is_array($IveoN)) { $this->elements = $IveoN; } else { if ($IveoN) { $this->elements = array($IveoN); } } goto Hn2bG; gRBWd: $CxrI6 = false; goto JIflr; og7G1: $BCxIH = $this->elements; goto qcBBn; bShBe: if ($IveoN) { return $BCxIH ? $BCxIH : null; } goto KKjR_; qcBBn: $this->elements = $lcWw9; goto bShBe; yyU3_: } public function filterCallback($oZLCv, $aPvEB = false) { goto tkKzH; mLVDv: return $aPvEB ? $this : $this->newInstance(); goto JHWV2; kN_J5: $cYbAJ = array(); goto gPF08; gPF08: foreach ($this->elements as $oPu4k => $Z18mB) { $FEjaa = phpQuery::callbackRun($oZLCv, array($oPu4k, $Z18mB)); if (is_null($FEjaa) || !is_null($FEjaa) && $FEjaa) { $cYbAJ[] = $Z18mB; } } goto uPB_j; tkKzH: if (!$aPvEB) { $this->elementsBackup = $this->elements; $this->debug('Filtering by callback'); } goto kN_J5; uPB_j: $this->elements = $cYbAJ; goto mLVDv; JHWV2: } public function filter($itPzJ, $aPvEB = false) { goto UzyZv; UzyZv: if ($itPzJ instanceof Callback or $itPzJ instanceof Closure) { return $this->filterCallback($itPzJ, $aPvEB); } goto wQUho; wM3V9: if (!is_array($itPzJ)) { $itPzJ = $this->parseSelector($itPzJ); } goto gzyHr; ehdfT: $this->elements = $a1MQN; goto Mfwby; tOhQj: $a1MQN = array(); goto keh_6; gzyHr: if (!$aPvEB) { $this->debug(array('Filtering:', $itPzJ)); } goto tOhQj; Mfwby: if ($aPvEB) { return $this; } else { $this->debug('Stack length after filter(): ' . count($a1MQN)); return $this->newInstance(); } goto oUHWj; keh_6: foreach ($itPzJ as $RD3uk) { goto rRWTb; rRWTb: $BCxIH = array(); goto AUroX; v4RP4: if (in_array($RD3uk[0], $Sc3ZK)) { $RD3uk = array_slice($RD3uk, 1); } goto B0tym; cv1tT: foreach ($RD3uk as $lZA3E) { if ($lZA3E[0] == ':') { $this->pseudoClasses($lZA3E); } } goto Ld0ZQ; B0tym: foreach ($this->stack() as $Z18mB) { goto tlH_o; LL0Hd: if (!$trwlV) { $BCxIH[] = $Z18mB; } goto URDP0; tlH_o: $trwlV = false; goto askwa; askwa: foreach ($RD3uk as $lZA3E) { if (!$Z18mB instanceof DOMELEMENT) { if ($lZA3E[0] == '[') { $CroV9 = trim($lZA3E, '[]'); if (mb_strpos($CroV9, '=')) { list($CroV9, $y7pq9) = explode('=', $CroV9); if ($CroV9 == 'nodeType' && $Z18mB->nodeType != $y7pq9) { $trwlV = true; } } } else { $trwlV = true; } } else { if ($lZA3E[0] == '#') { if ($Z18mB->getAttribute('id') != substr($lZA3E, 1)) { $trwlV = true; } } else { if ($lZA3E[0] == '.') { if (!$this->matchClasses($lZA3E, $Z18mB)) { $trwlV = true; } } else { if ($lZA3E[0] == '[') { $CroV9 = trim($lZA3E, '[]'); if (mb_strpos($CroV9, '=')) { goto Gfwni; G6a_v: if ($CroV9 == 'nodeType') { if ($y7pq9 != $Z18mB->nodeType) { $trwlV = true; } } else { if ($this->isRegexp($CroV9)) { goto i7Gk9; i7Gk9: $y7pq9 = extension_loaded('mbstring') && phpQuery::$mbstringSupport ? quotemeta(trim($y7pq9, '"\'')) : preg_quote(trim($y7pq9, '"\''), '@'); goto CYoy8; q7FHe: $eQYzT = extension_loaded('mbstring') && phpQuery::$mbstringSupport ? mb_ereg_match($CzXk4, $Z18mB->getAttribute($CroV9)) : preg_match("@{$CzXk4}@", $Z18mB->getAttribute($CroV9)); goto cPNsQ; YD6RT: $CroV9 = substr($CroV9, 0, -1); goto q7FHe; CYoy8: switch (substr($CroV9, -1)) { case '^': $CzXk4 = '^' . $y7pq9; break; case '*': $CzXk4 = '.*' . $y7pq9 . '.*'; break; case '$': $CzXk4 = '.*' . $y7pq9 . '$'; break; } goto YD6RT; cPNsQ: if (!$eQYzT) { $trwlV = true; } goto Lf6FQ; Lf6FQ: } else { if ($Z18mB->getAttribute($CroV9) != $y7pq9) { $trwlV = true; } } } goto gLkLN; IkN1Y: $y7pq9 = self::unQuote($y7pq9); goto G6a_v; Gfwni: list($CroV9, $y7pq9) = explode('=', $CroV9); goto IkN1Y; gLkLN: } else { if (!$Z18mB->hasAttribute($CroV9)) { $trwlV = true; } } } else { if ($lZA3E[0] == ':') { } else { if (trim($lZA3E)) { if ($lZA3E != '*') { if (isset($Z18mB->tagName)) { if ($Z18mB->tagName != $lZA3E) { $trwlV = true; } } else { if ($lZA3E == 'html' && !$this->isRoot($Z18mB)) { $trwlV = true; } } } } else { if (in_array($lZA3E, $Sc3ZK)) { $trwlV = true; $this->debug(array('Skipping non simple selector', $RD3uk)); } } } } } } } if ($trwlV) { break; } } goto LL0Hd; URDP0: } goto ic8Bk; Ld0ZQ: foreach ($this->elements as $Z18mB) { $a1MQN[] = $Z18mB; } goto NawQj; ic8Bk: $GpM8Q = $this->elements; goto mBGSc; AUroX: if (!$RD3uk) { break; } goto v4RP4; NawQj: $this->elements = $GpM8Q; goto htR8o; mBGSc: $this->elements = $BCxIH; goto cv1tT; htR8o: } goto ehdfT; wQUho: if (!$aPvEB) { $this->elementsBackup = $this->elements; } goto MnVXF; MnVXF: $Sc3ZK = array(' ', '>', '~', '+', '/'); goto wM3V9; oUHWj: } protected static function unQuote($qTz8C) { return $qTz8C[0] == '\'' || $qTz8C[0] == '"' ? substr($qTz8C, 1, -1) : $qTz8C; } public function load($VwfRl, $XWlC_ = null, $oZLCv = null) { goto TawKC; r1z35: phpQuery::ajax($WugrN); goto yg4y4; K485D: $WugrN = array('url' => $VwfRl, 'type' => $XWlC_ ? 'POST' : 'GET', 'data' => $XWlC_, 'complete' => $oZLCv, 'success' => array($this, '__loadSuccess')); goto r1z35; ls1Z1: if (mb_strpos($VwfRl, ' ') !== false) { goto LRHJw; LRHJw: $EaY24 = null; goto FzO7y; FzO7y: if (extension_loaded('mbstring') && phpQuery::$mbstringSupport) { mb_ereg('^([^ ]+) (.*)$', $VwfRl, $EaY24); } else { preg_match('^([^ ]+) (.*)$', $VwfRl, $EaY24); } goto hD3vh; o8FLz: $this->_loadSelector = $RD3uk; goto xioq4; hD3vh: $VwfRl = $EaY24[1]; goto lHvBp; lHvBp: $RD3uk = $EaY24[2]; goto o8FLz; xioq4: } goto K485D; yg4y4: return $this; goto KBopW; TawKC: if ($XWlC_ && !is_array($XWlC_)) { $oZLCv = $XWlC_; $XWlC_ = null; } goto ls1Z1; KBopW: } public function __loadSuccess($ZpNyF) { if ($this->_loadSelector) { $ZpNyF = phpQuery::newDocument($ZpNyF)->find($this->_loadSelector); unset($this->_loadSelector); } foreach ($this->stack(1) as $Z18mB) { phpQuery::pq($Z18mB, $this->getDocumentID())->markup($ZpNyF); } } public function css() { return $this; } public function show() { return $this; } public function hide() { return $this; } public function trigger($mhShF, $XWlC_ = array()) { foreach ($this->elements as $Z18mB) { phpQueryEvents::trigger($this->getDocumentID(), $mhShF, $XWlC_, $Z18mB); } return $this; } public function triggerHandler($mhShF, $XWlC_ = array()) { } public function bind($mhShF, $XWlC_, $oZLCv = null) { goto SRYD8; towt3: foreach ($this->elements as $Z18mB) { phpQueryEvents::add($this->getDocumentID(), $Z18mB, $mhShF, $XWlC_, $oZLCv); } goto LxTzW; LxTzW: return $this; goto wnjFX; SRYD8: if (!isset($oZLCv)) { $oZLCv = $XWlC_; $XWlC_ = null; } goto towt3; wnjFX: } public function unbind($mhShF = null, $oZLCv = null) { foreach ($this->elements as $Z18mB) { phpQueryEvents::remove($this->getDocumentID(), $Z18mB, $mhShF, $oZLCv); } return $this; } public function change($oZLCv = null) { if ($oZLCv) { return $this->bind('change', $oZLCv); } return $this->trigger('change'); } public function submit($oZLCv = null) { if ($oZLCv) { return $this->bind('submit', $oZLCv); } return $this->trigger('submit'); } public function click($oZLCv = null) { if ($oZLCv) { return $this->bind('click', $oZLCv); } return $this->trigger('click'); } public function wrapAllOld($AnuOn) { goto odSsv; AtPrx: $CtS79 = $AnuOn->elements[0]; goto eWd_V; odSsv: $AnuOn = pq($AnuOn)->_clone(); goto yBoQz; eWd_V: while ($CtS79->firstChild && $CtS79->firstChild instanceof DOMELEMENT) { $CtS79 = $CtS79->firstChild; } goto eI0re; yBoQz: if (!$AnuOn->length() || !$this->length()) { return $this; } goto jdMHo; v11ER: return $this; goto UCV1h; jdMHo: $AnuOn->insertBefore($this->elements[0]); goto AtPrx; eI0re: pq($CtS79)->append($this); goto v11ER; UCV1h: } public function wrapAll($AnuOn) { if (!$this->length()) { return $this; } return phpQuery::pq($AnuOn, $this->getDocumentID())->clone()->insertBefore($this->get(0))->map(array($this, '___wrapAllCallback'))->append($this); } public function ___wrapAllCallback($Z18mB) { goto To7BH; fTrTi: return $CtS79; goto WEio4; ejbRj: while ($CtS79->firstChild && $CtS79->firstChild instanceof DOMELEMENT) { $CtS79 = $CtS79->firstChild; } goto fTrTi; To7BH: $CtS79 = $Z18mB; goto ejbRj; WEio4: } public function wrapAllPHP($Y2kGz, $My7aa) { return $this->slice(0, 1)->beforePHP($Y2kGz)->end()->slice(-1)->afterPHP($My7aa)->end(); } public function wrap($AnuOn) { foreach ($this->stack() as $Z18mB) { phpQuery::pq($Z18mB, $this->getDocumentID())->wrapAll($AnuOn); } return $this; } public function wrapPHP($Y2kGz, $My7aa) { foreach ($this->stack() as $Z18mB) { phpQuery::pq($Z18mB, $this->getDocumentID())->wrapAllPHP($Y2kGz, $My7aa); } return $this; } public function wrapInner($AnuOn) { foreach ($this->stack() as $Z18mB) { phpQuery::pq($Z18mB, $this->getDocumentID())->contents()->wrapAll($AnuOn); } return $this; } public function wrapInnerPHP($Y2kGz, $My7aa) { foreach ($this->stack(1) as $Z18mB) { phpQuery::pq($Z18mB, $this->getDocumentID())->contents()->wrapAllPHP($Y2kGz, $My7aa); } return $this; } public function contents() { goto idSJK; YvZM9: foreach ($this->stack(1) as $zX_2E) { foreach ($zX_2E->childNodes as $Z18mB) { $BCxIH[] = $Z18mB; } } goto N4T7r; N4T7r: return $this->newInstance($BCxIH); goto tMeG7; idSJK: $BCxIH = array(); goto YvZM9; tMeG7: } public function contentsUnwrap() { foreach ($this->stack(1) as $Z18mB) { goto Lg98K; b4rQ5: foreach ($Z18mB->childNodes as $hAWqI) { $my805[] = $hAWqI; } goto iSp1v; qniFj: $Z18mB->parentNode->removeChild($Z18mB); goto YnB5g; DqF7P: $my805 = array(); goto b4rQ5; iSp1v: foreach ($my805 as $hAWqI) { $Z18mB->parentNode->insertBefore($hAWqI, $Z18mB); } goto qniFj; Lg98K: if (!$Z18mB->parentNode) { continue; } goto DqF7P; YnB5g: } return $this; } public function switchWith($nFewh) { goto TpMbk; TpMbk: $nFewh = pq($nFewh, $this->getDocumentID()); goto Tk_GO; Ig7GN: foreach ($this->stack(1) as $Z18mB) { pq($Z18mB)->contents()->toReference($n3GvS)->end()->replaceWith($nFewh->clone()->append($n3GvS)); } goto Mzu1q; Mzu1q: return $this; goto tJhHF; Tk_GO: $n3GvS = null; goto Ig7GN; tJhHF: } public function eq($Yuti1) { goto KqNHc; gn9eZ: $this->elementsBackup = $this->elements; goto ZfyO8; U8DhG: if (isset($lcWw9[$Yuti1])) { $this->elements[] = $lcWw9[$Yuti1]; } goto g026z; ZfyO8: $this->elements = array(); goto U8DhG; KqNHc: $lcWw9 = $this->elements; goto gn9eZ; g026z: return $this->newInstance(); goto FLW33; FLW33: } public function size() { return count($this->elements); } public function length() { return $this->size(); } public function count() { return $this->size(); } public function end($jUaC8 = 1) { return $this->previous ? $this->previous : $this; } public function _clone() { goto fdKmw; X0PiC: $this->elements = $cYbAJ; goto Yn_Ql; Yn_Ql: return $this->newInstance(); goto Hohi6; gBR0N: $this->elementsBackup = $this->elements; goto Th3K1; Th3K1: foreach ($this->elements as $Z18mB) { $cYbAJ[] = $Z18mB->cloneNode(true); } goto X0PiC; fdKmw: $cYbAJ = array(); goto gBR0N; Hohi6: } public function replaceWithPHP($fKl3n) { return $this->replaceWith(phpQuery::php($fKl3n)); } public function replaceWith($n3GvS) { return $this->after($n3GvS)->remove(); } public function replaceAll($RD3uk) { foreach (phpQuery::pq($RD3uk, $this->getDocumentID()) as $Z18mB) { phpQuery::pq($Z18mB, $this->getDocumentID())->after($this->_clone())->remove(); } return $this; } public function remove($RD3uk = null) { goto Bnb0n; fRFNZ: foreach ($hK5j3 as $Z18mB) { goto CKeio; HEu9P: if (isset($Z18mB->tagName)) { $this->debug("Removing '{$Z18mB->tagName}'"); } goto Ke6ry; jn3rm: phpQueryEvents::trigger($this->getDocumentID(), $MU9DT->type, array($MU9DT), $Z18mB); goto BM4Bz; Ke6ry: $Z18mB->parentNode->removeChild($Z18mB); goto XT9dT; XT9dT: $MU9DT = new DOMEvent(array('target' => $Z18mB, 'type' => 'DOMNodeRemoved')); goto jn3rm; CKeio: if (!$Z18mB->parentNode) { continue; } goto HEu9P; BM4Bz: } goto cNwCs; Bnb0n: $hK5j3 = $RD3uk ? $this->filter($RD3uk)->elements : $this->elements; goto fRFNZ; cNwCs: return $this; goto cYNtu; cYNtu: } protected function markupEvents($NaLUb, $lyWSn, $Z18mB) { if ($Z18mB->tagName == 'textarea' && $NaLUb != $lyWSn) { $MU9DT = new DOMEvent(array('target' => $Z18mB, 'type' => 'change')); phpQueryEvents::trigger($this->getDocumentID(), $MU9DT->type, array($MU9DT), $Z18mB); } } public function markup($nFewh = null, $pqqqk = null, $s8vZz = null, $At4Ac = null) { $wovD1 = func_get_args(); if ($this->documentWrapper->isXML) { return call_user_func_array(array($this, 'xml'), $wovD1); } else { return call_user_func_array(array($this, 'html'), $wovD1); } } public function markupOuter($pqqqk = null, $s8vZz = null, $At4Ac = null) { $wovD1 = func_get_args(); if ($this->documentWrapper->isXML) { return call_user_func_array(array($this, 'xmlOuter'), $wovD1); } else { return call_user_func_array(array($this, 'htmlOuter'), $wovD1); } } public function html($ZpNyF = null, $pqqqk = null, $s8vZz = null, $At4Ac = null) { if (isset($ZpNyF)) { goto EL191; XkrMf: $this->empty(); goto Jzk7n; EL191: $IveoN = $this->documentWrapper->import($ZpNyF); goto XkrMf; Jzk7n: foreach ($this->stack(1) as $Sj2sP => $Z18mB) { goto JAHL7; oiF_o: if (($this->isXHTML() || $this->isHTML()) && $Z18mB->tagName == 'textarea') { $this->markupEvents($ZpNyF, $xSZOd, $Z18mB); } goto j23cH; JAHL7: if (($this->isXHTML() || $this->isHTML()) && $Z18mB->tagName == 'textarea') { $xSZOd = pq($Z18mB, $this->getDocumentID())->markup(); } goto nQSjX; nQSjX: foreach ($IveoN as $uM1N1) { $Z18mB->appendChild($Sj2sP ? $uM1N1->cloneNode(true) : $uM1N1); } goto oiF_o; j23cH: } goto xZj3j; xZj3j: return $this; goto mPC7i; mPC7i: } else { goto cbWUc; sRst2: $wovD1 = func_get_args(); goto ApQx2; EHYG5: return $F8OxY; goto BrTFc; ApQx2: foreach (array_slice($wovD1, 1) as $oZLCv) { $F8OxY = phpQuery::callbackRun($oZLCv, array($F8OxY)); } goto EHYG5; cbWUc: $F8OxY = $this->documentWrapper->markup($this->elements, true); goto sRst2; BrTFc: } } public function xml($zAWDU = null, $pqqqk = null, $s8vZz = null, $At4Ac = null) { $wovD1 = func_get_args(); return call_user_func_array(array($this, 'html'), $wovD1); } public function htmlOuter($pqqqk = null, $s8vZz = null, $At4Ac = null) { goto XnL6I; zjSoy: $wovD1 = func_get_args(); goto KIaMh; BeCF8: return $nFewh; goto gjrar; XnL6I: $nFewh = $this->documentWrapper->markup($this->elements); goto zjSoy; KIaMh: foreach ($wovD1 as $oZLCv) { $nFewh = phpQuery::callbackRun($oZLCv, array($nFewh)); } goto BeCF8; gjrar: } public function xmlOuter($pqqqk = null, $s8vZz = null, $At4Ac = null) { $wovD1 = func_get_args(); return call_user_func_array(array($this, 'htmlOuter'), $wovD1); } public function __toString() { return $this->markupOuter(); } public function php($fKl3n = null) { return $this->markupPHP($fKl3n); } public function markupPHP($fKl3n = null) { return isset($fKl3n) ? $this->markup(phpQuery::php($fKl3n)) : phpQuery::markupToPHP($this->markup()); } public function markupOuterPHP() { return phpQuery::markupToPHP($this->markupOuter()); } public function children($RD3uk = null) { goto DphR9; Zr9YW: return $this->newInstance(); goto rRu43; DphR9: $BCxIH = array(); goto ghune; A1rw1: $this->elementsBackup = $this->elements; goto KqzHG; ghune: foreach ($this->stack(1) as $Z18mB) { foreach ($Z18mB->childNodes as $uM1N1) { goto ITOca; xwajx: if ($RD3uk && !$this->is($RD3uk, $uM1N1)) { continue; } goto hgypO; hgypO: if ($this->elementsContainsNode($uM1N1, $BCxIH)) { continue; } goto aUXMj; aUXMj: $BCxIH[] = $uM1N1; goto CmPcY; ITOca: if ($uM1N1->nodeType != 1) { continue; } goto xwajx; CmPcY: } } goto A1rw1; KqzHG: $this->elements = $BCxIH; goto Zr9YW; rRu43: } public function ancestors($RD3uk = null) { return $this->children($RD3uk); } public function append($n3GvS) { return $this->insert($n3GvS, __FUNCTION__); } public function appendPHP($n3GvS) { return $this->insert("<php><!-- {$n3GvS} --></php>", 'append'); } public function appendTo($RXJj6) { return $this->insert($RXJj6, __FUNCTION__); } public function prepend($n3GvS) { return $this->insert($n3GvS, __FUNCTION__); } public function prependPHP($n3GvS) { return $this->insert("<php><!-- {$n3GvS} --></php>", 'prepend'); } public function prependTo($RXJj6) { return $this->insert($RXJj6, __FUNCTION__); } public function before($n3GvS) { return $this->insert($n3GvS, __FUNCTION__); } public function beforePHP($n3GvS) { return $this->insert("<php><!-- {$n3GvS} --></php>", 'before'); } public function insertBefore($RXJj6) { return $this->insert($RXJj6, __FUNCTION__); } public function after($n3GvS) { return $this->insert($n3GvS, __FUNCTION__); } public function afterPHP($n3GvS) { return $this->insert("<php><!-- {$n3GvS} --></php>", 'after'); } public function insertAfter($RXJj6) { return $this->insert($RXJj6, __FUNCTION__); } public function insert($j9JOt, $mhShF) { goto lRYdx; iz437: foreach ($zliMg as $Adp9W => $m4A9b) { switch ($mhShF) { case 'prependTo': case 'prepend': $j63CD = $m4A9b->firstChild; break; case 'insertAfter': case 'after': $wZgWp = $m4A9b->nextSibling; break; } foreach ($OGnXa as $GQYrv) { goto doILM; TZpPx: $MU9DT = new DOMEvent(array('target' => $WQMwA, 'type' => 'DOMNodeInserted')); goto Re3pr; doILM: $WQMwA = $Adp9W ? $GQYrv->cloneNode(true) : $GQYrv; goto OkjTQ; Re3pr: phpQueryEvents::trigger($this->getDocumentID(), $MU9DT->type, array($MU9DT), $WQMwA); goto LRGL3; OkjTQ: switch ($mhShF) { case 'appendTo': case 'append': goto dDvmx; mqmLN: $Ph0EH = $WQMwA; goto nlIyx; nlIyx: break; goto CnCoX; dDvmx: $m4A9b->appendChild($WQMwA); goto mqmLN; CnCoX: case 'prependTo': case 'prepend': $m4A9b->insertBefore($WQMwA, $j63CD); break; case 'insertBefore': case 'before': if (!$m4A9b->parentNode) { throw new Exception("No parentNode, can't do {$mhShF}()"); } else { $m4A9b->parentNode->insertBefore($WQMwA, $m4A9b); } break; case 'insertAfter': case 'after': if (!$m4A9b->parentNode) { throw new Exception("No parentNode, can't do {$mhShF}()"); } else { $m4A9b->parentNode->insertBefore($WQMwA, $wZgWp); } break; } goto TZpPx; LRGL3: } } goto gALvb; v6SFK: $urmV5 = false; goto vl_8l; gALvb: return $this; goto BsEO7; vl_8l: switch ($mhShF) { case 'appendTo': case 'prependTo': case 'insertBefore': case 'insertAfter': $urmV5 = true; } goto XrfEv; XrfEv: switch (gettype($j9JOt)) { case 'string': goto HaO1L; HaO1L: $OGnXa = $zliMg = array(); goto jRMy9; jRMy9: if ($urmV5) { $OGnXa = $this->elements; if (phpQuery::isMarkup($j9JOt)) { $zliMg = $this->documentWrapper->import($j9JOt); } else { goto I8nAS; LFs0_: $this->toRoot(); goto evWRL; I8nAS: $np6WE = $this->elements; goto LFs0_; o2Q_1: $this->elements = $np6WE; goto yLiyB; evWRL: $zliMg = $this->find($j9JOt)->elements; goto o2Q_1; yLiyB: } } else { $zliMg = $this->elements; $OGnXa = $this->documentWrapper->import($j9JOt); } goto tnTuk; tnTuk: break; goto F95r1; F95r1: case 'object': goto i4beA; a0Ssl: if ($j9JOt instanceof self) { if ($urmV5) { goto nv35h; b7cDv: if ($this->documentFragment && $this->stackIsRoot()) { $hK5j3 = $this->root->childNodes; } else { $hK5j3 = $this->elements; } goto M1x12; nv35h: $zliMg = $j9JOt->elements; goto b7cDv; M1x12: $OGnXa = $this->getDocumentID() == $j9JOt->getDocumentID() ? $hK5j3 : $j9JOt->documentWrapper->import($hK5j3); goto Nf8_z; Nf8_z: } else { goto DKfgB; DKfgB: $zliMg = $this->elements; goto ldryT; X7fjS: $OGnXa = $this->getDocumentID() == $j9JOt->getDocumentID() ? $hK5j3 : $this->documentWrapper->import($hK5j3); goto vqK6N; ldryT: if ($j9JOt->documentFragment && $j9JOt->stackIsRoot()) { $hK5j3 = $j9JOt->root->childNodes; } else { $hK5j3 = $j9JOt->elements; } goto X7fjS; vqK6N: } } elseif ($j9JOt instanceof DOMNODE) { if ($urmV5) { goto jj0Bl; kV_RW: foreach ($hK5j3 as $GQYrv) { $OGnXa[] = !$GQYrv->ownerDocument->isSameNode($j9JOt->ownerDocument) ? $j9JOt->ownerDocument->importNode($GQYrv, true) : $GQYrv; } goto rr8Kj; jj0Bl: $zliMg = array($j9JOt); goto i4iD3; i4iD3: if ($this->documentFragment && $this->stackIsRoot()) { $hK5j3 = $this->root->childNodes; } else { $hK5j3 = $this->elements; } goto kV_RW; rr8Kj: } else { goto qmZR7; FIDC5: $zliMg = $this->elements; goto tePDw; tePDw: $OGnXa[] = $j9JOt; goto EGP58; qmZR7: if (!$j9JOt->ownerDocument->isSameNode($this->document)) { $j9JOt = $this->document->importNode($j9JOt, true); } goto FIDC5; EGP58: } } goto C5lYg; i4beA: $OGnXa = $zliMg = array(); goto a0Ssl; C5lYg: break; goto RprsY; RprsY: } goto cA67k; lRYdx: $this->debug("Inserting data with '{$mhShF}'"); goto v6SFK; cA67k: phpQuery::debug('From ' . count($OGnXa) . '; To ' . count($zliMg) . ' nodes'); goto iz437; BsEO7: } public function index($UeeeP) { goto XbWYY; XbWYY: $oPu4k = -1; goto XqFx1; oPPOL: return $oPu4k; goto XqAM8; XqFx1: $UeeeP = $UeeeP instanceof phpQueryObject ? $UeeeP->elements[0] : $UeeeP; goto wjLX0; wjLX0: foreach ($this->newInstance() as $U8G_W => $Z18mB) { if ($Z18mB->isSameNode($UeeeP)) { $oPu4k = $U8G_W; } } goto oPPOL; XqAM8: } public function slice($x5GcS, $jm3aC = null) { if ($jm3aC > 0) { $jm3aC = $jm3aC - $x5GcS; } return $this->newInstance(array_slice($this->elements, $x5GcS, $jm3aC)); } public function reverse() { goto xM8_5; hMuVY: return $this->newInstance(); goto b1fZK; WEtTG: $this->elements = array_reverse($this->elements); goto hMuVY; xM8_5: $this->elementsBackup = $this->elements; goto WEtTG; b1fZK: } public function text($me7IX = null, $pqqqk = null, $s8vZz = null, $At4Ac = null) { goto NvNhY; yW6PQ: foreach ($this->elements as $Z18mB) { goto T_TPq; E8D2w: if (count($this->elements) > 1 && $me7IX) { $me7IX .= '
'; } goto I2zIL; T_TPq: $me7IX = $Z18mB->textContent; goto E8D2w; I2zIL: foreach ($wovD1 as $oZLCv) { $me7IX = phpQuery::callbackRun($oZLCv, array($me7IX)); } goto NX9nb; NX9nb: $F8OxY .= $me7IX; goto kpVEk; kpVEk: } goto BoxlE; vsae6: $wovD1 = array_slice($wovD1, 1); goto monND; BoxlE: return $F8OxY; goto JhdOm; monND: $F8OxY = ''; goto yW6PQ; mYXOi: $wovD1 = func_get_args(); goto vsae6; NvNhY: if (isset($me7IX)) { return $this->html(htmlspecialchars($me7IX)); } goto mYXOi; JhdOm: } public function plugin($xG9xx, $n8fWJ = null) { phpQuery::plugin($xG9xx, $n8fWJ); return $this; } public static function extend($xG9xx, $n8fWJ = null) { return $this->plugin($xG9xx, $n8fWJ); } public function __call($UR3Zf, $wovD1) { $QTh28 = array('clone', 'empty'); if (isset(phpQuery::$extendMethods[$UR3Zf])) { array_unshift($wovD1, $this); return phpQuery::callbackRun(phpQuery::$extendMethods[$UR3Zf], $wovD1); } else { if (isset(phpQuery::$pluginsMethods[$UR3Zf])) { goto fS8sl; utlzE: $F8OxY = call_user_func_array(array($Zzx2M, $UR3Zf), $wovD1); goto mmACH; fS8sl: array_unshift($wovD1, $this); goto jYh8B; hHhro: $Zzx2M = "phpQueryObjectPlugin_{$xG9xx}"; goto utlzE; mmACH: return is_null($F8OxY) ? $this : $F8OxY; goto MLi9A; jYh8B: $xG9xx = phpQuery::$pluginsMethods[$UR3Zf]; goto hHhro; MLi9A: } else { if (in_array($UR3Zf, $QTh28)) { return call_user_func_array(array($this, '_' . $UR3Zf), $wovD1); } else { throw new Exception("Method '{$UR3Zf}' doesnt exist"); } } } } public function _next($RD3uk = null) { return $this->newInstance($this->getElementSiblings('nextSibling', $RD3uk, true)); } public function _prev($RD3uk = null) { return $this->prev($RD3uk); } public function prev($RD3uk = null) { return $this->newInstance($this->getElementSiblings('previousSibling', $RD3uk, true)); } public function prevAll($RD3uk = null) { return $this->newInstance($this->getElementSiblings('previousSibling', $RD3uk)); } public function nextAll($RD3uk = null) { return $this->newInstance($this->getElementSiblings('nextSibling', $RD3uk)); } protected function getElementSiblings($gVYyu, $RD3uk = null, $RGCoB = false) { goto r8P9x; r8P9x: $BCxIH = array(); goto l2b2f; btjeu: if ($RD3uk) { goto gMwGO; oAnCl: $this->elements = $hL8zb; goto vtFJm; gMwGO: $hL8zb = $this->elements; goto MUX1I; MUX1I: $this->elements = $BCxIH; goto S_LvR; S_LvR: $BCxIH = $this->filter($RD3uk, true)->stack(); goto oAnCl; vtFJm: } goto whsf_; whsf_: return $BCxIH; goto SQqZg; l2b2f: $bWr4T = 0; goto PCG5P; PCG5P: foreach ($this->stack() as $Z18mB) { $CDWs8 = $Z18mB; while (isset($CDWs8->{$gVYyu}) && $CDWs8->{$gVYyu}) { $CDWs8 = $CDWs8->{$gVYyu}; if (!$CDWs8 instanceof DOMELEMENT) { continue; } $BCxIH[] = $CDWs8; if ($RGCoB) { break; } } } goto btjeu; SQqZg: } public function siblings($RD3uk = null) { goto gYgnj; Er0m4: $mZYuz = array_merge($this->getElementSiblings('previousSibling', $RD3uk), $this->getElementSiblings('nextSibling', $RD3uk)); goto rq3zE; gYgnj: $BCxIH = array(); goto Er0m4; rq3zE: foreach ($mZYuz as $Z18mB) { if (!$this->elementsContainsNode($Z18mB, $BCxIH)) { $BCxIH[] = $Z18mB; } } goto jphtx; jphtx: return $this->newInstance($BCxIH); goto iBsIu; iBsIu: } public function not($RD3uk = null) { goto juMVz; ihX73: return $this->newInstance($BCxIH); goto Qp3aQ; juMVz: if (is_string($RD3uk)) { phpQuery::debug(array('not', $RD3uk)); } else { phpQuery::debug('not'); } goto kwtwA; kwtwA: $BCxIH = array(); goto MYcRW; MYcRW: if ($RD3uk instanceof self || $RD3uk instanceof DOMNODE) { foreach ($this->stack() as $Z18mB) { if ($RD3uk instanceof self) { goto m0pgp; m0pgp: $JaexS = false; goto FzeQR; FzeQR: foreach ($RD3uk->stack() as $ethYb) { if ($ethYb->isSameNode($Z18mB)) { $JaexS = true; } } goto aaWiw; aaWiw: if (!$JaexS) { $BCxIH[] = $Z18mB; } goto p4G78; p4G78: } else { if ($RD3uk instanceof DOMNODE) { if (!$RD3uk->isSameNode($Z18mB)) { $BCxIH[] = $Z18mB; } } else { if (!$this->is($RD3uk)) { $BCxIH[] = $Z18mB; } } } } } else { goto xDris; jirEy: foreach ($ky3fC as $Z18mB) { if (!$this->elementsContainsNode($Z18mB, $VZtm4)) { $BCxIH[] = $Z18mB; } } goto WRPsU; xDris: $ky3fC = $this->stack(); goto RHn0e; RHn0e: $VZtm4 = $this->filter($RD3uk, true)->stack(); goto jirEy; WRPsU: } goto ihX73; Qp3aQ: } public function add($RD3uk = null) { goto eHUX6; Rmn80: $BCxIH = array(); goto fVMh6; Tnq0t: return $this->newInstance(); goto Q74r9; fVMh6: $this->elementsBackup = $this->elements; goto f2jHo; f2jHo: $wC6g2 = phpQuery::pq($RD3uk, $this->getDocumentID()); goto PXA2N; eHUX6: if (!$RD3uk) { return $this; } goto Rmn80; PXA2N: $this->merge($wC6g2->elements); goto Tnq0t; Q74r9: } protected function merge() { foreach (func_get_args() as $IveoN) { foreach ($IveoN as $uM1N1) { if (!$this->elementsContainsNode($uM1N1)) { $this->elements[] = $uM1N1; } } } } protected function elementsContainsNode($KcojW, $xfEVu = null) { goto RkizM; aCHV3: foreach ($hK5j3 as $Z18mB) { if ($Z18mB->isSameNode($KcojW)) { return true; } } goto YSxv2; YSxv2: return false; goto oea5u; RkizM: $hK5j3 = !is_null($xfEVu) ? $xfEVu : $this->elements; goto aCHV3; oea5u: } public function parent($RD3uk = null) { goto vnVdb; IMSJB: return $this->newInstance(); goto t0ftK; hz7l8: foreach ($this->elements as $Z18mB) { if ($Z18mB->parentNode && !$this->elementsContainsNode($Z18mB->parentNode, $BCxIH)) { $BCxIH[] = $Z18mB->parentNode; } } goto HKLtu; HKLtu: $this->elementsBackup = $this->elements; goto qZ9Ak; vnVdb: $BCxIH = array(); goto hz7l8; vtsYA: if ($RD3uk) { $this->filter($RD3uk, true); } goto IMSJB; qZ9Ak: $this->elements = $BCxIH; goto vtsYA; t0ftK: } public function parents($RD3uk = null) { goto F_d25; F_d25: $BCxIH = array(); goto G5CGc; AZsf_: if ($RD3uk) { $this->filter($RD3uk, true); } goto ZtaHT; ZtaHT: return $this->newInstance(); goto q2X5z; H0mhD: $this->elementsBackup = $this->elements; goto vj_dR; G5CGc: if (!$this->elements) { $this->debug('parents() - stack empty'); } goto egTqk; egTqk: foreach ($this->elements as $Z18mB) { $CDWs8 = $Z18mB; while ($CDWs8->parentNode) { $CDWs8 = $CDWs8->parentNode; if ($this->isRoot($CDWs8)) { break; } if (!$this->elementsContainsNode($CDWs8, $BCxIH)) { $BCxIH[] = $CDWs8; continue; } } } goto H0mhD; vj_dR: $this->elements = $BCxIH; goto AZsf_; q2X5z: } public function stack($VsZrC = null) { goto rOcKX; Wfwcu: return $F8OxY; goto TwqcQ; i02UE: foreach ($this->elements as $Z18mB) { if (in_array($Z18mB->nodeType, $VsZrC)) { $F8OxY[] = $Z18mB; } } goto Wfwcu; VAz9H: if (!is_array($VsZrC)) { $VsZrC = array($VsZrC); } goto pjC3l; pjC3l: $F8OxY = array(); goto i02UE; rOcKX: if (!isset($VsZrC)) { return $this->elements; } goto VAz9H; TwqcQ: } protected function attrEvents($CroV9, $Z28Z6, $qUEQS, $Z18mB) { goto OLn8o; OLn8o: if (!$this->isXHTML() && !$this->isHTML()) { return; } goto KaHVC; ajLqj: if ($zxqCC && $CroV9 == 'value' && $qUEQS != $Z18mB->getAttribute($CroV9)) { $MU9DT = new DOMEvent(array('target' => $Z18mB, 'type' => 'change')); } else { if (($fFr0x || $d_mV0) && $CroV9 == 'checked' && (!$Z28Z6 && $Z18mB->hasAttribute($CroV9) || !$Z18mB->hasAttribute($CroV9) && $Z28Z6)) { $MU9DT = new DOMEvent(array('target' => $Z18mB, 'type' => 'change')); } else { if ($JiCBC && $Z18mB->parentNode && $CroV9 == 'selected' && (!$Z28Z6 && $Z18mB->hasAttribute($CroV9) || !$Z18mB->hasAttribute($CroV9) && $Z28Z6)) { $MU9DT = new DOMEvent(array('target' => $Z18mB->parentNode, 'type' => 'change')); } } } goto kbjtm; Wiy1E: $zxqCC = $Z18mB->tagName == 'input' && (in_array($Z18mB->getAttribute('type'), array('text', 'password', 'hidden')) || !$Z18mB->getAttribute('type')); goto M1Mw7; KaHVC: $MU9DT = null; goto Wiy1E; M1Mw7: $fFr0x = $Z18mB->tagName == 'input' && $Z18mB->getAttribute('type') == 'radio'; goto LaiCb; kbjtm: if ($MU9DT) { phpQueryEvents::trigger($this->getDocumentID(), $MU9DT->type, array($MU9DT), $Z18mB); } goto vZYQP; cMkIR: $JiCBC = $Z18mB->tagName == 'option'; goto ajLqj; LaiCb: $d_mV0 = $Z18mB->tagName == 'input' && $Z18mB->getAttribute('type') == 'checkbox'; goto cMkIR; vZYQP: } public function attr($CroV9 = null, $qTz8C = null) { foreach ($this->stack(1) as $Z18mB) { if (!is_null($qTz8C)) { $hK5j3 = $CroV9 == '*' ? $this->getNodeAttrs($Z18mB) : array($CroV9); foreach ($hK5j3 as $EnX8D) { goto ltnLF; bQQul: $Z28Z6 = $Z18mB->hasAttribute($EnX8D); goto RbsSv; RbsSv: @$Z18mB->setAttribute($EnX8D, $qTz8C); goto hoKFU; ltnLF: $qUEQS = $Z18mB->getAttribute($EnX8D); goto bQQul; hoKFU: $this->attrEvents($EnX8D, $Z28Z6, $qUEQS, $Z18mB); goto c8ekt; c8ekt: } } else { if ($CroV9 == '*') { goto Y2GLn; Y2GLn: $F8OxY = array(); goto Lqr20; B0nnS: return $F8OxY; goto DwzAI; Lqr20: foreach ($Z18mB->attributes as $JJpPS => $gghxW) { $F8OxY[$JJpPS] = $gghxW->value; } goto B0nnS; DwzAI: } else { return $Z18mB->hasAttribute($CroV9) ? $Z18mB->getAttribute($CroV9) : null; } } } return is_null($qTz8C) ? '' : $this; } protected function getNodeAttrs($Z18mB) { goto KCld1; Bypcx: foreach ($Z18mB->attributes as $JJpPS => $ZOvGj) { $F8OxY[] = $JJpPS; } goto f_4rh; KCld1: $F8OxY = array(); goto Bypcx; f_4rh: return $F8OxY; goto okVff; okVff: } public function attrPHP($CroV9, $fKl3n) { goto X19H9; X19H9: if (!is_null($fKl3n)) { $qTz8C = '<' . '?php ' . $fKl3n . ' ?' . '>'; } goto calPX; aME5g: return $this; goto OBDtf; calPX: foreach ($this->stack(1) as $Z18mB) { if (!is_null($fKl3n)) { $Z18mB->setAttribute($CroV9, $qTz8C); } else { if ($CroV9 == '*') { goto q5CGi; rSbDa: foreach ($Z18mB->attributes as $JJpPS => $gghxW) { $F8OxY[$JJpPS] = $gghxW->value; } goto IgXgs; q5CGi: $F8OxY = array(); goto rSbDa; IgXgs: return $F8OxY; goto axNOJ; axNOJ: } else { return $Z18mB->getAttribute($CroV9); } } } goto aME5g; OBDtf: } public function removeAttr($CroV9) { foreach ($this->stack(1) as $Z18mB) { $hK5j3 = $CroV9 == '*' ? $this->getNodeAttrs($Z18mB) : array($CroV9); foreach ($hK5j3 as $EnX8D) { goto Ubmfy; gByly: $this->attrEvents($EnX8D, $qUEQS, null, $Z18mB); goto cHu8F; Ubmfy: $qUEQS = $Z18mB->getAttribute($EnX8D); goto s_7fL; s_7fL: $Z18mB->removeAttribute($EnX8D); goto gByly; cHu8F: } } return $this; } public function val($y7pq9 = null) { if (!isset($y7pq9)) { if ($this->eq(0)->is('select')) { $AOl4E = $this->eq(0)->find('option[selected=selected]'); if ($AOl4E->is('[value]')) { return $AOl4E->attr('value'); } else { return $AOl4E->text(); } } else { if ($this->eq(0)->is('textarea')) { return $this->eq(0)->markup(); } else { return $this->eq(0)->attr('value'); } } } else { $PqUX0 = null; foreach ($this->stack(1) as $Z18mB) { $Z18mB = pq($Z18mB, $this->getDocumentID()); if (is_array($y7pq9) && in_array($Z18mB->attr('type'), array('checkbox', 'radio'))) { $OskxS = in_array($Z18mB->attr('value'), $y7pq9) || in_array($Z18mB->attr('name'), $y7pq9); if ($OskxS) { $Z18mB->attr('checked', 'checked'); } else { $Z18mB->removeAttr('checked'); } } else { if ($Z18mB->get(0)->tagName == 'select') { if (!isset($PqUX0)) { $PqUX0 = array(); if (!is_array($y7pq9)) { $PqUX0 = array((string) $y7pq9); } else { foreach ($y7pq9 as $gghxW) { $PqUX0[] = $gghxW; } } } foreach ($Z18mB['option']->stack(1) as $cD48i) { goto TfQRL; gMOYG: $AOl4E = false; goto ROjdj; TfQRL: $cD48i = pq($cD48i, $this->getDocumentID()); goto gMOYG; fZA_a: if ($AOl4E) { $cD48i->attr('selected', 'selected'); } else { $cD48i->removeAttr('selected'); } goto TGghU; ROjdj: $AOl4E = is_null($cD48i->attr('value')) ? in_array($cD48i->markup(), $PqUX0) : in_array($cD48i->attr('value'), $PqUX0); goto fZA_a; TGghU: } } else { if ($Z18mB->get(0)->tagName == 'textarea') { $Z18mB->markup($y7pq9); } else { $Z18mB->attr('value', $y7pq9); } } } } } return $this; } public function andSelf() { if ($this->previous) { $this->elements = array_merge($this->elements, $this->previous->elements); } return $this; } public function addClass($pRAgv) { goto eNoBV; eNoBV: if (!$pRAgv) { return $this; } goto V6LHk; V6LHk: foreach ($this->stack(1) as $Z18mB) { if (!$this->is(".{$pRAgv}", $Z18mB)) { $Z18mB->setAttribute('class', trim($Z18mB->getAttribute('class') . ' ' . $pRAgv)); } } goto P42Pb; P42Pb: return $this; goto bfXkW; bfXkW: } public function addClassPHP($pRAgv) { foreach ($this->stack(1) as $Z18mB) { goto G1Tnl; H5oqt: $Z18mB->setAttribute('class', $t1kDi); goto dRGW6; G1Tnl: $FqVlz = $Z18mB->getAttribute('class'); goto WWUdV; WWUdV: $t1kDi = $FqVlz ? $FqVlz . ' <' . '?php ' . $pRAgv . ' ?' . '>' : '<' . '?php ' . $pRAgv . ' ?' . '>'; goto H5oqt; dRGW6: } return $this; } public function hasClass($pRAgv) { foreach ($this->stack(1) as $Z18mB) { if ($this->is(".{$pRAgv}", $Z18mB)) { return true; } } return false; } public function removeClass($pRAgv) { foreach ($this->stack(1) as $Z18mB) { $FqVlz = explode(' ', $Z18mB->getAttribute('class')); if (in_array($pRAgv, $FqVlz)) { $FqVlz = array_diff($FqVlz, array($pRAgv)); if ($FqVlz) { $Z18mB->setAttribute('class', implode(' ', $FqVlz)); } else { $Z18mB->removeAttribute('class'); } } } return $this; } public function toggleClass($pRAgv) { foreach ($this->stack(1) as $Z18mB) { if ($this->is($Z18mB, '.' . $pRAgv)) { $this->removeClass($pRAgv); } else { $this->addClass($pRAgv); } } return $this; } public function _empty() { foreach ($this->stack(1) as $Z18mB) { $Z18mB->nodeValue = ''; } return $this; } public function each($oZLCv, $GZ0ou = null, $KqVai = null, $uQl4E = null) { goto TcwWG; xp5r8: if (func_num_args() > 1) { $iW9y9 = func_get_args(); $iW9y9 = array_slice($iW9y9, 1); } goto QnXfq; MEbU5: return $this; goto oBZKo; TcwWG: $iW9y9 = null; goto xp5r8; QnXfq: foreach ($this->elements as $gghxW) { phpQuery::callbackRun($oZLCv, array($gghxW), $iW9y9); } goto MEbU5; oBZKo: } public function callback($oZLCv, $GZ0ou = null, $KqVai = null, $uQl4E = null) { goto u8qjC; irxWO: $dAwYz[0] = $this; goto jnCwU; jnCwU: phpQuery::callbackRun($oZLCv, $dAwYz); goto jnOme; jnOme: return $this; goto paK6g; u8qjC: $dAwYz = func_get_args(); goto irxWO; paK6g: } public function map($oZLCv, $GZ0ou = null, $KqVai = null, $uQl4E = null) { goto FcHvu; FcHvu: $dAwYz = func_get_args(); goto GQmNW; gg4NE: return $this->newInstance(call_user_func_array(array('phpQuery', 'map'), $dAwYz)); goto WajX9; GQmNW: array_unshift($dAwYz, $this->elements); goto gg4NE; WajX9: } public function data($Cc2wA, $qTz8C = null) { if (!isset($qTz8C)) { return phpQuery::data($this->get(0), $Cc2wA, $qTz8C, $this->getDocumentID()); } else { foreach ($this as $Z18mB) { phpQuery::data($Z18mB, $Cc2wA, $qTz8C, $this->getDocumentID()); } return $this; } } public function removeData($Cc2wA) { foreach ($this as $Z18mB) { phpQuery::removeData($Z18mB, $Cc2wA, $this->getDocumentID()); } return $this; } public function rewind() { goto soMyr; QjE4u: $this->elementsInterator = $this->elements; goto FUoSZ; soMyr: $this->debug('iterating foreach'); goto C4xm8; C4xm8: $this->elementsBackup = $this->elements; goto QjE4u; Vh56a: $this->current = 0; goto CjArf; FUoSZ: $this->valid = isset($this->elements[0]) ? 1 : 0; goto Vh56a; CjArf: } public function current() { return $this->elementsInterator[$this->current]; } public function key() { return $this->current; } public function next($KJfE2 = null) { $this->valid = isset($this->elementsInterator[$this->current + 1]) ? true : false; if (!$this->valid && $this->elementsInterator) { $this->elementsInterator = null; } else { if ($this->valid) { $this->current++; } else { return $this->_next($KJfE2); } } } public function valid() { return $this->valid; } public function offsetExists($kxIuL) { return $this->find($kxIuL)->size() > 0; } public function offsetGet($kxIuL) { return $this->find($kxIuL); } public function offsetSet($kxIuL, $qTz8C) { $this->find($kxIuL)->html($qTz8C); } public function offsetUnset($kxIuL) { throw new Exception('Can\'t do unset, use array interface only for calling queries and replacing HTML.'); } protected function getNodeXpath($aiQ0f = null, $dWBd0 = null) { goto jD6hr; spUN5: return $aiQ0f ? $F8OxY[0] : $F8OxY; goto Tc9u7; jD6hr: $F8OxY = array(); goto IL_70; Yz6KZ: foreach ($hK5j3 as $Z18mB) { goto cY6yF; cY6yF: if ($Z18mB instanceof DOMDOCUMENT) { $F8OxY[] = ''; continue; } goto Rn10G; Rn10G: $OYY_X = array(); goto m5XMO; hD38E: $F8OxY[] = '/' . $OYY_X; goto Kq4fP; a7gd9: $OYY_X = join('/', array_reverse($OYY_X)); goto hD38E; m5XMO: while (!$Z18mB instanceof DOMDOCUMENT) { $k8Rwr = 1; $pHj5G = $Z18mB; while ($pHj5G->previousSibling) { $pHj5G = $pHj5G->previousSibling; $xI9BQ = $pHj5G instanceof DOMELEMENT; if ($xI9BQ && $pHj5G->tagName == $Z18mB->tagName) { $k8Rwr++; } } $OYY_X[] = $this->isXML() ? "*[local-name()='{$Z18mB->tagName}'][{$k8Rwr}]" : "{$Z18mB->tagName}[{$k8Rwr}]"; $Z18mB = $Z18mB->parentNode; } goto a7gd9; Kq4fP: } goto spUN5; IL_70: $hK5j3 = $aiQ0f ? array($aiQ0f) : $this->elements; goto Yz6KZ; Tc9u7: } public function whois($aiQ0f = null) { goto BeBy2; BeBy2: $F8OxY = array(); goto GgAgS; GgAgS: $hK5j3 = $aiQ0f ? array($aiQ0f) : $this->elements; goto wHfwn; wHfwn: foreach ($hK5j3 as $Z18mB) { if (isset($Z18mB->tagName)) { $YH4uq = in_array($Z18mB->tagName, array('php', 'js')) ? strtoupper($Z18mB->tagName) : $Z18mB->tagName; $F8OxY[] = $YH4uq . ($Z18mB->getAttribute('id') ? '#' . $Z18mB->getAttribute('id') : '') . ($Z18mB->getAttribute('class') ? '.' . join('.', split(' ', $Z18mB->getAttribute('class'))) : '') . ($Z18mB->getAttribute('name') ? '[name="' . $Z18mB->getAttribute('name') . '"]' : '') . ($Z18mB->getAttribute('value') && strpos($Z18mB->getAttribute('value'), '<' . '?php') === false ? '[value="' . substr(str_replace('
', '', $Z18mB->getAttribute('value')), 0, 15) . '"]' : '') . ($Z18mB->getAttribute('value') && strpos($Z18mB->getAttribute('value'), '<' . '?php') !== false ? '[value=PHP]' : '') . ($Z18mB->getAttribute('selected') ? '[selected]' : '') . ($Z18mB->getAttribute('checked') ? '[checked]' : ''); } else { if ($Z18mB instanceof DOMTEXT) { if (trim($Z18mB->textContent)) { $F8OxY[] = 'Text:' . substr(str_replace('
', ' ', $Z18mB->textContent), 0, 15); } } else { } } } goto T_2mz; T_2mz: return $aiQ0f && isset($F8OxY[0]) ? $F8OxY[0] : $F8OxY; goto flKbx; flKbx: } public function dump() { goto eepVC; eepVC: print 'DUMP #' . phpQuery::$dumpCount++ . ' '; goto ElUoS; rp05B: return $this; goto avo2v; sg3tO: var_dump($this->htmlOuter()); goto rp05B; pUXj_: phpQuery::$debug = false; goto sg3tO; ElUoS: $PgaoQ = phpQuery::$debug; goto pUXj_; avo2v: } public function dumpWhois() { goto ZkNJP; s4Kza: return $this; goto NhCxm; WGdx8: $PgaoQ = phpQuery::$debug; goto ixBGu; SDP_D: phpQuery::$debug = $PgaoQ; goto s4Kza; ZkNJP: print 'DUMP #' . phpQuery::$dumpCount++ . ' '; goto WGdx8; ixBGu: phpQuery::$debug = false; goto CE0Ox; CE0Ox: var_dump('whois', $this->whois()); goto SDP_D; NhCxm: } public function dumpLength() { goto ixtD6; ixtD6: print 'DUMP #' . phpQuery::$dumpCount++ . ' '; goto D2CLK; M98TM: phpQuery::$debug = $PgaoQ; goto M7eNT; HznN6: var_dump('length', $this->length()); goto M98TM; D2CLK: $PgaoQ = phpQuery::$debug; goto FKb4q; FKb4q: phpQuery::$debug = false; goto HznN6; M7eNT: return $this; goto nNXNy; nNXNy: } public function dumpTree($ZpNyF = true, $xy3eh = true) { goto YavQi; oypII: phpQuery::$debug = false; goto TvRsg; TvRsg: foreach ($this->stack() as $Z18mB) { $pkbsE .= $this->__dumpTree($Z18mB); } goto oHtJM; YavQi: $pkbsE = $xy3eh ? 'DUMP #' . phpQuery::$dumpCount++ . ' 
' : ''; goto D078C; XNOfb: return $this; goto dMYWi; oHtJM: phpQuery::$debug = $PgaoQ; goto GWFDm; D078C: $PgaoQ = phpQuery::$debug; goto oypII; GWFDm: print $ZpNyF ? nl2br(str_replace(' ', '&nbsp;', $pkbsE)) : $pkbsE; goto XNOfb; dMYWi: } private function __dumpTree($Z18mB, $KE32C = 0) { goto aGIcG; JQpxz: if ($KGFwH) { $F8OxY .= str_repeat(' - ', $KE32C) . $KGFwH . '
'; } goto Hh7y8; EnBbM: $F8OxY = ''; goto JQpxz; Hh7y8: if (isset($Z18mB->childNodes)) { foreach ($Z18mB->childNodes as $hAWqI) { $F8OxY .= $this->__dumpTree($hAWqI, $KE32C + 1); } } goto qujj1; aGIcG: $KGFwH = $this->whois($Z18mB); goto EnBbM; qujj1: return $F8OxY; goto zJFH0; zJFH0: } public function dumpDie() { goto b7lV8; GRxSt: var_dump($this->htmlOuter()); goto sadL_; sadL_: die; goto U_oFG; b7lV8: print __FILE__ . ':' . __LINE__; goto GRxSt; U_oFG: } } goto r2Qyd; U6iDq: if (!function_exists('mb_strpos')) { function mb_strpos($YNrl_, $feSGz, $kxIuL = 0) { return strpos($YNrl_, $feSGz, $kxIuL); } } goto zk2Dj; BhcbK: define('DOMNODELIST', 'DOMNodeList'); goto g0J1A; Ca1p4: class CallbackParameterToReference extends Callback { public function __construct(&$ca6T9) { $this->callback =& $ca6T9; } } goto Aelbw; qHEHm: class CallbackReturnValue extends Callback implements ICallbackNamed { protected $value; protected $name; public function __construct($qTz8C, $rfBQu = null) { goto PTgKX; PTgKX: $this->value =& $qTz8C; goto gA_AJ; pm8Qw: $this->callback = array($this, 'callback'); goto m7A_Y; gA_AJ: $this->name = $rfBQu; goto pm8Qw; m7A_Y: } public function callback() { return $this->value; } public function __toString() { return $this->getName(); } public function getName() { return 'Callback: ' . $this->name; } public function hasName() { return isset($this->name) && $this->name; } } goto Ca1p4; tU5JK: phpQuery::$plugins = new phpQueryPlugins(); goto BCwpN; DN_3C: class DOMEvent { public $bubbles = true; public $cancelable = true; public $currentTarget; public $detail; public $eventPhase; public $explicitOriginalTarget; public $originalTarget; public $relatedTarget; public $target; public $timeStamp; public $type; public $runDefault = true; public $data = null; public function __construct($XWlC_) { foreach ($XWlC_ as $U8G_W => $gghxW) { $this->{$U8G_W} = $gghxW; } if (!$this->timeStamp) { $this->timeStamp = time(); } } public function preventDefault() { $this->runDefault = false; } public function stopPropagation() { $this->bubbles = false; } } goto gKxRr; A9YQk: class CallbackBody extends Callback { public function __construct($oo0AD, $fKl3n, $GZ0ou = null, $KqVai = null, $uQl4E = null) { goto sSUp7; jSR1m: $this->callback = create_function($oo0AD, $fKl3n); goto s2563; prq3N: $dAwYz = array_slice($dAwYz, 2); goto jSR1m; sSUp7: $dAwYz = func_get_args(); goto prq3N; s2563: $this->params = $dAwYz; goto QW3yZ; QW3yZ: } } goto DLWxg; LJS9y: define('DOMELEMENT', 'DOMElement'); goto BhcbK; fY8VT: if (!function_exists('mb_regex_encoding')) { function mb_regex_encoding($IdGNN) { return true; } } goto KSi50; BCwpN: if (file_exists(dirname(__FILE__) . '/phpQuery/bootstrap.php')) { require_once dirname(__FILE__) . '/phpQuery/bootstrap.php'; }