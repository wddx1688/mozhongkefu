<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace ModStart\Layout; use Closure; use Illuminate\Contracts\Support\Renderable; use ModStart\Core\Input\Request; use ModStart\Form\Form; use ModStart\Grid\Grid; class Page implements Renderable { private $pageTitle = ' '; private $pageKeywords = ''; private $pageDescription = ''; private $rows = array(); protected $view; private $viewData = array(); public function __construct(\Closure $k_TMY = null) { if ($k_TMY instanceof Closure) { $k_TMY($this); } } public function body($N19iJ) { return $this->row($N19iJ); } public function row($N19iJ) { if ($N19iJ instanceof Closure) { goto JvaEd; DzqcM: $this->addRow($BnPIe); goto nNl_q; JvaEd: $BnPIe = new Row(); goto daUM4; daUM4: call_user_func($N19iJ, $BnPIe); goto DzqcM; nNl_q: } else { $this->addRow(new Row($N19iJ)); } return $this; } public function append($N19iJ) { $this->rows[] = $N19iJ; return $this; } public function view($de9hK = null) { goto Dr2iu; Uw4Nr: return $this; goto Jeq7S; Dr2iu: if (null === $de9hK) { return $this->view; } goto kjG4N; kjG4N: $this->view = $de9hK; goto Uw4Nr; Jeq7S: } public function putViewData($V_y59, $VuXfH = null) { if (is_array($V_y59)) { $this->viewData = array_merge($this->viewData, $V_y59); } else { $this->viewData[$V_y59] = $VuXfH; } return $this; } public function pageTitle($QKZDs = null) { goto zl6cd; zl6cd: if (null === $QKZDs) { return $this->pageTitle; } goto cggVw; cggVw: $this->pageTitle = $QKZDs; goto xtlU7; xtlU7: return $this; goto YhPF7; YhPF7: } public function pageKeywords($nbeNE = null) { goto Nwqf_; uPu57: $this->pageKeywords = $nbeNE; goto DaejD; Nwqf_: if (null === $nbeNE) { if (empty($this->pageKeywords)) { return $this->pageTitle(); } return $this->pageKeywords; } goto uPu57; DaejD: return $this; goto xIv8T; xIv8T: } public function pageDescription($rWlpn = null) { goto UkYfa; tdTSp: $this->pageDescription = $rWlpn; goto Qhl1D; UkYfa: if (null === $rWlpn) { if (empty($this->pageDescription)) { return $this->pageTitle(); } return $this->pageDescription; } goto tdTSp; Qhl1D: return $this; goto ygS7K; ygS7K: } private function addRow(Row $BnPIe) { $this->rows[] = $BnPIe; } public function build() { goto Dx0UZ; x4qzh: ob_end_clean(); goto P32BS; Dx0UZ: ob_start(); goto DEc9m; P32BS: return $GShz2; goto Qdk01; XY82c: $GShz2 = ob_get_contents(); goto x4qzh; DEc9m: foreach ($this->rows as $BnPIe) { if ($BnPIe instanceof Buildable) { $BnPIe->build(); } else { echo $BnPIe; } } goto XY82c; Qdk01: } public function handleGrid($h7Rk_) { if (Request::isPost()) { return $h7Rk_->request(); } return $this; } public function handleForm($c9K5c, $k_TMY, array $nx179 = null) { if (Request::isPost()) { return $c9K5c->formRequest($k_TMY, $nx179); } return $this; } public function render() { $nx179 = array('pageTitle' => $this->pageTitle(), 'pageKeywords' => $this->pageKeywords(), 'pageDescription' => $this->pageDescription(), 'content' => $this->build()); return view($this->view(), array_merge($nx179, $this->viewData))->render(); } }