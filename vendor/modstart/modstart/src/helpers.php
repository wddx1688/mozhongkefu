<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ use Illuminate\Support\Facades\View; use ModStart\Admin\Config\AdminConfig; use ModStart\Core\Input\Request; use ModStart\Core\Util\SerializeUtil; use ModStart\ModStart; use ModStart\Module\ModuleManager; goto qZDzi; qZDzi: function modstart_version() { return ModStart::$version; } goto DVhdW; DVhdW: function modstart_admin_path($hCl98 = '') { return ucfirst(config('modstart.admin.directory')) . ($hCl98 ? DIRECTORY_SEPARATOR . $hCl98 : $hCl98); } goto jlmAd; MPwEJ: function L($HQ4FM, ...$eBWrF) { goto QKjGR; I4k5N: $jpHML = $HQ4FM; goto PmvQE; qVk_x: if ($T1nkE && null === $ihU90) { goto SN0RT; C1hMA: register_shutdown_function(function () use(&$ihU90, $Z3orD) { ksort($ihU90); file_put_contents($Z3orD, '<?ph' . 'p return ' . var_export($ihU90, true) . ';'); }); goto q_MaB; s6jnw: if (file_exists($Z3orD = storage_path('cache/lang_missing.php'))) { $ihU90 = (require $Z3orD); } goto C1hMA; SN0RT: $ihU90 = array(); goto s6jnw; q_MaB: } goto LxyIY; SIAs2: $r0nrL = ModStart::env(); goto byzUD; oBi8q: $ngjz1 = L_locale(); goto Kcqen; lgZLe: static $ihU90 = null; goto oBi8q; zkH2z: if (empty($ngjz1)) { return $HQ4FM; } goto qVk_x; IsESS: if (!empty($eBWrF)) { return call_user_func_array('sprintf', array_merge(array($HQ4FM), $eBWrF)); } goto EPMKg; byzUD: foreach ($iUHLt as $CeOJi) { if ($r0nrL == 'laravel9') { $D4G8c = trans($CeOJi, array(), $ngjz1); } else { $D4G8c = trans($CeOJi, array(), 'messages', $ngjz1); } if ($D4G8c !== $CeOJi) { goto GxFdl; OrtdB: if (!empty($eBWrF)) { return call_user_func_array('sprintf', array_merge(array($D4G8c), $eBWrF)); } goto HwLca; HwLca: return $D4G8c; goto HOQ2C; GxFdl: if ($T1nkE && isset($ihU90[$jpHML])) { unset($ihU90[$jpHML]); } goto OrtdB; HOQ2C: } } goto zC1nB; Kcqen: if (null === $T1nkE) { $T1nkE = config('modstart.trackMissingLang', false); } goto zkH2z; PmvQE: if (preg_match('/^[a-z0-9]+\\.(.+)$/i', $HQ4FM, $jRzIK)) { array_unshift($iUHLt, $HQ4FM); $jpHML = $jRzIK[1]; } goto SIAs2; EPMKg: return $jpHML; goto vAloF; zC1nB: if ($T1nkE) { $ihU90[$jpHML] = $jpHML; } goto IsESS; QKjGR: static $T1nkE = null; goto lgZLe; VoJXP: $iUHLt = array('base.' . $HQ4FM, 'modstart::base.' . $HQ4FM); goto I4k5N; LxyIY: if ($ngjz1 && isset($UTqoY[$ngjz1][$HQ4FM])) { goto L6XRa; BQFbK: return $UTqoY[$ngjz1][$HQ4FM]; goto RYfh4; L6XRa: if ($T1nkE && isset($ihU90[$HQ4FM])) { unset($ihU90[$HQ4FM]); } goto IrjNj; IrjNj: if (!empty($eBWrF)) { return call_user_func_array('sprintf', array_merge(array($UTqoY[$ngjz1][$HQ4FM]), $eBWrF)); } goto BQFbK; RYfh4: } goto VoJXP; vAloF: } goto eN7tN; VNz5Y: if (!function_exists('array_get')) { function array_get($gw25s, $cANPj, $RsCDD = null) { goto s9KiV; n9JM7: foreach (explode('.', $cANPj) as $Y38bi) { if (!is_array($gw25s) || !array_key_exists($Y38bi, $gw25s)) { return value($RsCDD); } $gw25s = $gw25s[$Y38bi]; } goto AJr1b; I6VUc: if (isset($gw25s[$cANPj])) { return $gw25s[$cANPj]; } goto n9JM7; AJr1b: return $gw25s; goto DUO8B; s9KiV: if (is_null($cANPj)) { return $gw25s; } goto I6VUc; DUO8B: } } goto DJUWA; rB57T: function modstart_config_asset_url($cANPj, $RsCDD = '') { $VuXfH = modstart_config($cANPj, $RsCDD); return \ModStart\Core\Assets\AssetsUtil::fixFull($VuXfH); } goto YScpb; GkUPQ: function modstart_baseurl_active($TB77c, $XChuh = 'active') { goto m5edU; VkSk_: $ikc2A = Request::basePathWithQueries(); goto vGTRN; m5edU: $JqB0M = false; goto VkSk_; vGTRN: if (is_string($TB77c)) { if (!starts_with($TB77c, '/')) { $TB77c = modstart_web_url($TB77c); } if (\ModStart\Core\Util\ReUtil::isWildMatch($TB77c, $ikc2A)) { $JqB0M = true; } } else { if (is_array($TB77c)) { foreach ($TB77c as $DUr2V) { if (!starts_with($DUr2V, '/')) { $DUr2V = modstart_web_url($DUr2V); } if (\ModStart\Core\Util\ReUtil::isWildMatch($DUr2V, $ikc2A)) { $JqB0M = true; break; } } } } goto pDngC; dQIuP: return ''; goto rkaBh; pDngC: if ($JqB0M) { return $XChuh; } goto dQIuP; rkaBh: } goto PF2Wq; t2VHC: function modstart_open_api_url($ikc2A = '') { goto jUzeA; lMlal: return $OFAbu . $ikc2A; goto iRsIt; jUzeA: $OFAbu = config('modstart.openApi.prefix'); goto dJPwC; dJPwC: $OFAbu = config('modstart.subdir') . $OFAbu; goto lMlal; iRsIt: } goto URWcp; PF2Wq: function modstart_action($HQ4FM, $HBWLI = array()) { try { return action($HQ4FM, $HBWLI); } catch (Exception $l8i0J) { return null; } } goto JfrAH; jlmAd: function modstart_admin_url($ikc2A = '', $kKcR8 = array()) { goto t85MU; S643c: return $OFAbu . $ikc2A; goto j1JBo; V7Nsg: $OFAbu = config('modstart.admin.prefix'); goto bMeIy; t85MU: if (!empty($kKcR8)) { $ikc2A = $ikc2A . '?' . http_build_query($kKcR8); } goto V7Nsg; bMeIy: $OFAbu = config('modstart.subdir') . $OFAbu; goto lCIlu; lCIlu: if ('/' != $OFAbu) { $OFAbu .= '/'; } goto S643c; j1JBo: } goto kcNEi; lIAUk: if (!function_exists('ends_with')) { function ends_with($ptXnr, $QOIUa) { foreach ((array) $QOIUa as $LO3Ef) { if ((string) $LO3Ef === mb_substr($ptXnr, -mb_strlen($LO3Ef))) { return true; } } return false; } } goto NQTij; PjLry: if (!function_exists('array_forget')) { function array_forget(&$gw25s, $NP7Bb) { goto qqPun; qqPun: $qSgMY =& $gw25s; goto Y2lrG; i0j9_: if (count($NP7Bb) === 0) { return; } goto oF2nh; Y2lrG: $NP7Bb = (array) $NP7Bb; goto i0j9_; oF2nh: foreach ($NP7Bb as $cANPj) { goto bngbm; tHA0d: while (count($QdEEm) > 1) { $zm9f1 = array_shift($QdEEm); if (isset($gw25s[$zm9f1]) && is_array($gw25s[$zm9f1])) { $gw25s =& $gw25s[$zm9f1]; } else { $QdEEm = array(); } } goto qCKUo; qCKUo: unset($gw25s[array_shift($QdEEm)]); goto BJn2R; bngbm: $QdEEm = explode('.', $cANPj); goto tHA0d; BJn2R: $gw25s =& $qSgMY; goto X3Dct; X3Dct: } goto Lk2Tk; Lk2Tk: } } goto lIAUk; ernKK: function modstart_web_full_url($ikc2A = '', $kKcR8 = array()) { goto S9AUR; Rf4bX: return $xT6nh . modstart_web_url($ikc2A, $kKcR8); goto evRBh; S9AUR: $xT6nh = Request::domainUrl(); goto ECkVy; ECkVy: if ('http://localhost' == $xT6nh) { $xT6nh = rtrim(modstart_config('siteUrl', 'http://localhost'), '/'); } goto Rf4bX; evRBh: } goto xH_Xy; c8BGG: function modstart_configs($NP7Bb, $RsCDD = '') { goto uCUk2; RBgTM: return $RsCDD; goto OaS9a; Ixmhn: foreach ($NP7Bb as $cANPj) { $yFWLi = modstart_config($cANPj); if ($yFWLi) { return $yFWLi; } } goto RBgTM; uCUk2: if (is_string($NP7Bb)) { $NP7Bb = explode(',', $NP7Bb); } goto Ixmhn; OaS9a: } goto nw9a2; xH_Xy: function modstart_web_url($ikc2A = '', $kKcR8 = array()) { goto QYx2j; XKG8O: $OFAbu = config('modstart.web.prefix'); goto yqSJZ; QYx2j: if (!empty($kKcR8)) { $ikc2A = $ikc2A . '?' . http_build_query($kKcR8); } goto XKG8O; doKMW: return $OFAbu . $ikc2A; goto gFt_J; yqSJZ: $OFAbu = config('modstart.subdir') . $OFAbu; goto doKMW; gFt_J: } goto hodLR; F0kYg: function modstart_base_path() { return Request::basePath(); } goto GkUPQ; nw9a2: function modstart_config($cANPj = null, $RsCDD = '', $OE2mE = true) { goto f3hvd; eppJW: static $aPAGV = null; goto G4Eyw; G4Eyw: try { goto fKwHA; UrOBT: if (is_null($cANPj)) { return app('modstartConfig'); } goto JEKJ0; HlKqH: if (true === $RsCDD || false === $RsCDD) { $aPAGV = boolval($yFWLi); return $aPAGV; } goto W8L0i; fKwHA: if ($cANPj && $cANPj === $OcCMm) { return $aPAGV; } goto UrOBT; CB2le: if (is_array($RsCDD)) { goto OXTJa; csIt1: return $yFWLi; goto rH2rr; OXTJa: $yFWLi = @json_decode($yFWLi, true); goto d9weF; rONIm: $aPAGV = $yFWLi; goto csIt1; d9weF: if (null === $yFWLi) { $aPAGV = $RsCDD; return $RsCDD; } goto rONIm; rH2rr: } goto Db2Om; WHJr4: $KCr6E = $RsCDD; goto g5hpH; Db2Om: $aPAGV = $yFWLi; goto jhzyr; JEKJ0: $OcCMm = $cANPj; goto WHJr4; g5hpH: if (is_array($RsCDD)) { $KCr6E = SerializeUtil::jsonEncode($RsCDD); } goto CBJTK; CBJTK: $yFWLi = app('modstartConfig')->get($cANPj, $KCr6E, $OE2mE); goto HlKqH; W8L0i: if (is_int($RsCDD)) { $aPAGV = intval($yFWLi); return $aPAGV; } goto CB2le; jhzyr: return $yFWLi; goto HQv5e; HQv5e: } catch (Exception $l8i0J) { $aPAGV = $RsCDD; return $RsCDD; } goto kxUrv; f3hvd: static $OcCMm = null; goto eppJW; kxUrv: } goto rB57T; W4bRA: if (!function_exists('starts_with')) { function starts_with($ptXnr, $QOIUa) { foreach ((array) $QOIUa as $LO3Ef) { if ($LO3Ef != '' && mb_strpos($ptXnr, $LO3Ef) === 0) { return true; } } return false; } } goto VNz5Y; qtgBl: function L_locale($kAVAR = null) { goto sgqst; nYZCr: if (null !== $kAVAR) { if (in_array($kAVAR, array('en', 'zh'))) { $Rh73s = $kAVAR; } } goto I6VJB; I6VJB: if (null !== $Rh73s || null === $ngjz1) { goto fSj63; kkB_u: $aTAX1 = $Rh73s; goto jXU5E; AKEoP: if (empty($aTAX1)) { $aTAX1 = $kAVAR; } goto kYlUY; fyo7_: $D211C = config('app.fallback_locale'); goto uikxU; qXEa1: $MjjyR = null; goto UxN33; MM5FL: $GWeR4 = \Illuminate\Support\Facades\Request::route('locale'); goto Ug7X5; lM5E9: $ngjz1 = $aTAX1; goto k2Znw; uikxU: if (!\ModStart\App\Core\CurrentApp::is(\ModStart\App\Core\CurrentApp::ADMIN) && ModuleManager::isModuleInstalled('I18n')) { $MjjyR = \Module\I18n\Util\LangUtil::getDefault('shortName'); $UTqoY = \Module\I18n\Util\LangTransUtil::map(); } goto kkB_u; gvE9Q: if (empty($aTAX1)) { $aTAX1 = $D4I21; } goto dIHnY; fSj63: $w9nT7 = '_locale'; goto G3XdD; jXU5E: if (empty($aTAX1)) { $aTAX1 = $GWeR4; } goto gvE9Q; ewT7C: \Illuminate\Support\Facades\Session::put($w9nT7, $aTAX1); goto lM5E9; UxN33: $kAVAR = config('app.locale'); goto fyo7_; Ug7X5: $D4I21 = \Illuminate\Support\Facades\Session::get($w9nT7, null); goto qXEa1; G3XdD: if (\ModStart\App\Core\CurrentApp::is(\ModStart\App\Core\CurrentApp::ADMIN)) { $w9nT7 = '_adminLocale'; } goto MM5FL; dIHnY: if (empty($aTAX1)) { $aTAX1 = $MjjyR; } goto AKEoP; kYlUY: if (empty($aTAX1)) { $aTAX1 = $D211C; } goto ewT7C; k2Znw: } goto WUd74; ro_7C: $Rh73s = null; goto nYZCr; WUd74: return $ngjz1; goto Gxs8d; sgqst: static $ngjz1 = null; goto ro_7C; Gxs8d: } goto f0o1R; DJUWA: if (!function_exists('array_has')) { function array_has($gw25s, $cANPj) { goto tLzlW; sbCXb: if (array_key_exists($cANPj, $gw25s)) { return true; } goto RRR8I; xzxyD: return true; goto kMvgm; tLzlW: if (empty($gw25s) || is_null($cANPj)) { return false; } goto sbCXb; RRR8I: foreach (explode('.', $cANPj) as $Y38bi) { if (!is_array($gw25s) || !array_key_exists($Y38bi, $gw25s)) { return false; } $gw25s = $gw25s[$Y38bi]; } goto xzxyD; kMvgm: } } goto golEA; k2XcF: function modstart_api_url($ikc2A = '', $kKcR8 = array()) { goto o2IT_; wFf6P: $OFAbu = config('modstart.subdir') . $OFAbu; goto s8NTE; s8NTE: return $OFAbu . '/' . $ikc2A; goto BgAXI; SzvhH: $OFAbu = config('modstart.api.prefix'); goto wFf6P; o2IT_: if (!empty($kKcR8)) { $ikc2A = $ikc2A . '?' . http_build_query($kKcR8); } goto SzvhH; BgAXI: } goto hLgrk; UfQ1I: function L_locale_title($kAVAR = null) { goto sqc11; sqc11: if (null === $kAVAR) { $kAVAR = L_locale(); } goto uWeOO; uWeOO: $AvnxQ = config('modstart.i18n.langs', array()); goto hHY9k; hHY9k: return isset($AvnxQ[$kAVAR]) ? $AvnxQ[$kAVAR] : $kAVAR; goto HW2oP; HW2oP: } goto qtgBl; kcNEi: function modstart_admin_is_tab() { return boolval(View::shared('_isTab')); } goto FVd9I; golEA: if (!function_exists('array_except')) { function array_except($gw25s, $NP7Bb) { array_forget($gw25s, $NP7Bb); return $gw25s; } } goto PjLry; hLgrk: function modstart_open_api_path($hCl98 = '') { return ucfirst(config('modstart.openApi.directory')) . ($hCl98 ? DIRECTORY_SEPARATOR . $hCl98 : $hCl98); } goto t2VHC; YScpb: function modstart_module_enabled($C1S_N, $vRbzB = null) { if (null === $vRbzB) { return ModuleManager::isModuleEnabled($C1S_N); } else { return ModuleManager::isModuleEnableMatch($C1S_N, $vRbzB); } } goto UfQ1I; hodLR: function modstart_api_path($hCl98 = '') { return ucfirst(config('modstart.api.directory')) . ($hCl98 ? DIRECTORY_SEPARATOR . $hCl98 : $hCl98); } goto k2XcF; eN7tN: if (!function_exists('array_build')) { function array_build($gw25s, callable $k_TMY) { goto OILa2; OILa2: $AxBu3 = array(); goto tgHKj; J5gdb: return $AxBu3; goto reKI1; tgHKj: foreach ($gw25s as $cANPj => $VuXfH) { list($DSIQS, $D0mF9) = call_user_func($k_TMY, $cANPj, $VuXfH); $AxBu3[$DSIQS] = $D0mF9; } goto J5gdb; reKI1: } } goto W4bRA; f0o1R: function LM($C1S_N, $HQ4FM, ...$eBWrF) { goto LasSl; lbaMZ: static $AvnxQ = array(); goto nStJo; UKayD: $ngjz1 = L_locale(); goto QcZ8d; LasSl: static $T1nkE = null; goto UKayD; QcZ8d: if (null === $T1nkE) { $T1nkE = config('modstart.trackMissingLang', false); } goto lbaMZ; nStJo: if (!isset($AvnxQ[$C1S_N])) { $AvnxQ[$C1S_N] = array(); if ($ngjz1 && file_exists($Z3orD = ModuleManager::path($C1S_N, "Lang/{$ngjz1}.php"))) { $AvnxQ[$C1S_N] = (require $Z3orD); } } goto gQGYG; gQGYG: if (isset($AvnxQ[$C1S_N][$HQ4FM])) { return $AvnxQ[$C1S_N][$HQ4FM]; } goto vRRTg; vRRTg: return L($HQ4FM, ...$eBWrF); goto zO3UI; zO3UI: } goto MPwEJ; FVd9I: function modstart_web_path($hCl98 = '') { return ucfirst(config('modstart.web.directory')) . ($hCl98 ? DIRECTORY_SEPARATOR . $hCl98 : $hCl98); } goto ernKK; URWcp: function modstart_admin_config($cANPj = null, $RsCDD = null) { return AdminConfig::get($cANPj, $RsCDD); } goto F0kYg; JfrAH: function modstart_module_config($C1S_N, $cANPj, $RsCDD = null) { return ModuleManager::getModuleConfig($C1S_N, $cANPj, $RsCDD); } goto c8BGG; NQTij: if (PHP_VERSION_ID >= 80000) { require_once __DIR__ . '/Misc/Laravel/Input.php'; }