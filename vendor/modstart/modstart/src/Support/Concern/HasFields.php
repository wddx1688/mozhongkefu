<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace ModStart\Support\Concern; use Illuminate\Support\Collection; use ModStart\Field\AbstractField; use ModStart\Field\Type\FieldRenderMode; trait HasFields { private $fields; private $fieldDefaultRenderMode = 'add'; private function setupFields() { $this->fields = new Collection(); } public function fillFields() { $this->fields()->each(function (AbstractField $dBa7F) { $dBa7F->fill($this->item); }); } public function pushField(AbstractField $dBa7F) { $this->fields()->push($dBa7F); return $this; } public function removeField($NS5_3) { $this->fields = $this->fields()->filter(function (AbstractField $dBa7F) use($NS5_3) { return $dBa7F->column() != $NS5_3; }); return $this; } public function prependField(AbstractField $dBa7F) { $this->fields()->prepend($dBa7F); return $this; } public function fieldDefaultRenderMode($VuXfH = null) { if (null === $VuXfH) { return $this->fieldDefaultRenderMode; } return $this->fieldDefaultRenderMode = $VuXfH; } public function fields() { return $this->fields; } public function listableFields() { return $this->fields->filter(function (AbstractField $DUr2V) { return $DUr2V->listable(); }); } public function addableFields($Sz8r3 = false) { return $this->fields->filter(function (AbstractField $DUr2V) use($Sz8r3) { return $DUr2V->addable() || $Sz8r3 && $DUr2V->formShowOnly(); }); } protected function editableFields($Sz8r3 = false) { return $this->fields->filter(function (AbstractField $DUr2V) use($Sz8r3) { return $DUr2V->editable() || $Sz8r3 && $DUr2V->formShowOnly(); }); } protected function showableFields() { return $this->fields->filter(function (AbstractField $DUr2V) { return $DUr2V->showable(); }); } public function sortableFields() { return $this->fields->filter(function (AbstractField $DUr2V) { return $DUr2V->sortable(); }); } public function getFieldByName($HQ4FM) { return $this->fields->first(function ($dKmL2, AbstractField $DUr2V) use($HQ4FM) { return $DUr2V->name() == $HQ4FM; }); } public function getFieldByColumn($NS5_3) { return $this->fields->first(function ($dKmL2, AbstractField $DUr2V) use($NS5_3) { return $DUr2V->column() == $NS5_3; }); } }