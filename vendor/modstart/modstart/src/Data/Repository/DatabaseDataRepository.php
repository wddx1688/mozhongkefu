<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace ModStart\Data\Repository; use ModStart\Core\Dao\ModelUtil; use ModStart\Data\AbstractDataRepository; use ModStart\Data\AbstractDataStorage; class DatabaseDataRepository extends AbstractDataRepository { public function maxFilenameByte() { return 200; } public function addTemp($gAXRi, $hCl98, $owyBa, $j7D2N, $DqYLg = null) { $nx179 = array('category' => $gAXRi, 'path' => $hCl98, 'filename' => $owyBa, 'size' => $j7D2N, 'md5' => $DqYLg); return ModelUtil::insert('data_temp', $nx179); } public function getTemp($gAXRi, $hCl98) { return ModelUtil::get('data_temp', array('category' => $gAXRi, 'path' => $hCl98)); } public function getTempByPath($rNfgc) { if (preg_match(AbstractDataStorage::PATTERN_DATA_TEMP, $rNfgc, $jRzIK)) { return ModelUtil::get('data_temp', array('category' => $jRzIK[1], 'path' => $jRzIK[2])); } return null; } public function deleteTempById($CeOJi) { ModelUtil::delete('data_temp', array('id' => $CeOJi)); } public function addData($gAXRi, $hCl98, $owyBa, $j7D2N, $DqYLg = null) { $nx179 = array('category' => $gAXRi, 'path' => $hCl98, 'filename' => $owyBa, 'size' => $j7D2N, 'md5' => $DqYLg); return ModelUtil::insert('data', $nx179); } public function updateData($ORHuX, $L9MUd) { ModelUtil::update('data', $ORHuX, $L9MUd); } public function getDataById($CeOJi) { return ModelUtil::get('data', array('id' => $CeOJi)); } public function getDataByPath($hCl98) { if (preg_match(AbstractDataStorage::PATTERN_DATA, $hCl98, $jRzIK)) { return ModelUtil::get('data', array('category' => $jRzIK[1], 'path' => $jRzIK[2])); } else { if (preg_match(AbstractDataStorage::PATTERN_DATA_STRING, $hCl98, $jRzIK)) { return ModelUtil::get('data', array('category' => $jRzIK[1], 'path' => $jRzIK[2])); } } return null; } public function deleteDataById($CeOJi) { ModelUtil::delete('data', array('id' => $CeOJi)); } }