<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace ModStart\Field; use ModStart\Core\Exception\BizException; class Decimal extends AbstractField { protected $view = 'modstart::core.field.number'; protected $rules = array('regex:/^-?\\d+(\\.\\d+)?$/i'); protected function setup() { $this->addVariables(array('autoColor' => false, 'signShow' => false, 'min' => null, 'max' => null, 'step' => null)); } public function min($VuXfH) { $this->setVariable('min', $VuXfH); return $this; } public function max($VuXfH) { $this->setVariable('max', $VuXfH); return $this; } public function step($VuXfH) { $this->setVariable('step', $VuXfH); return $this; } public function autoColor($VjQ3H) { $this->setVariable('autoColor', $VjQ3H); return $this; } public function signShow($VjQ3H) { $this->setVariable('signShow', $VjQ3H); return $this; } public function unserializeValue($VuXfH, AbstractField $dBa7F) { if ('' === $VuXfH || null === $VuXfH) { return null; } return $VuXfH; } public function serializeValue($VuXfH, $Wa8N4) { if ('' === $VuXfH || null === $VuXfH) { return null; } return $VuXfH; } public function prepareInput($VuXfH, $Wa8N4) { goto pwuO1; qwzcZ: if (null !== ($yFWLi = $this->getVariable('max'))) { if ($VuXfH > $yFWLi) { BizException::throws(str_replace(array(':attribute', ':max'), array($this->label, $yFWLi), L('validation.max.numeric'))); } } goto DtLVX; oQlr0: if (null !== ($yFWLi = $this->getVariable('min'))) { if ($VuXfH < $yFWLi) { BizException::throws(str_replace(array(':attribute', ':min'), array($this->label, $yFWLi), L('validation.min.numeric'))); } } goto qwzcZ; DtLVX: return $VuXfH; goto cEF0f; pwuO1: if ('' === $VuXfH || null === $VuXfH) { return null; } goto oQlr0; cEF0f: } }