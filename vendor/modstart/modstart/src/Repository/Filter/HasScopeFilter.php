<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace ModStart\Repository\Filter; use Illuminate\Support\Facades\Input; trait HasScopeFilter { protected $scopeFilters = array(); protected $scopeDefault = null; protected $scopeAddedParam = array(); public function scopeFilter($HQ4FM, $iqgWB, \Closure $k_TMY = null) { goto HeDeD; HeDeD: $AKg7l = new ScopeFilter(); goto urHBx; rcspq: return $this; goto i0gc9; urHBx: call_user_func($k_TMY, $AKg7l); goto Ppd3x; Ppd3x: array_push($this->scopeFilters, array('name' => $HQ4FM, 'title' => $iqgWB, 'filter' => $AKg7l)); goto rcspq; i0gc9: } public function scopeDefault($HQ4FM) { $this->scopeDefault = $HQ4FM; return $this; } public function scopeParam() { goto BEGye; BEGye: $hTrmi = $this->scopeValue(); goto o7ivU; GlEH9: return array('_scope' => $hTrmi); goto fIJxe; o7ivU: if (null === $hTrmi) { return array(); } goto GlEH9; fIJxe: } public function scopeValue() { return Input::get('_scope', $this->scopeDefault); } public function scopeAddedParam($kKcR8 = null) { goto v97lw; DDw1l: $this->scopeAddedParam = $kKcR8; goto haa0m; v97lw: if (is_null($kKcR8)) { return $this->scopeAddedParam; } goto DDw1l; haa0m: return $this; goto VIrja; VIrja: } public function scopeExecuteQueries(&$IpOIw) { goto bKvzT; bKvzT: $nfGqX = Input::get('_scope', $this->scopeDefault); goto rQTxY; C3Vb1: foreach ($this->scopeFilters as $e3HE5) { if ($e3HE5['name'] == $nfGqX) { $AKg7l = $e3HE5['filter']; $AKg7l->executeQueries($IpOIw); } } goto b6nJA; rQTxY: if (empty($nfGqX)) { return; } goto C3Vb1; b6nJA: } }