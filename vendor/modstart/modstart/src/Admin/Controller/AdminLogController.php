<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace ModStart\Admin\Controller; use Illuminate\Routing\Controller; use ModStart\Admin\Auth\AdminPermission; use ModStart\Admin\Concern\HasAdminCRUD; use ModStart\Admin\Model\AdminLog; use ModStart\Admin\Type\AdminLogType; use ModStart\Detail\Detail; use ModStart\Form\Form; use ModStart\Grid\Grid; use ModStart\Grid\GridFilter; class AdminLogController extends Controller { use HasAdminCRUD; protected function grid() { goto UIhv5; kceok: return $h7Rk_; goto YcSoo; UIhv5: $h7Rk_ = new Grid(AdminLog::class, function (Grid $h7Rk_) { $h7Rk_->display('id', L('ID'))->width(80); $h7Rk_->select('adminUserId', L('Admin User'))->optionModel('admin_user', 'id', 'username'); $h7Rk_->type('type', L('Type'))->type(AdminLogType::class)->width(100); $h7Rk_->display('summary', L('Title')); $h7Rk_->jsonKeyValue('data.content', L('Data'))->width(200); $h7Rk_->display('created_at', L('Created At'))->width(160); $h7Rk_->gridFilter(function (GridFilter $AKg7l) { $AKg7l->eq('adminUserId', L('Admin User'))->selectModel('admin_user', 'id', 'username'); $AKg7l->like('summary', L('Title')); $AKg7l->eq('type', L('Type'))->radio(AdminLogType::class); }); }); goto RnxOJ; nIvk9: $h7Rk_->canDelete(AdminPermission::permit('AdminLogManage')); goto flvdy; zhLO4: $h7Rk_->title(L('Admin Log')); goto kceok; RnxOJ: $h7Rk_->canAdd(false)->canEdit(false); goto nIvk9; flvdy: $h7Rk_->canMultiSelectItem(true)->canBatchDelete(true); goto zhLO4; YcSoo: } protected function form() { $c9K5c = new Form(AdminLog::class, function (Form $c9K5c) { $c9K5c->display('id', L('ID'))->editable(true); }); return $c9K5c; } protected function detail() { goto VAssa; aAHw3: return $LT01t; goto qlULv; VAssa: $LT01t = new Detail(AdminLog::class, function (Detail $LT01t) { $LT01t->display('id', L('ID')); $LT01t->display('created_at', L('Created At')); $LT01t->type('type', L('Type'))->type(AdminLogType::class); $LT01t->display('summary', L('Title')); $LT01t->jsonKeyValue('data.content', L('Data')); }); goto MOUlz; MOUlz: $LT01t->title(L('Admin Log')); goto aAHw3; qlULv: } }