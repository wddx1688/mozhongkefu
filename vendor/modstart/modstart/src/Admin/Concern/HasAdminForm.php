<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace ModStart\Admin\Concern; use ModStart\Admin\Auth\AdminPermission; use ModStart\Admin\Layout\AdminDialogPage; use ModStart\Core\Input\Request; use ModStart\Core\Util\CRUDUtil; use ModStart\Form\Form; trait HasAdminForm { private function computeTitleForm($vfeCQ, $DI8P_) { $iqgWB = $vfeCQ ? $vfeCQ . ' ' . L($DI8P_) : L($DI8P_); return isset($this->pageTitle) ? $this->pageTitle : $iqgWB; } private function getForm() { goto Ux8N3; cUdOI: return $c9K5c; goto cPwBk; AiRes: $c9K5c->showSubmit(false)->showReset(false); goto cUdOI; Ux8N3: $c9K5c = $this->form(); goto AiRes; cPwBk: } public function add(AdminDialogPage $mZ5xK) { goto fbbAR; T_x00: if (Request::isPost()) { AdminPermission::demoCheck(); return $c9K5c->addRequest(); } goto omGV9; fbbAR: $c9K5c = $this->getForm(); goto T_x00; omGV9: return $mZ5xK->pageTitle($this->computeTitleForm($c9K5c->title(), 'Add'))->body($c9K5c->add()); goto ipHwc; ipHwc: } public function edit(AdminDialogPage $mZ5xK) { goto vOk8z; PSeJZ: return $mZ5xK->pageTitle($this->computeTitleForm($c9K5c->title(), 'Edit'))->body($c9K5c->edit(CRUDUtil::id())); goto nD_QN; ZEP0M: if (Request::isPost()) { AdminPermission::demoCheck(); return $c9K5c->editRequest(CRUDUtil::id()); } goto PSeJZ; vOk8z: $c9K5c = $this->getForm(); goto ZEP0M; nD_QN: } public function delete() { AdminPermission::demoCheck(); return $this->getForm()->deleteRequest(CRUDUtil::ids()); } public function sort() { AdminPermission::demoCheck(); return $this->getForm()->sortRequest(CRUDUtil::id()); } }