<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace ModStart\Core\Dao; use Illuminate\Database\Eloquent\Model; use Illuminate\Database\Query\Builder; use Illuminate\Support\Facades\DB; class DModelUtil { public static function model($miYey, $Wa8N4) { goto aH1d3; aH1d3: $AkyhD = new DynamicModel(); goto C6rsT; q1_WN: return $AkyhD; goto RcZ_0; G1XsK: $AkyhD->setConnection($miYey); goto q1_WN; C6rsT: $AkyhD->setTable($Wa8N4); goto G1XsK; RcZ_0: } public static function get($miYey, $Wa8N4, $kNTjB, $Px5Cq = array('*')) { goto uJcv4; uJcv4: if (is_string($kNTjB) || is_numeric($kNTjB)) { $kNTjB = array('id' => $kNTjB); } goto e7uTm; S3mgT: return $AkyhD->toArray(); goto eNIxm; UUZvl: if (empty($AkyhD)) { return null; } goto S3mgT; e7uTm: $AkyhD = self::model($miYey, $Wa8N4)->where($kNTjB)->first($Px5Cq); goto UUZvl; eNIxm: } public static function insert($miYey, $Wa8N4, $nx179) { goto rsxQq; naW0j: return $AkyhD->toArray(); goto qMxiE; PeIl6: foreach ($nx179 as $dKmL2 => $yFWLi) { $AkyhD->{$dKmL2} = $yFWLi; } goto TYBpq; TYBpq: $AkyhD->save(); goto naW0j; rsxQq: $AkyhD = self::model($miYey, $Wa8N4); goto PeIl6; qMxiE: } public static function insertAll($miYey, $Wa8N4, $AKCxZ, $lrbMf = true) { if ($lrbMf) { foreach ($AKCxZ as $qsK6T => $nx179) { $AKCxZ[$qsK6T]['created_at'] = date('Y-m-d H:i:s'); $AKCxZ[$qsK6T]['updated_at'] = date('Y-m-d H:i:s'); } } DB::connection($miYey)->table($Wa8N4)->insert($AKCxZ); } public static function delete($miYey, $Wa8N4, $kNTjB) { if (is_string($kNTjB) || is_numeric($kNTjB)) { $kNTjB = array('id' => $kNTjB); } return self::model($miYey, $Wa8N4)->where($kNTjB)->delete(); } public static function update($miYey, $Wa8N4, $kNTjB, $nx179) { goto KWfvC; KWfvC: if (empty($kNTjB)) { return null; } goto cF7cQ; YPM6D: if (empty($nx179)) { return null; } goto jr9qR; jr9qR: return self::model($miYey, $Wa8N4)->where($kNTjB)->update($nx179); goto xVVrY; cF7cQ: if (is_string($kNTjB) || is_numeric($kNTjB)) { $kNTjB = array('id' => $kNTjB); } goto YPM6D; xVVrY: } }