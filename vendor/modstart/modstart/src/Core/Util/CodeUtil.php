<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace ModStart\Core\Util; class CodeUtil { public static function cssRemoveComments($SIPLh) { goto MZPgR; yfZSp: return $SIPLh; goto LCQvz; e6oCh: $SIPLh = preg_replace('/__COMSTART[\\s\\S]*?COMEND__/s', '', $SIPLh); goto yfZSp; MZPgR: $SIPLh = str_replace('/*', '__COMSTART', $SIPLh); goto L8_M8; L8_M8: $SIPLh = str_replace('*/', 'COMEND__', $SIPLh); goto e6oCh; LCQvz: } public static function jsRemoveComments($SIPLh) { goto efd7b; XtM7W: return $SIPLh; goto fONFj; hPQeN: $SIPLh = preg_replace($Elc9S, '', $SIPLh); goto XtM7W; efd7b: $Elc9S = '/(?:(?:\\/\\*(?:[^*]|(?:\\*+[^*\\/]))*\\*+\\/)|(?:(?<!\\:|\\\\|\'|\\")\\/\\/.*))/'; goto hPQeN; fONFj: } public static function phpRemoveComments($SIPLh) { goto XMZTW; dcs1E: return join('', $IILdD); goto iSmlh; ND5pm: $IILdD = array(); goto xPDiR; XMZTW: $NtFAm = array(T_COMMENT); goto jH4nz; jH4nz: if (defined('T_DOC_COMMENT')) { $NtFAm[] = T_DOC_COMMENT; } goto hzaV0; hzaV0: if (defined('T_ML_COMMENT')) { $NtFAm[] = T_ML_COMMENT; } goto ND5pm; eDspa: foreach ($rzJkI as $VzL_6) { if (is_array($VzL_6)) { if (in_array($VzL_6[0], $NtFAm)) { continue; } $VzL_6 = $VzL_6[1]; } $IILdD[] = $VzL_6; } goto dcs1E; gXl3X: $tpTP_ = false; goto eDspa; xPDiR: $rzJkI = token_get_all($SIPLh); goto gXl3X; iSmlh: } public static function phpVarExport($X9HtJ, $TRWYs = '') { switch (gettype($X9HtJ)) { case 'string': if (strpos($X9HtJ, ':RAW:') === 0) { return substr($X9HtJ, strlen(':RAW:')); } return '"' . addcslashes($X9HtJ, '\\$"
	') . '"'; case 'array': goto FsO2f; saOvU: $d6C3Y = array(); goto zEdAY; FsO2f: $XaO11 = array_keys($X9HtJ) === range(0, count($X9HtJ) - 1); goto saOvU; zEdAY: foreach ($X9HtJ as $cANPj => $VuXfH) { $d6C3Y[] = "{$TRWYs}    " . ($XaO11 ? '' : self::phpVarExport($cANPj) . ' => ') . self::phpVarExport($VuXfH, "{$TRWYs}    "); } goto uPd0P; uPd0P: return '[
' . implode(',
', $d6C3Y) . '
' . $TRWYs . ']'; goto tIQa6; tIQa6: case 'boolean': return $X9HtJ ? 'true' : 'false'; default: return var_export($X9HtJ, true); } } public static function phpVarExportReturnFile($X9HtJ) { $N19iJ = self::phpVarExport($X9HtJ); return '<' . "?php\nreturn {$N19iJ};"; } public static function getFullClassNameForContent($N19iJ) { goto DYczu; rWuN6: if (empty($iCXib)) { return null; } goto unk4D; DYczu: $b896h = self::getClassNamespaceForContent($N19iJ); goto h4mn5; h4mn5: if (empty($b896h)) { return null; } goto ZbQru; unk4D: return "{$b896h}\\{$iCXib}"; goto gyCi3; ZbQru: $iCXib = self::getClassNameForContent($N19iJ); goto rWuN6; gyCi3: } public static function getClassNameForContent($N19iJ) { goto MpMtz; MpMtz: $PxsAX = array(); goto PVq8O; PVq8O: $rzJkI = token_get_all($N19iJ); goto La6Me; ER48M: return $PxsAX[0]; goto eTVVy; La6Me: $tqe7A = count($rzJkI); goto Znwgm; Znwgm: for ($qsK6T = 2; $qsK6T < $tqe7A; $qsK6T++) { if ($rzJkI[$qsK6T - 2][0] == T_CLASS && $rzJkI[$qsK6T - 1][0] == T_WHITESPACE && $rzJkI[$qsK6T][0] == T_STRING) { $EI0_x = $rzJkI[$qsK6T][1]; $PxsAX[] = $EI0_x; } } goto ER48M; eTVVy: } public static function getClassNamespaceForContent($N19iJ) { goto vzSY3; vzSY3: $rzJkI = token_get_all($N19iJ); goto SAxsp; Hqk5k: $b896h = ''; goto LMQd6; UYa3Z: $qsK6T = 0; goto Hqk5k; m3EEV: if (!$LgrHS) { return null; } else { return $b896h; } goto IGMFc; SAxsp: $tqe7A = count($rzJkI); goto UYa3Z; LMQd6: $LgrHS = false; goto fvHHr; fvHHr: while ($qsK6T < $tqe7A) { $VzL_6 = $rzJkI[$qsK6T]; if (is_array($VzL_6) && $VzL_6[0] === T_NAMESPACE) { while (++$qsK6T < $tqe7A) { if ($rzJkI[$qsK6T] === ';') { goto XdWxb; F78rf: break; goto md_nm; XdWxb: $LgrHS = true; goto yL8OZ; yL8OZ: $b896h = trim($b896h); goto F78rf; md_nm: } $b896h .= is_array($rzJkI[$qsK6T]) ? $rzJkI[$qsK6T][1] : $rzJkI[$qsK6T]; } break; } $qsK6T++; } goto m3EEV; IGMFc: } public static function htmlBeauty($irW2y) { goto RTSEP; wUI0n: return (string) $BM6HR; goto tVy3R; RTSEP: $BM6HR = \tidy_parse_string($irW2y, array('indent-spaces' => 4, 'indent' => true, 'output-xhtml' => true, 'show-body-only' => true, 'wrap' => 200), 'UTF8'); goto k0OTF; k0OTF: $BM6HR->cleanRepair(); goto wUI0n; tVy3R: } }