<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace ModStart\Core\Util; use Illuminate\Support\Str; class StrUtil { public static function mask($vfeCQ, $NkNkF = null, $aa2JC = null, $QDpj3 = '*') { goto wyMis; wyMis: $i7vxT = mb_strlen($vfeCQ); goto qPmA3; wtbG3: if (null == $aa2JC) { $aa2JC = $NkNkF + floor($i7vxT / 2); } goto BoNLg; kRn_H: if ($aa2JC >= $i7vxT - 1) { $aa2JC = $i7vxT - 1; } goto sfq2O; uZe0Z: if ($aa2JC < $i7vxT - 1) { $WeiR1 .= mb_substr($vfeCQ, $aa2JC + 1); } goto gAaqp; A2Xo7: if ($NkNkF > 0) { $WeiR1 .= mb_substr($vfeCQ, 0, $NkNkF); } goto KBipt; KBipt: $WeiR1 .= str_repeat($QDpj3, $aa2JC - $NkNkF + 1); goto uZe0Z; gAaqp: return $WeiR1; goto KltRV; BoNLg: if ($NkNkF < 0) { $NkNkF = 0; } goto kRn_H; sfq2O: $WeiR1 = ''; goto A2Xo7; qPmA3: if (null == $NkNkF) { $NkNkF = floor($i7vxT / 2); } goto wtbG3; KltRV: } public static function passwordStrength($mDyAE) { goto YUSd3; YUSd3: $Dq1cj = 0; goto ZIWs3; lKo96: if (!empty($mDyAE)) { $Dq1cj++; } goto i5Xrz; ZIWs3: if (!empty($mDyAE)) { $Dq1cj++; } goto bdOOC; TIxE8: if (!empty($mDyAE)) { $Dq1cj++; } goto RgjBL; a0X7P: if (!empty($mDyAE)) { $Dq1cj++; } goto NcZbR; bdOOC: $mDyAE = preg_replace('/\\d+/', '', $mDyAE); goto a0X7P; RgjBL: $mDyAE = preg_replace('/[A-Z]+/', '', $mDyAE); goto lKo96; NcZbR: $mDyAE = preg_replace('/[a-z]+/', '', $mDyAE); goto TIxE8; i5Xrz: return $Dq1cj; goto Ai5VW; Ai5VW: } public static function camelize($slqKs, $Q12hi = '_') { $slqKs = $Q12hi . str_replace($Q12hi, ' ', strtolower($slqKs)); return ltrim(str_replace(' ', '', ucwords($slqKs)), $Q12hi); } public static function uncamelize($zGWLl, $Q12hi = '_') { return strtolower(preg_replace('/([a-z])([A-Z])/', '$1' . $Q12hi . '$2', $zGWLl)); } public static function startWith($ptXnr, $QOIUa) { foreach ((array) $QOIUa as $LO3Ef) { if ($LO3Ef != '' && mb_strpos($ptXnr, $LO3Ef) === 0) { return true; } } return false; } public static function filterSpecialChars($VuXfH) { $QYgZg = array('​', '‌', '‍'); return str_replace($QYgZg, '', $VuXfH); } public static function limit($ZIfTd, $d5BqU = 100, $pzyNL = '...') { return Str::limit($ZIfTd, $d5BqU, $pzyNL); } public static function mbLimit($ZIfTd, $d5BqU) { return Str::limit($ZIfTd, $d5BqU, ''); } public static function mbLimitChars($ZIfTd, $d5BqU) { goto Fzhoy; qdye5: foreach ($QYgZg as $wVNLx) { goto A9ub6; A9ub6: $tqe7A += strlen($wVNLx); goto vLrsc; vLrsc: if ($tqe7A > $d5BqU) { break; } goto dUb_J; dUb_J: $ylUv7 .= $wVNLx; goto JPK7z; JPK7z: } goto JYGr3; BLaf3: $ylUv7 = ''; goto qdye5; JYGr3: return $ylUv7; goto vQpI1; wzJKq: $tqe7A = 0; goto BLaf3; Fzhoy: $QYgZg = mb_str_split($ZIfTd, 1, 'UTF-8'); goto wzJKq; vQpI1: } public static function mbLength($ZIfTd) { if (empty($ZIfTd)) { return 0; } return intval(mb_strlen($ZIfTd, 'UTF-8')); } public static function mbLengthGt($ZIfTd, $d5BqU) { return self::mbLength($ZIfTd) > $d5BqU; } public static function mbWordwrap($vt6fH, $Niw0h = 75, $vCbUr = '
') { goto KZnle; rGQ9_: for ($S0wnp = 0; $S0wnp < $aGTTl; $S0wnp++) { $wVNLx = mb_substr($vt6fH, $S0wnp, 1); $LPcKb = $wVNLx; if ($vmJAi !== 1) { $LPcKb = mb_substr($vt6fH, $S0wnp, $vmJAi); } if ($LPcKb === $vCbUr) { goto p4d7A; vDQI8: continue; goto EgtAt; Z4KzC: $S0wnp += $vmJAi - 1; goto av2ge; av2ge: $fJIjy = $xnhv7 = $S0wnp + 1; goto vDQI8; p4d7A: $jq2n1 .= mb_substr($vt6fH, $fJIjy, $S0wnp - $fJIjy + $vmJAi); goto Z4KzC; EgtAt: } if ($wVNLx === ' ') { goto C4xvt; stwv_: $xnhv7 = $S0wnp; goto E1B_n; E1B_n: continue; goto RQ_rn; C4xvt: if ($S0wnp - $fJIjy >= $Niw0h) { $jq2n1 .= mb_substr($vt6fH, $fJIjy, $S0wnp - $fJIjy) . $vCbUr; $fJIjy = $S0wnp + 1; } goto stwv_; RQ_rn: } if ($S0wnp - $fJIjy >= $Niw0h && $fJIjy >= $xnhv7) { goto XI9n_; XI9n_: $jq2n1 .= mb_substr($vt6fH, $fJIjy, $S0wnp - $fJIjy) . $vCbUr; goto XhztJ; XhztJ: $fJIjy = $xnhv7 = $S0wnp; goto p4Yob; p4Yob: continue; goto ojETq; ojETq: } if ($S0wnp - $fJIjy >= $Niw0h && $fJIjy < $xnhv7) { goto HHP8Y; VruVi: $fJIjy = $xnhv7 = $xnhv7 + 1; goto ydfaW; HHP8Y: $jq2n1 .= mb_substr($vt6fH, $fJIjy, $xnhv7 - $fJIjy) . $vCbUr; goto VruVi; ydfaW: continue; goto pKlT2; pKlT2: } } goto J_uN8; DISQ5: $fJIjy = $xnhv7 = 0; goto rGQ9_; GF6Ru: $vmJAi = mb_strlen($vCbUr); goto rvdeD; rvdeD: $jq2n1 = ''; goto DISQ5; KZnle: if ($vt6fH === '') { return ''; } goto t3OXG; J_uN8: if ($fJIjy !== $S0wnp) { $jq2n1 .= mb_substr($vt6fH, $fJIjy, $S0wnp - $fJIjy); } goto uF4bJ; vkeBx: $aGTTl = mb_strlen($vt6fH); goto GF6Ru; uF4bJ: return $jq2n1; goto Jldn8; t3OXG: if (strlen($vt6fH) === mb_strlen($vt6fH)) { return wordwrap($vt6fH, $Niw0h, $vCbUr, true); } goto vkeBx; Jldn8: } public static function split($ZIfTd, $I8ER6 = ',', $sU_Iy = array('，', ';', '；')) { goto do0bG; Un6IV: $tcwC2 = array_map('trim', $tcwC2); goto ZGSNz; aFVZ2: $tcwC2 = explode($I8ER6, $ZIfTd); goto Un6IV; ZGSNz: $tcwC2 = array_filter($tcwC2); goto NO02Q; do0bG: $ZIfTd = str_replace($sU_Iy, $I8ER6, $ZIfTd); goto aFVZ2; NO02Q: return $tcwC2; goto fvl6Z; fvl6Z: } public static function wordSplit($N19iJ) { if (modstart_module_enabled('WordSpliter')) { $YkA9c = \Module\WordSpliter\Util\WordSpliterUtil::cut($N19iJ); } else { preg_match_all('/[\\x{4e00}-\\x{9fa5}]|[A-Za-z]+/u', $N19iJ, $jRzIK); $YkA9c = array_filter($jRzIK[0]); } return $YkA9c; } }