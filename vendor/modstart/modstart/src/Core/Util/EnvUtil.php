<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace ModStart\Core\Util; use ModStart\Data\FileManager; class EnvUtil { public static function parse($Z3orD) { goto PyBQo; ONY9j: return $sB_AS; goto jZbDn; fKExh: if (file_exists($Z3orD)) { foreach (explode('
', file_get_contents($Z3orD)) as $ijEg1) { if ($ijEg1 = trim($ijEg1)) { goto HdH9p; YZ4pq: $yFWLi = trim(join('=', $YkA9c)); goto q93oo; DB2pb: $dKmL2 = trim($YkA9c[0]); goto lqBdH; HdH9p: if (substr($ijEg1, 0, 1) === '#') { continue; } goto Ba7UL; q93oo: switch (strtolower($yFWLi)) { case 'true': case '(true)': $yFWLi = true; break; case 'false': case '(false)': $yFWLi = false; break; case 'empty': case '(empty)': $yFWLi = ''; break; case 'null': case '(null)': $yFWLi = null; break; } goto b52gi; b52gi: $sB_AS[$dKmL2] = $yFWLi; goto T9mgg; lqBdH: array_shift($YkA9c); goto YZ4pq; Ba7UL: $YkA9c = explode('=', $ijEg1); goto DB2pb; T9mgg: } } } goto ONY9j; PyBQo: $sB_AS = array(); goto fKExh; jZbDn: } public static function all($Z3orD = null) { goto EKmX2; PAfGb: if (!empty($RWmLW)) { return $RWmLW; } goto IZsQ1; Gf6D7: return self::parse($Z3orD); goto c8aAo; IZsQ1: if (null === $Z3orD) { $Z3orD = base_path('.env'); } goto Gf6D7; EKmX2: global $RWmLW; goto PAfGb; c8aAo: } public static function env($cANPj) { switch ($cANPj) { case 'uploadMaxSize': goto C4YAd; teaBW: $j7D2N -= 10 * 1024; goto Qm8Oq; C4YAd: if (FileManager::$slowDebug) { return 100; } goto gITAp; A3QxC: $c5iQ5 = FileUtil::formattedSizeToBytes($c5iQ5); goto VVlyB; VVlyB: $j7D2N = min($NJtmI, $c5iQ5); goto teaBW; Aaj3R: if (empty($c5iQ5)) { return 0; } goto YwghD; gITAp: $NJtmI = @ini_get('upload_max_filesize'); goto MzDDm; Qm8Oq: return min(max($j7D2N, 100 * 1024), 2 * 1024 * 1024); goto jo_uF; YwghD: $NJtmI = FileUtil::formattedSizeToBytes($NJtmI); goto A3QxC; MzDDm: if (empty($NJtmI)) { return 0; } goto UjJck; UjJck: $c5iQ5 = @ini_get('post_max_size'); goto Aaj3R; jo_uF: } return null; } public static function iniFileConfig($cANPj) { return @ini_get($cANPj); } public static function securityKey() { goto CWm6H; bOK4H: if (null === $cANPj) { $cANPj = md5(SerializeUtil::jsonEncode(config('env'))); } goto aTQpS; CWm6H: static $cANPj = null; goto bOK4H; aTQpS: return $cANPj; goto GPB6T; GPB6T: } }