<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace ModStart\Core\Util; use Illuminate\Support\Str; use ModStart\Core\Input\Request; class PathUtil { public static function isPublicNetPath($hCl98) { goto Gt_Fx; Gt_Fx: $pD0GE = array('//', 'http://', 'https://'); goto ESdMs; ESdMs: foreach ($pD0GE as $OFAbu) { if (Str::startsWith($hCl98, $OFAbu)) { return true; } } goto EN4bv; EN4bv: return false; goto kyPrn; kyPrn: } public static function fix($hCl98, $N1V6D = null) { goto mVfUx; b_DpK: if (!Str::startsWith($hCl98, '/')) { $hCl98 = '/' . $hCl98; } goto vtwTu; RmJqj: if (Str::endsWith($N1V6D, '/')) { $N1V6D = substr($N1V6D, 0, strlen($N1V6D) - 1); } goto CbHBE; mVfUx: if (Str::startsWith($hCl98, 'http://') || Str::startsWith($hCl98, 'https://') || Str::startsWith($hCl98, '//')) { return $hCl98; } goto b_DpK; CbHBE: return $N1V6D . $hCl98; goto l2XPU; vtwTu: if ($N1V6D === null) { return $hCl98; } goto RmJqj; l2XPU: } public static function fixOrDefault($hCl98, $RsCDD, $N1V6D = null) { if (empty($hCl98)) { return self::fix($RsCDD, $N1V6D); } return self::fix($hCl98, $N1V6D); } public static function fixFull($hCl98, $N1V6D = null, $dYuDi = null) { goto XN3yV; CRX0M: if (null === $dYuDi) { $dYuDi = Request::schema(); } goto YFxnr; iMzTj: return $N1V6D . $hCl98; goto JA7qd; kmO9W: if (Str::endsWith($N1V6D, '/')) { $N1V6D = substr($N1V6D, 0, strlen($N1V6D) - 1); } goto iMzTj; YFxnr: if (Str::startsWith($hCl98, '//')) { return $dYuDi . ':' . $hCl98; } goto I4o0g; X4YRT: if ($N1V6D === null) { $N1V6D = $dYuDi . '://' . Request::domain(); } goto kmO9W; XN3yV: if (Str::startsWith($hCl98, 'http://') || Str::startsWith($hCl98, 'https://')) { return $hCl98; } goto CRX0M; I4o0g: if (!Str::startsWith($hCl98, '/')) { $hCl98 = '/' . $hCl98; } goto X4YRT; JA7qd: } public static function fixFullOrDefault($hCl98, $RsCDD, $N1V6D = null, $dYuDi = null) { if (empty($hCl98)) { return self::fixFull($RsCDD, $N1V6D, $dYuDi); } return self::fixFull($hCl98, $N1V6D, $dYuDi); } public static function convertPublicToInternal($hCl98) { goto XZRCq; ZPijD: $MHoh2 = modstart_config('Site_PublicInternalUrlMap', array()); goto z84CM; XZRCq: if (empty($hCl98)) { return $hCl98; } goto ZPijD; tJJw7: foreach ($MHoh2 as $GG1jh) { if (!isset($GG1jh['public']) || !isset($GG1jh['internal'])) { continue; } $hCl98 = str_replace($GG1jh['public'], $GG1jh['internal'], $hCl98); } goto RLSxG; z84CM: if (empty($MHoh2) || !is_array($MHoh2)) { return $hCl98; } goto tJJw7; RLSxG: return $hCl98; goto lr4EP; lr4EP: } }