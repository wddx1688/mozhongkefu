<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace ModStart\Core\Util; use Illuminate\Support\Str; class TagUtil { public static function seperated2Array($wCoWC, $bvUkP = ',') { if (',' == $bvUkP) { $wCoWC = str_replace(array('，'), ',', $wCoWC); } return array_filter(explode(',', $wCoWC)); } public static function seperated2String($wCoWC, $bvUkP = ',') { $AxBu3 = self::seperated2Array($wCoWC, $bvUkP); return self::array2String($AxBu3); } public static function array2String(array $wCoWC) { goto Fuccg; JCHZo: foreach ($wCoWC as &$Y3XIA) { goto uKvXr; ndKCW: if ($Y3XIA == '' || Str::contains($Y3XIA, ':')) { continue; } goto filOs; filOs: $sJ4Th[] = ':' . $Y3XIA . ':'; goto Q9mSy; uKvXr: $Y3XIA = trim($Y3XIA); goto ndKCW; Q9mSy: } goto mn6Da; mn6Da: return join('', array_unique($sJ4Th)); goto tASUK; Fuccg: $sJ4Th = array(); goto JCHZo; tASUK: } public static function string2Array($wCoWC, $qu8nX = 'auto') { goto GxGnx; TdhRS: foreach ($wCoWC as &$Y3XIA) { goto IPtlT; dMfMw: if ($qu8nX == 'auto' && is_numeric($Y3XIA)) { $sJ4Th[] = intval($Y3XIA); } else { $sJ4Th[] = $Y3XIA; } goto GEiRN; IPtlT: $Y3XIA = trim($Y3XIA); goto bu0ZZ; bu0ZZ: if (empty($Y3XIA)) { continue; } goto dMfMw; GEiRN: } goto jSvbT; X7V6s: $sJ4Th = array(); goto TdhRS; VTx2d: $wCoWC = explode('::', $wCoWC); goto X7V6s; F80u1: $wCoWC = trim($wCoWC, ':'); goto VTx2d; GxGnx: if (is_array($wCoWC)) { $wCoWC = join('::', $wCoWC); if (!empty($wCoWC)) { $wCoWC = ":{$wCoWC}:"; } } goto F80u1; jSvbT: return array_unique($sJ4Th); goto yDpcI; yDpcI: } public static function recordsString2Array(&$nQYo_, $sGhlV, $qu8nX = 'auto') { goto U_G5N; a2k7b: if (is_string($sGhlV)) { $sGhlV = array($sGhlV); } goto SKlao; SKlao: foreach ($nQYo_ as &$jdXuk) { foreach ($sGhlV as $cANPj) { $jdXuk[$cANPj] = self::string2Array($jdXuk[$cANPj], $qu8nX); } } goto UyUMx; U_G5N: if (empty($nQYo_)) { return; } goto a2k7b; UyUMx: } public static function recordsArray2String(&$nQYo_, $sGhlV) { goto BXv_b; BXv_b: if (empty($nQYo_)) { return; } goto o4Ln8; o4Ln8: if (is_string($sGhlV)) { $sGhlV = array($sGhlV); } goto T0hQQ; T0hQQ: foreach ($nQYo_ as &$jdXuk) { foreach ($sGhlV as $cANPj) { $jdXuk[$cANPj] = self::array2String($jdXuk[$cANPj]); } } goto sm8ct; sm8ct: } public static function mapInfo($wCoWC, array $KYYid = array()) { foreach ($wCoWC as &$Y3XIA) { if (array_key_exists($Y3XIA, $KYYid)) { $Y3XIA = $KYYid[$Y3XIA]; } } return $wCoWC; } public static function map($wCoWC, array $KYYid = array()) { goto FRto1; aJSdz: foreach ($wCoWC as $Y3XIA) { if (array_key_exists($Y3XIA, $KYYid)) { $abYJU[$Y3XIA] = $KYYid[$Y3XIA]; } else { $abYJU[$Y3XIA] = null; } } goto j3frr; FRto1: if (is_string($wCoWC)) { $wCoWC = self::string2Array($wCoWC); } goto VjRgV; VjRgV: $abYJU = array(); goto aJSdz; j3frr: return $abYJU; goto JhyKU; JhyKU: } public static function urlJoin($ikc2A, array $wCoWC, $SpSC3 = null, $mai9Q = 'number', $bVbzM = '_') { goto YxoXH; YxoXH: if (null !== $SpSC3) { foreach ($wCoWC as $kOFY1 => $Y3XIA) { if ($Y3XIA == $SpSC3) { unset($wCoWC[$kOFY1]); } } } goto yYkEp; yYkEp: if ('number' == $mai9Q) { sort($wCoWC, SORT_NUMERIC); } else { sort($wCoWC, SORT_STRING); } goto s_ftL; s_ftL: if ($ikc2A) { $wCoWC = array_merge(array($ikc2A), $wCoWC); } goto y4BZx; y4BZx: return join($bVbzM, $wCoWC); goto k0RhU; k0RhU: } }