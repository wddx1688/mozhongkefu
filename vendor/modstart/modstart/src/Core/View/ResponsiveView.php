<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace ModStart\Core\View; use Illuminate\Support\Facades\Input; use Illuminate\Support\Facades\Session; use Illuminate\Support\Str; use Module\Vendor\Provider\SiteTemplate\SiteTemplateProvider; class ResponsiveView { public static function templateRoot() { goto tDCjm; Y0wCW: if (null !== $FiRm_) { return $FiRm_; } goto NujjQ; tDCjm: static $xqqfG = null; goto YaJiy; YaJiy: static $FiRm_ = null; goto Y0wCW; jb0vz: return $FiRm_; goto F7Mdq; Jz2o8: $ONCpb = Input::get('msSiteTemplate', null); goto g_Zxi; g_Zxi: if (!empty($ONCpb)) { $xqqfG = SiteTemplateProvider::get($ONCpb); if (!empty($xqqfG)) { Session::put('msSiteTemplate', $ONCpb); } } goto vmXo4; oNeo_: if (empty($xqqfG)) { $ZSsZq = modstart_config()->getWithEnv('siteTemplate', 'default'); $xqqfG = SiteTemplateProvider::get($ZSsZq); } goto e1Flj; e1Flj: if ($xqqfG && $xqqfG->root()) { $FiRm_ = $xqqfG->root(); } else { $FiRm_ = "theme.{$ZSsZq}"; } goto jb0vz; vmXo4: if (empty($xqqfG)) { $ONCpb = Session::get('msSiteTemplate', null); if (!empty($ONCpb)) { $xqqfG = SiteTemplateProvider::get($ONCpb); if (empty($xqqfG)) { Session::forget('msSiteTemplate'); } } } goto oNeo_; NujjQ: static $ZSsZq = 'default'; goto Jz2o8; F7Mdq: } public static function templateRootRealpath($C1S_N) { goto e9eyV; AXDUq: return rtrim($oQtao, '\\/') . '/'; goto mJOz7; GScjY: if (Str::startsWith($oQtao, 'module::')) { $oQtao = str_replace(array('::', '.'), '/', $oQtao); $oQtao = base_path($oQtao); } else { if (Str::startsWith($oQtao, 'theme.')) { goto TVADR; dhb3L: $oQtao = base_path($oQtao); goto d3VHc; d3VHc: if (!file_exists($oQtao)) { $oQtao = base_path('module/' . $C1S_N . '/View'); } goto vIIqi; TVADR: $oQtao = 'resources/views/' . str_replace(array('.'), '/', $oQtao); goto dhb3L; vIIqi: if (!file_exists($oQtao)) { $oQtao = base_path('resources/views/theme/default'); } goto LAj4Z; LAj4Z: } else { $oQtao = base_path($oQtao); } } goto AXDUq; e9eyV: $oQtao = self::templateRoot(); goto GScjY; mJOz7: } }