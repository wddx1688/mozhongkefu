<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace ModStart\Widget\Chart; use ModStart\Core\Util\ColorUtil; use ModStart\Core\Util\TimeUtil; class Line extends Chart { protected $option = array('grid' => array('right' => '1%', 'left' => '1%', 'bottom' => '10%', 'containLabel' => true), 'toolbox' => array('feature' => array('dataView' => array('show' => true, 'readOnly' => false), 'restore' => array('show' => true), 'saveAsImage' => array('show' => true))), 'tooltip' => array('trigger' => 'axis', 'axisPointer' => array('type' => 'shadow', 'snap' => true, 'crossStyle' => array('color' => '#999'))), 'legend' => array('data' => array()), 'xAxis' => array('type' => 'category', 'data' => array()), 'yAxis' => array('type' => 'value', 'minInterval' => 1), 'series' => array()); public function ySeries($qsK6T, $VuXfH, $HQ4FM = '数量', $kKcR8 = array()) { goto pcW3N; pcW3N: if (!isset($kKcR8['lineColor'])) { $kKcR8['lineColor'] = ColorUtil::pick('L-' . $qsK6T); } goto zpK5C; IwxlU: $this->option['series'][$qsK6T] = array('name' => $HQ4FM, 'data' => $VuXfH, 'type' => 'line', 'smooth' => true, 'itemStyle' => array('normal' => array('color' => $kKcR8['lineColor'], 'lineStyle' => array('color' => $kKcR8['lineColor'])))); goto BJZAV; zpK5C: $this->option['legend']['data'][$qsK6T] = $HQ4FM; goto IwxlU; BJZAV: return $this; goto qz94l; qz94l: } public function tableDailyCountLatest($xTHe7 = array(), $d5BqU = 15) { goto Oxqex; XnN3V: $aibkj = date('Y-m-d', $Wzqzm); goto ZXtB7; ZXtB7: return $this->tableDailyCount($aibkj, $pzyNL, $xTHe7); goto dFRTu; Oxqex: $pzyNL = date('Y-m-d'); goto jxSz0; fuckQ: $Wzqzm = $ts5Yu - ($d5BqU - 1) * TimeUtil::PERIOD_DAY; goto XnN3V; jxSz0: $ts5Yu = strtotime($pzyNL); goto fuckQ; dFRTu: } public function tableDailyCount($aibkj, $pzyNL, $xTHe7 = array()) { goto Ubx25; u5tW2: $this->option['series'] = array(); goto g3aP0; tMMyw: return $this; goto VSpwD; g3aP0: foreach ($nx179['values'] as $kOFY1 => $VuXfH) { $u9AuJ = isset($xTHe7[$kOFY1]['color']) ? $xTHe7[$kOFY1]['color'] : ColorUtil::randomColor(); $this->option['series'][] = array('name' => $xTHe7[$kOFY1]['title'], 'data' => $VuXfH, 'type' => 'line', 'smooth' => true, 'itemStyle' => array('normal' => array('color' => $u9AuJ, 'lineStyle' => array('color' => $u9AuJ)))); } goto tMMyw; Ubx25: $nx179 = $this->dsTableCountSeriesDaily($aibkj, $pzyNL, $xTHe7); goto Xt1xL; Xt1xL: $this->xData($nx179['time']); goto u5tW2; VSpwD: } public function tableDailySumLatest($xTHe7 = array(), $d5BqU = 15) { goto aonYr; hzsjG: return $this->tableDailySum($aibkj, $pzyNL, $xTHe7); goto cwsUt; Ht1AF: $ts5Yu = strtotime($pzyNL); goto eeru0; aonYr: $pzyNL = date('Y-m-d'); goto Ht1AF; tr4yd: $aibkj = date('Y-m-d', $Wzqzm); goto hzsjG; eeru0: $Wzqzm = $ts5Yu - ($d5BqU - 1) * TimeUtil::PERIOD_DAY; goto tr4yd; cwsUt: } public function tableDailySum($aibkj, $pzyNL, $xTHe7 = array()) { goto ANPat; rarGd: return $this; goto PCr9c; pmBtA: $this->option['series'] = array(); goto OWxpo; ANPat: $nx179 = $this->dsTableSumSeriesDaily($aibkj, $pzyNL, $xTHe7); goto hCYeI; hCYeI: $this->xData($nx179['time']); goto pmBtA; OWxpo: foreach ($nx179['values'] as $kOFY1 => $VuXfH) { $u9AuJ = isset($xTHe7[$kOFY1]['color']) ? $xTHe7[$kOFY1]['color'] : ColorUtil::randomColor(); $this->option['series'][] = array('name' => $xTHe7[$kOFY1]['title'], 'data' => $VuXfH, 'type' => 'line', 'smooth' => true, 'itemStyle' => array('normal' => array('color' => $u9AuJ, 'lineStyle' => array('color' => $u9AuJ)))); } goto rarGd; PCr9c: } }