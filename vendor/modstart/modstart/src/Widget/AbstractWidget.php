<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace ModStart\Widget; use Illuminate\Contracts\Support\Renderable; use Illuminate\Support\Fluent; use ModStart\Core\Util\ConvertUtil; use ModStart\Core\Util\IdUtil; use ModStart\Support\Manager\WidgetManager; class AbstractWidget extends Fluent implements Renderable { protected $view; protected $id; public function __construct() { goto XoHp4; maab2: $this->id = IdUtil::generate('Widget'); goto ImjBj; XoHp4: parent::__construct(); goto maab2; ImjBj: WidgetManager::uses(static::class); goto JfQ4f; JfQ4f: } protected function formatAttributes() { goto yi2au; yi2au: $irW2y = array(); goto Hi9Da; Hi9Da: foreach ((array) $this->getAttributes() as $cANPj => $VuXfH) { $MwNmy = $this->formatAttribute($cANPj, $VuXfH); if (!is_null($MwNmy)) { $irW2y[] = $MwNmy; } } goto pI3WW; pI3WW: return count($irW2y) > 0 ? ' ' . implode(' ', $irW2y) : ''; goto ggsuq; ggsuq: } private function formatAttribute($cANPj, $VuXfH) { if (is_numeric($cANPj)) { $cANPj = $VuXfH; } if (!is_null($VuXfH)) { return $cANPj . '="' . htmlentities($VuXfH, ENT_QUOTES, 'UTF-8') . '"'; } } protected function variables() { return array(); } protected function toString($VuXfH) { return ConvertUtil::render($VuXfH); } public function render() { $nx179 = array_merge(array('id' => $this->id, 'attributes' => $this->formatAttributes()), $this->variables()); return view($this->view, $nx179)->render(); } public function __toString() { try { return $this->render(); } catch (\Exception $l8i0J) { return $l8i0J->getMessage(); } } }