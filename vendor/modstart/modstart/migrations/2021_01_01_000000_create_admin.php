<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ use Illuminate\Database\Schema\Blueprint; use Illuminate\Database\Migrations\Migration; class CreateAdmin extends Migration { public function up() { goto djjFk; DDGv8: Schema::connection($baCt2)->create('admin_role', function (Blueprint $R3agm) { $R3agm->increments('id'); $R3agm->timestamps(); $R3agm->string('name', 200)->comment('')->nullable(); }); goto Ha1wf; tLT_S: Schema::connection($baCt2)->create('admin_user_role', function (Blueprint $R3agm) { $R3agm->increments('id'); $R3agm->timestamps(); $R3agm->unsignedInteger('userId')->nullable(); $R3agm->unsignedInteger('roleId')->nullable(); $R3agm->index('userId'); $R3agm->index('roleId'); }); goto dWEum; BtCuu: Schema::create('admin_log_data', function (Blueprint $R3agm) { $R3agm->increments('id'); $R3agm->timestamps(); $R3agm->text('content')->nullable()->comment('内容'); }); goto vQ1Ix; dWEum: Schema::create('admin_log', function (Blueprint $R3agm) { $R3agm->increments('id'); $R3agm->timestamps(); $R3agm->integer('adminUserId')->nullable()->comment('用户ID'); $R3agm->tinyInteger('type')->nullable()->comment('类型'); $R3agm->string('summary', 400)->nullable()->comment('摘要'); }); goto BtCuu; Ha1wf: Schema::connection($baCt2)->create('admin_role_rule', function (Blueprint $R3agm) { $R3agm->increments('id'); $R3agm->timestamps(); $R3agm->unsignedInteger('roleId')->comment('')->nullable(); $R3agm->string('rule', 200)->comment('')->nullable(); $R3agm->index('roleId'); }); goto zVMEG; djjFk: $baCt2 = config('modstart.admin.database.connection') ?: config('database.default'); goto DDGv8; zVMEG: Schema::connection($baCt2)->create('admin_user', function (Blueprint $R3agm) { $R3agm->increments('id'); $R3agm->timestamps(); $R3agm->string('username', 100)->comment('')->nullable(); $R3agm->char('password', 32)->comment('')->nullable(); $R3agm->char('passwordSalt', 16)->comment('')->nullable(); $R3agm->boolean('ruleChanged')->comment('')->nullable(); $R3agm->timestamp('lastLoginTime')->comment('')->nullable(); $R3agm->string('lastLoginIp', 20)->comment('')->nullable(); $R3agm->timestamp('lastChangePwdTime')->comment('')->nullable(); $R3agm->unique('username'); }); goto tLT_S; vQ1Ix: } public function down() { } }